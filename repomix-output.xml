This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: node_modules, .next, dist, build, .git, .turbo
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
app/
  account/
    page.tsx
  api/
    auth/
      [...all]/
        route.ts
  components/
    magicui/
      iphone-15-pro.tsx
    ui/
      accordion.tsx
      alert.tsx
      badge.tsx
      button.tsx
      dialog.tsx
      dropdown-menu.tsx
      input.tsx
      separator.tsx
      skeleton.tsx
      tabs.tsx
      textarea.tsx
      tooltip.tsx
    code-block-command.tsx
    copy-button.tsx
    general-error-boundary.tsx
    not-found.test.tsx
    not-found.tsx
  dashboard/
    page.tsx
  debug-middleware/
    page.tsx
  example/
    components/
      kanban-board.tsx
    page.tsx
  features/
    account/
      actions.ts
    boards/
      actions.ts
    color-scheme/
      color-scheme-constants.ts
      color-scheme-script.tsx
      color-scheme.server.ts
      theme-toggle.test.tsx
      theme-toggle.tsx
      use-color-scheme.ts
    kanban/
      components/
        card.tsx
        column.module.css
        column.tsx
        new-card.tsx
        new-column.tsx
        scrollbar.module.css
      actions.ts
      board.tsx
      kanban-scrollbar.css
    landing/
      svgs/
        playwright-icon.tsx
        reactsquad-logo-icon.tsx
      description.tsx
      faq.tsx
      footer.tsx
      header.tsx
      hero.tsx
      installation-instructions.tsx
      landing-page.tsx
    projects/
      actions.ts
    teams/
      actions.ts
  hooks/
    use-package-manager.ts
  lib/
    auth-client.ts
    prisma.ts
    utils.ts
  onboarding/
    team/
      page.tsx
  projects/
    [projectId]/
      boards/
        [boardId]/
          page.tsx
        new/
          page.tsx
      page.tsx
    new/
      page.tsx
    layout.tsx
    page.tsx
  settings/
    page.tsx
  teams/
    new/
      page.tsx
  types/
    sudo.d.ts
  utils/
    get-error-message.test.ts
    get-error-message.ts
    get-socials-meta.server.tsx
    types.ts
  favicon.ico
  globals.css
  layout.tsx
  page.tsx
components/
  animate-ui/
    components/
      animate/
        avatar-group.tsx
    primitives/
      animate/
        avatar-group.tsx
        slot.tsx
        tooltip.tsx
  ui/
    avatar-group.tsx
    avatar.tsx
    breadcrumb.tsx
    button.tsx
    calendar.tsx
    collapsible.tsx
    dialog.tsx
    dropdown-menu.tsx
    input.tsx
    label.tsx
    popover.tsx
    separator.tsx
    sheet.tsx
    sidebar.tsx
    skeleton.tsx
    table.tsx
    textarea.tsx
    tooltip.tsx
  app-sidebar.tsx
  nav-main.tsx
  nav-projects.tsx
  nav-user.tsx
  project-tab-registrar.tsx
  team-switcher.tsx
  theme-provider.tsx
  workspace-tabs.tsx
hooks/
  use-mobile.ts
lib/
  auth-client.ts
  get-strict-context.tsx
  utils.ts
prisma/
  migrations/
    20251125201823_init/
      migration.sql
    20251125202758_add_column_color/
      migration.sql
    20251126070915_add_better_auth_models/
      migration.sql
    20251126071114_fix_better_auth_account/
      migration.sql
    20251126071214_add_session_ip_useragent/
      migration.sql
    20251126110555_rename_board_to_project/
      migration.sql
    20251126153042_add_board_model/
      migration.sql
    20251126161456_add_project_icon/
      migration.sql
    20251126163140_add_teams/
      migration.sql
    20251127125447_add_task_meta/
      migration.sql
    20251127140235_add_task_start_end/
      migration.sql
    20251129121824_add_project_and_task_numbers/
      migration.sql
    20251129123937_add_project_and_task_numbers/
      migration.sql
    20251130072211_add_task_creator/
      migration.sql
    20251130140048_dobavit_flag_arkhivatsii_v_model_task/
      migration.sql
    migration_lock.toml
  schema.prisma
public/
  images/
    app-dark.png
    app-light.png
  file.svg
  globe.svg
  next.svg
  vercel.svg
  window.svg
registry/
  new-york/
    hooks/
      use-js-loaded.ts
    ui/
      kanban.tsx
.gitignore
.nvmrc
auth.ts
components.json
eslint.config.mjs
middleware.ts
next.config.ts
package.json
postcss.config.mjs
prisma.config.ts
README.md
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="app/api/auth/[...all]/route.ts">
import { auth } from '@/auth';
import { toNextJsHandler } from 'better-auth/next-js';

export const { GET, POST } = toNextJsHandler(auth.handler);
</file>

<file path="app/components/magicui/iphone-15-pro.tsx">
import { type SVGProps, useId } from 'react';

import { cn } from '~/lib/utils';

export type Iphone15ProProps = {
  width?: number;
  height?: number;
  src?: string;
  videoSrc?: string;
} & SVGProps<SVGSVGElement>;

export function Iphone15Pro({
  className,
  height,
  src,
  videoSrc,
  width,
  ...props
}: Iphone15ProProps) {
  const id = useId();

  return (
    <svg
      width={width}
      height={height}
      viewBox="0 0 433 882"
      className={cn('h-auto max-h-[882px] w-full max-w-[433px]', className)}
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      {...props}
    >
      <path
        d="M2 73C2 32.6832 34.6832 0 75 0H357C397.317 0 430 32.6832 430 73V809C430 849.317 397.317 882 357 882H75C34.6832 882 2 849.317 2 809V73Z"
        className="fill-[#E5E5E5] dark:fill-[#404040]"
      />

      <path
        d="M0 171C0 170.448 0.447715 170 1 170H3V204H1C0.447715 204 0 203.552 0 203V171Z"
        className="fill-[#E5E5E5] dark:fill-[#404040]"
      />

      <path
        d="M1 234C1 233.448 1.44772 233 2 233H3.5V300H2C1.44772 300 1 299.552 1 299V234Z"
        className="fill-[#E5E5E5] dark:fill-[#404040]"
      />

      <path
        d="M1 319C1 318.448 1.44772 318 2 318H3.5V385H2C1.44772 385 1 384.552 1 384V319Z"
        className="fill-[#E5E5E5] dark:fill-[#404040]"
      />

      <path
        d="M430 279H432C432.552 279 433 279.448 433 280V384C433 384.552 432.552 385 432 385H430V279Z"
        className="fill-[#E5E5E5] dark:fill-[#404040]"
      />

      <path
        d="M6 74C6 35.3401 37.3401 4 76 4H356C394.66 4 426 35.3401 426 74V808C426 846.66 394.66 878 356 878H76C37.3401 878 6 846.66 6 808V74Z"
        className="fill-white dark:fill-[#262626]"
      />

      <path
        opacity="0.5"
        d="M174 5H258V5.5C258 6.60457 257.105 7.5 256 7.5H176C174.895 7.5 174 6.60457 174 5.5V5Z"
        className="fill-[#E5E5E5] dark:fill-[#404040]"
      />

      <path
        d="M21.25 75C21.25 44.2101 46.2101 19.25 77 19.25H355C385.79 19.25 410.75 44.2101 410.75 75V807C410.75 837.79 385.79 862.75 355 862.75H77C46.2101 862.75 21.25 837.79 21.25 807V75Z"
        className="fill-[#E5E5E5] stroke-[#E5E5E5] stroke-[0.5] dark:fill-[#404040] dark:stroke-[#404040]"
      />

      {src && (
        <image
          href={src}
          x="21.25"
          y="19.25"
          width="389.5"
          height="843.5"
          preserveAspectRatio="xMidYMid slice"
          clipPath={`url(#${`roundedCorners-${id}`})`}
        />
      )}

      {videoSrc && (
        <foreignObject x="21.25" y="19.25" width="389.5" height="843.5">
          <video
            className="size-full overflow-hidden rounded-[55.75px] object-cover"
            src={videoSrc}
            autoPlay
            loop
            muted
            playsInline
          />
        </foreignObject>
      )}

      <path
        d="M154 48.5C154 38.2827 162.283 30 172.5 30H259.5C269.717 30 278 38.2827 278 48.5C278 58.7173 269.717 67 259.5 67H172.5C162.283 67 154 58.7173 154 48.5Z"
        className="fill-[#F5F5F5] dark:fill-[#262626]"
      />

      <path
        d="M249 48.5C249 42.701 253.701 38 259.5 38C265.299 38 270 42.701 270 48.5C270 54.299 265.299 59 259.5 59C253.701 59 249 54.299 249 48.5Z"
        className="fill-[#F5F5F5] dark:fill-[#262626]"
      />

      <path
        d="M254 48.5C254 45.4624 256.462 43 259.5 43C262.538 43 265 45.4624 265 48.5C265 51.5376 262.538 54 259.5 54C256.462 54 254 51.5376 254 48.5Z"
        className="fill-[#E5E5E5] dark:fill-[#404040]"
      />

      <defs>
        <clipPath id={`roundedCorners-${id}`}>
          <rect
            x="21.25"
            y="19.25"
            width="389.5"
            height="843.5"
            rx="55.75"
            ry="55.75"
          />
        </clipPath>
      </defs>
    </svg>
  );
}
</file>

<file path="app/components/ui/accordion.tsx">
import * as AccordionPrimitive from '@radix-ui/react-accordion';
import { ChevronDownIcon } from 'lucide-react';
import * as React from 'react';

import { cn } from '~/lib/utils';

function Accordion({
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Root>) {
  return <AccordionPrimitive.Root data-slot="accordion" {...props} />;
}

function AccordionItem({
  className,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Item>) {
  return (
    <AccordionPrimitive.Item
      data-slot="accordion-item"
      className={cn('border-b last:border-b-0', className)}
      {...props}
    />
  );
}

function AccordionTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {
  return (
    <AccordionPrimitive.Header className="flex">
      <AccordionPrimitive.Trigger
        data-slot="accordion-trigger"
        className={cn(
          'focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180',
          className,
        )}
        {...props}
      >
        {children}
        <ChevronDownIcon className="text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200" />
      </AccordionPrimitive.Trigger>
    </AccordionPrimitive.Header>
  );
}

function AccordionContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Content>) {
  return (
    <AccordionPrimitive.Content
      data-slot="accordion-content"
      className="data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"
      {...props}
    >
      <div className={cn('pt-0 pb-4', className)}>{children}</div>
    </AccordionPrimitive.Content>
  );
}

export { Accordion, AccordionContent, AccordionItem, AccordionTrigger };
</file>

<file path="app/components/ui/alert.tsx">
import { cva, type VariantProps } from 'class-variance-authority';
import * as React from 'react';

import { cn } from '~/lib/utils';

const alertVariants = cva(
  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',
  {
    variants: {
      variant: {
        default: 'bg-card text-card-foreground',
        destructive:
          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
);

function Alert({
  className,
  variant,
  ...props
}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {
  return (
    <div
      data-slot="alert"
      role="alert"
      className={cn(alertVariants({ variant }), className)}
      {...props}
    />
  );
}

function AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="alert-title"
      className={cn(
        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',
        className,
      )}
      {...props}
    />
  );
}

function AlertDescription({
  className,
  ...props
}: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="alert-description"
      className={cn(
        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',
        className,
      )}
      {...props}
    />
  );
}

export { Alert, AlertDescription, AlertTitle };
</file>

<file path="app/components/ui/badge.tsx">
import { Slot } from '@radix-ui/react-slot';
import { cva, type VariantProps } from 'class-variance-authority';
import * as React from 'react';

import { cn } from '~/lib/utils';

const badgeVariants = cva(
  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',
  {
    variants: {
      variant: {
        default:
          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',
        secondary:
          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',
        destructive:
          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70',
        outline:
          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
);

function Badge({
  className,
  variant,
  asChild = false,
  ...props
}: React.ComponentProps<'span'> &
  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : 'span';

  return (
    <Comp
      data-slot="badge"
      className={cn(badgeVariants({ variant }), className)}
      {...props}
    />
  );
}

export { Badge, badgeVariants };
</file>

<file path="app/components/ui/button.tsx">
import { Slot } from '@radix-ui/react-slot';
import { cva, type VariantProps } from 'class-variance-authority';
import * as React from 'react';

import { cn } from '~/lib/utils';

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default:
          'bg-primary text-primary-foreground shadow-xs hover:bg-primary/90',
        destructive:
          'text-destructive hover-text-foreground bg-secondary border border-border hover:text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:hover:bg-destructive/60',
        outline:
          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',
        secondary:
          'bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80',
        ghost:
          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',
        link: 'text-primary underline-offset-4 hover:underline',
      },
      size: {
        default: 'h-9 px-4 py-2 has-[>svg]:px-3',
        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',
        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',
        icon: 'size-9',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
);

function Button({
  className,
  variant,
  size,
  asChild = false,
  ...props
}: React.ComponentProps<'button'> &
  VariantProps<typeof buttonVariants> & {
    asChild?: boolean;
  }) {
  const Comp = asChild ? Slot : 'button';

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      {...props}
    />
  );
}

export { Button, buttonVariants };
</file>

<file path="app/components/ui/dialog.tsx">
"use client"

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { XIcon } from "lucide-react"

import { cn } from "~/lib/utils"

function Dialog({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Root>) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />
}

function DialogTrigger({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />
}

function DialogPortal({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Portal>) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />
}

function DialogClose({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Close>) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />
}

function DialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {
  return (
    <DialogPrimitive.Overlay
      data-slot="dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props}
    />
  )
}

function DialogContent({
  className,
  children,
  showCloseButton = true,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Content> & {
  showCloseButton?: boolean
}) {
  return (
    <DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className
        )}
        {...props}
      >
        {children}
        {showCloseButton && (
          <DialogPrimitive.Close
            data-slot="dialog-close"
            className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"
          >
            <XIcon />
            <span className="sr-only">Close</span>
          </DialogPrimitive.Close>
        )}
      </DialogPrimitive.Content>
    </DialogPortal>
  )
}

function DialogHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  )
}

function DialogFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className
      )}
      {...props}
    />
  )
}

function DialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Title>) {
  return (
    <DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn("text-lg leading-none font-semibold", className)}
      {...props}
    />
  )
}

function DialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Description>) {
  return (
    <DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
}
</file>

<file path="app/components/ui/dropdown-menu.tsx">
import * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';
import { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react';
import * as React from 'react';

import { cn } from '~/lib/utils';

function DropdownMenu({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />;
}

function DropdownMenuPortal({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
  return (
    <DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />
  );
}

function DropdownMenuTrigger({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
  return (
    <DropdownMenuPrimitive.Trigger
      data-slot="dropdown-menu-trigger"
      {...props}
    />
  );
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
  return (
    <DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',
          className,
        )}
        {...props}
      />
    </DropdownMenuPrimitive.Portal>
  );
}

function DropdownMenuGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
  return (
    <DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />
  );
}

function DropdownMenuItem({
  className,
  inset,
  variant = 'default',
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
  inset?: boolean;
  variant?: 'default' | 'destructive';
}) {
  return (
    <DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
  return (
    <DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>
  );
}

function DropdownMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
  return (
    <DropdownMenuPrimitive.RadioGroup
      data-slot="dropdown-menu-radio-group"
      {...props}
    />
  );
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
  return (
    <DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>
  );
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn(
        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
  return (
    <DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn('bg-border -mx-1 my-1 h-px', className)}
      {...props}
    />
  );
}

function DropdownMenuShortcut({
  className,
  ...props
}: React.ComponentProps<'span'>) {
  return (
    <span
      data-slot="dropdown-menu-shortcut"
      className={cn(
        'text-muted-foreground ml-auto text-xs tracking-widest',
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuSub({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />;
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        'focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8',
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>
  );
}

function DropdownMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
  return (
    <DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',
        className,
      )}
      {...props}
    />
  );
}

export {
  DropdownMenu,
  DropdownMenuCheckboxItem,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuPortal,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuTrigger,
};
</file>

<file path="app/components/ui/input.tsx">
import * as React from 'react';

import { cn } from '~/lib/utils';

const inputBaseClass =
  'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm';
const inputFocusClass =
  'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]';
const inputErrorClass =
  'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive';
const inputClassName = cn(inputBaseClass, inputFocusClass, inputErrorClass);

function Input({ className, type, ...props }: React.ComponentProps<'input'>) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(inputClassName, className)}
      {...props}
    />
  );
}

export { Input, inputClassName };
</file>

<file path="app/components/ui/separator.tsx">
import * as SeparatorPrimitive from '@radix-ui/react-separator';
import * as React from 'react';

import { cn } from '~/lib/utils';

function Separator({
  className,
  orientation = 'horizontal',
  decorative = true,
  ...props
}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator-root"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        'bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px',
        className,
      )}
      {...props}
    />
  );
}

export { Separator };
</file>

<file path="app/components/ui/skeleton.tsx">
import { cn } from '~/lib/utils';

function Skeleton({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="skeleton"
      className={cn('bg-accent animate-pulse rounded-md', className)}
      {...props}
    />
  );
}

export { Skeleton };
</file>

<file path="app/components/ui/tabs.tsx">
import * as TabsPrimitive from '@radix-ui/react-tabs';
import * as React from 'react';

import { cn } from '~/lib/utils';

function Tabs({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Root>) {
  return (
    <TabsPrimitive.Root
      data-slot="tabs"
      className={cn('flex flex-col gap-2', className)}
      {...props}
    />
  );
}

function TabsList({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.List>) {
  return (
    <TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',
        className,
      )}
      {...props}
    />
  );
}

function TabsTrigger({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {
  return (
    <TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function TabsContent({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Content>) {
  return (
    <TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn('flex-1 outline-none', className)}
      {...props}
    />
  );
}

export { Tabs, TabsContent, TabsList, TabsTrigger };
</file>

<file path="app/components/ui/textarea.tsx">
import * as React from 'react';

import { cn } from '~/lib/utils';

function Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {
  return (
    <textarea
      data-slot="textarea"
      className={cn(
        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',
        className,
      )}
      {...props}
    />
  );
}

export { Textarea };
</file>

<file path="app/components/ui/tooltip.tsx">
import * as TooltipPrimitive from '@radix-ui/react-tooltip';
import * as React from 'react';

import { cn } from '~/lib/utils';

function TooltipProvider({
  delayDuration = 0,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {
  return (
    <TooltipPrimitive.Provider
      data-slot="tooltip-provider"
      delayDuration={delayDuration}
      {...props}
    />
  );
}

function Tooltip({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Root>) {
  return (
    <TooltipProvider>
      <TooltipPrimitive.Root data-slot="tooltip" {...props} />
    </TooltipProvider>
  );
}

function TooltipTrigger({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {
  return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />;
}

function TooltipContent({
  className,
  sideOffset = 0,
  children,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Content>) {
  return (
    <TooltipPrimitive.Portal>
      <TooltipPrimitive.Content
        data-slot="tooltip-content"
        sideOffset={sideOffset}
        className={cn(
          'bg-muted text-foreground border-border animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md border px-3 py-1.5 text-xs text-balance',
          className,
        )}
        {...props}
      >
        {children}
        <TooltipPrimitive.Arrow className="bg-muted fill-muted z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px] border-r border-b" />
      </TooltipPrimitive.Content>
    </TooltipPrimitive.Portal>
  );
}

export { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger };
</file>

<file path="app/components/copy-button.tsx">
import type { DropdownMenuTriggerProps } from '@radix-ui/react-dropdown-menu';
import { CheckIcon, ClipboardIcon } from 'lucide-react';
import * as React from 'react';

import { cn } from '~/lib/utils';

import { Button } from './ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from './ui/dropdown-menu';

type NpmCommands = {
  __npmCommand__?: string;
  __yarnCommand__?: string;
  __pnpmCommand__?: string;
  __bunCommand__?: string;
};

type CopyButtonProps = {
  value: string;
  src?: string;
} & React.ComponentProps<typeof Button>;

export function copyToClipboardWithMeta(value: string) {
  void navigator.clipboard.writeText(value);
}

export function CopyButton({
  value,
  className,
  src,
  variant = 'ghost',
  ...props
}: CopyButtonProps) {
  const [hasCopied, setHasCopied] = React.useState(false);

  React.useEffect(() => {
    setTimeout(() => {
      setHasCopied(false);
    }, 2000);
  }, [hasCopied]);

  return (
    <Button
      size="icon"
      variant={variant}
      className={cn(
        'text-foreground hover:bg-accent hover:text-accent-foreground relative z-10 h-6 w-6 [&_svg]:h-3 [&_svg]:w-3',
        className,
      )}
      onClick={() => {
        copyToClipboardWithMeta(value);
        setHasCopied(true);
      }}
      {...props}
    >
      <span className="sr-only">Copy</span>
      {hasCopied ? <CheckIcon /> : <ClipboardIcon />}
    </Button>
  );
}

type CopyWithClassNamesProps = {
  value: string;
  classNames: string;
  className?: string;
} & DropdownMenuTriggerProps;

export function CopyWithClassNames({
  value,
  classNames,
  className,
}: CopyWithClassNamesProps) {
  const [hasCopied, setHasCopied] = React.useState(false);

  React.useEffect(() => {
    setTimeout(() => {
      setHasCopied(false);
    }, 2000);
  }, [hasCopied]);

  const copyToClipboard = React.useCallback((value: string) => {
    copyToClipboardWithMeta(value);
    setHasCopied(true);
  }, []);

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button
          size="icon"
          variant="ghost"
          className={cn(
            'text-foreground hover:bg-accent hover:text-accent-foreground relative z-10 h-6 w-6',
            className,
          )}
        >
          {hasCopied ? (
            <CheckIcon className="h-3 w-3" />
          ) : (
            <ClipboardIcon className="h-3 w-3" />
          )}
          <span className="sr-only">Copy</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuItem onClick={() => copyToClipboard(value)}>
          Component
        </DropdownMenuItem>

        <DropdownMenuItem onClick={() => copyToClipboard(classNames)}>
          Classname
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  );
}

type CopyNpmCommandButtonProps = {
  commands: Required<NpmCommands>;
} & DropdownMenuTriggerProps;

export function CopyNpmCommandButton({
  commands,
  className,
}: CopyNpmCommandButtonProps) {
  const [hasCopied, setHasCopied] = React.useState(false);

  React.useEffect(() => {
    setTimeout(() => {
      setHasCopied(false);
    }, 2000);
  }, [hasCopied]);

  const copyCommand = React.useCallback((value: string) => {
    copyToClipboardWithMeta(value);
    setHasCopied(true);
  }, []);

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button
          size="icon"
          variant="ghost"
          className={cn(
            'text-foreground hover:bg-accent hover:text-accent-foreground relative z-10 h-6 w-6',
            className,
          )}
        >
          {hasCopied ? (
            <CheckIcon className="h-3 w-3" />
          ) : (
            <ClipboardIcon className="h-3 w-3" />
          )}
          <span className="sr-only">Copy</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuItem onClick={() => copyCommand(commands.__npmCommand__)}>
          npm
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => copyCommand(commands.__yarnCommand__)}>
          yarn
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => copyCommand(commands.__pnpmCommand__)}>
          pnpm
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => copyCommand(commands.__bunCommand__)}>
          bun
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  );
}
</file>

<file path="app/components/not-found.test.tsx">
import { describe, expect, test } from 'vitest';

import { createRoutesStub, render, screen } from '~/test/react-test-utils';

import { NotFound } from './not-found';

describe('NotFound Component', () => {
  test('given: component renders, should: display all required elements', () => {
    const path = '/non-existent';
    const RouterStub = createRoutesStub([
      { path, Component: () => <NotFound /> },
    ]);

    render(<RouterStub initialEntries={[path]} />);

    // Verify heading
    const heading = screen.getByRole('heading', {
      name: /page not found/i,
      level: 1,
    });
    expect(heading).toBeInTheDocument();

    // Verify status code
    const statusCode = screen.getByText(/404/i);
    expect(statusCode).toBeInTheDocument();

    // Verify description
    const description = screen.getByText(/we couldn't find the page/i);
    expect(description).toBeInTheDocument();

    // Verify home link
    const homeLink = screen.getByRole('link', { name: /return home/i });
    expect(homeLink).toHaveAttribute('href', '/');
  });
});
</file>

<file path="app/debug-middleware/page.tsx">
export default function DebugMiddlewarePage() {
return (

<main className="flex min-h-screen items-center justify-center"> <div>Middleware —Å—Ä–∞–±–æ—Ç–∞–ª: —Ç—ã –ø–æ–ø–∞–ª –Ω–∞ /debug-middleware</div> </main>
)
}
</file>

<file path="app/example/components/kanban-board.tsx">
'use client';

/* eslint-disable unicorn/no-null */
import { createId } from '@paralleldrive/cuid2';
import {
  MoreHorizontalIcon,
  PenIcon,
  PlusIcon,
  Trash2Icon,
} from 'lucide-react';
import type { ChangeEvent, FormEvent, KeyboardEvent } from 'react';
import { useEffect, useRef, useState } from 'react';
import { flushSync } from 'react-dom';

import { useJsLoaded } from '@/new-york/hooks/use-js-loaded';
import type {
  KanbanBoardCircleColor,
  KanbanBoardDropDirection,
} from '@/new-york/ui/kanban';
import {
  KANBAN_BOARD_CIRCLE_COLORS,
  KanbanBoard,
  KanbanBoardCard,
  KanbanBoardCardButton,
  KanbanBoardCardButtonGroup,
  KanbanBoardCardDescription,
  KanbanBoardCardTextarea,
  KanbanBoardColumn,
  KanbanBoardColumnButton,
  kanbanBoardColumnClassNames,
  KanbanBoardColumnFooter,
  KanbanBoardColumnHeader,
  KanbanBoardColumnIconButton,
  KanbanBoardColumnList,
  KanbanBoardColumnListItem,
  kanbanBoardColumnListItemClassNames,
  KanbanBoardColumnSkeleton,
  KanbanBoardColumnTitle,
  KanbanBoardExtraMargin,
  KanbanBoardProvider,
  KanbanColorCircle,
  useDndEvents,
} from '@/new-york/ui/kanban';
import { Button } from '~/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuTrigger,
} from '~/components/ui/dropdown-menu';
import { Input } from '~/components/ui/input';
import { Skeleton } from '~/components/ui/skeleton';
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from '~/components/ui/tooltip';

// Types
type Card = {
  id: string;
  title: string;
};

type Column = {
  id: string;
  title: string;
  color: KanbanBoardCircleColor;
  items: Card[];
};

function MyKanbanBoard() {
  const [columns, setColumns] = useState<Column[]>([
    {
      id: 'eowdjiak9f9jr27po347jr47',
      title: 'Backlog',
      color: 'primary',
      items: [
        {
          id: '1',
          title: 'Add a new column',
        },
        {
          id: '2',
          title: 'Add a new card',
        },
        {
          id: '3',
          title: 'Move a card to another column',
        },
        {
          id: '4',
          title: 'Delete a column',
        },
        {
          id: '5',
          title: 'Delete a card',
        },
        {
          id: '6',
          title: 'Update a card title',
        },
        {
          id: '7',
          title: 'Edit a column title',
        },
        {
          id: '8',
          title: `Check out

multi line

card content`,
        },
        {
          id: '9',
          title: 'Move a card between two other cards',
        },
        {
          id: '10',
          title: 'Turn on screen reader and listen to the announcements',
        },
        {
          id: '11',
          title: 'Notice how with enough cards, the colomns become scrollable',
        },
      ],
    },
    {
      id: 'ad1wx5djclsilpu8sjmp9g70',
      title: 'To Do',
      color: 'blue',
      items: [
        {
          id: '12',
          title: 'Install the Shadcn Kanban board into your project',
        },
        {
          id: '13',
          title: 'Build amazing apps',
        },
      ],
    },
    {
      id: 'zm3vyxyo0x47tl60340w8jrl',
      title: 'In Progress',
      color: 'red',
      items: [
        {
          id: '14',
          title: 'Make some magic',
        },
        {
          id: '15',
          title: 'Stay healthy',
        },
        {
          id: '16',
          title: 'Drink water üíß',
        },
      ],
    },
    {
      id: 'rzaksqoyfvgjbw466puqu9uk',
      title: 'In Review',
      color: 'yellow',
      items: [],
    },
    {
      id: 'w27comaw16gy2jxphpmt9xxv',
      title: 'Done',
      color: 'green',
      items: [
        {
          id: '17',
          title: 'Hey, the column to the left of me is empty!',
        },
        {
          id: '18',
          title:
            'And using the button to the right of me, you can add columns.',
        },
      ],
    },
  ]);

  // Scroll to the right when a new column is added.
  const scrollContainerReference = useRef<HTMLDivElement>(null);

  function scrollRight() {
    if (scrollContainerReference.current) {
      scrollContainerReference.current.scrollLeft =
        scrollContainerReference.current.scrollWidth;
    }
  }

  /*
  Column logic
  */

  const handleAddColumn = (title?: string) => {
    if (title) {
      flushSync(() => {
        setColumns(previousColumns => [
          ...previousColumns,
          {
            id: createId(),
            title,
            color:
              KANBAN_BOARD_CIRCLE_COLORS[previousColumns.length] ?? 'primary',
            items: [],
          },
        ]);
      });
    }

    scrollRight();
  };

  function handleDeleteColumn(columnId: string) {
    flushSync(() => {
      setColumns(previousColumns =>
        previousColumns.filter(column => column.id !== columnId),
      );
    });

    scrollRight();
  }

  function handleUpdateColumnTitle(columnId: string, title: string) {
    setColumns(previousColumns =>
      previousColumns.map(column =>
        column.id === columnId ? { ...column, title } : column,
      ),
    );
  }

  /*
  Card logic
  */

  function handleAddCard(columnId: string, cardContent: string) {
    setColumns(previousColumns =>
      previousColumns.map(column =>
        column.id === columnId
          ? {
              ...column,
              items: [...column.items, { id: createId(), title: cardContent }],
            }
          : column,
      ),
    );
  }

  function handleDeleteCard(cardId: string) {
    setColumns(previousColumns =>
      previousColumns.map(column =>
        column.items.some(card => card.id === cardId)
          ? { ...column, items: column.items.filter(({ id }) => id !== cardId) }
          : column,
      ),
    );
  }

  function handleMoveCardToColumn(columnId: string, index: number, card: Card) {
    setColumns(previousColumns =>
      previousColumns.map(column => {
        if (column.id === columnId) {
          const updatedItems = column.items.filter(({ id }) => id !== card.id);
          return {
            ...column,
            items: [
              ...updatedItems.slice(0, index),
              card,
              ...updatedItems.slice(index),
            ],
          };
        } else {
          return {
            ...column,
            items: column.items.filter(({ id }) => id !== card.id),
          };
        }
      }),
    );
  }

  function handleUpdateCardTitle(cardId: string, cardTitle: string) {
    setColumns(previousColumns =>
      previousColumns.map(column =>
        column.items.some(card => card.id === cardId)
          ? {
              ...column,
              items: column.items.map(card =>
                card.id === cardId ? { ...card, title: cardTitle } : card,
              ),
            }
          : column,
      ),
    );
  }

  /*
  Moving cards with the keyboard.
  */
  const [activeCardId, setActiveCardId] = useState<string>('');
  const originalCardPositionReference = useRef<{
    columnId: string;
    cardIndex: number;
  } | null>(null);
  const { onDragStart, onDragEnd, onDragCancel, onDragOver } = useDndEvents();

  function getOverId(column: Column, cardIndex: number): string {
    if (cardIndex < column.items.length - 1) {
      return column.items[cardIndex + 1].id;
    }

    return column.id;
  }

  function findCardPosition(cardId: string): {
    columnIndex: number;
    cardIndex: number;
  } {
    for (const [columnIndex, column] of columns.entries()) {
      const cardIndex = column.items.findIndex(c => c.id === cardId);

      if (cardIndex !== -1) {
        return { columnIndex, cardIndex };
      }
    }

    return { columnIndex: -1, cardIndex: -1 };
  }

  function moveActiveCard(
    cardId: string,
    direction: 'ArrowLeft' | 'ArrowRight' | 'ArrowUp' | 'ArrowDown',
  ) {
    const { columnIndex, cardIndex } = findCardPosition(cardId);
    if (columnIndex === -1 || cardIndex === -1) return;

    const card = columns[columnIndex].items[cardIndex];

    let newColumnIndex = columnIndex;
    let newCardIndex = cardIndex;

    switch (direction) {
      case 'ArrowUp': {
        newCardIndex = Math.max(cardIndex - 1, 0);
        break;
      }
      case 'ArrowDown': {
        newCardIndex = Math.min(
          cardIndex + 1,
          columns[columnIndex].items.length - 1,
        );
        break;
      }
      case 'ArrowLeft': {
        newColumnIndex = Math.max(columnIndex - 1, 0);
        newCardIndex = Math.min(
          newCardIndex,
          columns[newColumnIndex].items.length,
        );
        break;
      }
      case 'ArrowRight': {
        newColumnIndex = Math.min(columnIndex + 1, columns.length - 1);
        newCardIndex = Math.min(
          newCardIndex,
          columns[newColumnIndex].items.length,
        );
        break;
      }
    }

    flushSync(() => {
      handleMoveCardToColumn(columns[newColumnIndex].id, newCardIndex, card);
    });

    const { columnIndex: updatedColumnIndex, cardIndex: updatedCardIndex } =
      findCardPosition(cardId);
    const overId = getOverId(columns[updatedColumnIndex], updatedCardIndex);

    onDragOver(cardId, overId);
  }

  function handleCardKeyDown(
    event: KeyboardEvent<HTMLButtonElement>,
    cardId: string,
  ) {
    const { key } = event;

    if (activeCardId === '' && key === ' ') {
      event.preventDefault();
      setActiveCardId(cardId);
      onDragStart(cardId);

      const { columnIndex, cardIndex } = findCardPosition(cardId);
      originalCardPositionReference.current =
        columnIndex !== -1 && cardIndex !== -1
          ? { columnId: columns[columnIndex].id, cardIndex }
          : null;
    } else if (activeCardId === cardId) {
      if (key === ' ' || key === 'Enter') {
        event.preventDefault();
        flushSync(() => {
          setActiveCardId('');
        });

        const { columnIndex, cardIndex } = findCardPosition(cardId);
        if (columnIndex !== -1 && cardIndex !== -1) {
          const overId = getOverId(columns[columnIndex], cardIndex);
          onDragEnd(cardId, overId);
        } else {
          onDragEnd(cardId);
        }

        originalCardPositionReference.current = null;
      } else if (key === 'Escape') {
        event.preventDefault();

        if (originalCardPositionReference.current) {
          const { columnId, cardIndex } = originalCardPositionReference.current;
          const {
            columnIndex: currentColumnIndex,
            cardIndex: currentCardIndex,
          } = findCardPosition(cardId);

          if (
            currentColumnIndex !== -1 &&
            (columnId !== columns[currentColumnIndex].id ||
              cardIndex !== currentCardIndex)
          ) {
            const card = columns[currentColumnIndex].items[currentCardIndex];
            flushSync(() => {
              handleMoveCardToColumn(columnId, cardIndex, card);
            });
          }
        }

        onDragCancel(cardId);
        originalCardPositionReference.current = null;

        setActiveCardId('');
      } else if (
        key === 'ArrowLeft' ||
        key === 'ArrowRight' ||
        key === 'ArrowUp' ||
        key === 'ArrowDown'
      ) {
        event.preventDefault();
        moveActiveCard(cardId, key);
      }
    }
  }

  function handleCardBlur() {
    setActiveCardId('');
  }

  const jsLoaded = useJsLoaded();

  return (
    <KanbanBoard ref={scrollContainerReference}>
      {columns.map(column =>
        jsLoaded ? (
          <MyKanbanBoardColumn
            activeCardId={activeCardId}
            column={column}
            key={column.id}
            onAddCard={handleAddCard}
            onCardBlur={handleCardBlur}
            onCardKeyDown={handleCardKeyDown}
            onDeleteCard={handleDeleteCard}
            onDeleteColumn={handleDeleteColumn}
            onMoveCardToColumn={handleMoveCardToColumn}
            onUpdateCardTitle={handleUpdateCardTitle}
            onUpdateColumnTitle={handleUpdateColumnTitle}
          />
        ) : (
          <KanbanBoardColumnSkeleton key={column.id} />
        ),
      )}

      {/* Add a new column */}
      {jsLoaded ? (
        <MyNewKanbanBoardColumn onAddColumn={handleAddColumn} />
      ) : (
        <Skeleton className="h-9 w-10.5 flex-shrink-0" />
      )}

      <KanbanBoardExtraMargin />
    </KanbanBoard>
  );
}

function MyKanbanBoardColumn({
  activeCardId,
  column,
  onAddCard,
  onCardBlur,
  onCardKeyDown,
  onDeleteCard,
  onDeleteColumn,
  onMoveCardToColumn,
  onUpdateCardTitle,
  onUpdateColumnTitle,
}: {
  activeCardId: string;
  column: Column;
  onAddCard: (columnId: string, cardContent: string) => void;
  onCardBlur: () => void;
  onCardKeyDown: (
    event: KeyboardEvent<HTMLButtonElement>,
    cardId: string,
  ) => void;
  onDeleteCard: (cardId: string) => void;
  onDeleteColumn: (columnId: string) => void;
  onMoveCardToColumn: (columnId: string, index: number, card: Card) => void;
  onUpdateCardTitle: (cardId: string, cardTitle: string) => void;
  onUpdateColumnTitle: (columnId: string, columnTitle: string) => void;
}) {
  const [isEditingTitle, setIsEditingTitle] = useState(false);
  const listReference = useRef<HTMLUListElement>(null);
  const moreOptionsButtonReference = useRef<HTMLButtonElement>(null);
  const { onDragCancel, onDragEnd } = useDndEvents();

  function scrollList() {
    if (listReference.current) {
      listReference.current.scrollTop = listReference.current.scrollHeight;
    }
  }

  function closeDropdownMenu() {
    flushSync(() => {
      setIsEditingTitle(false);
    });

    moreOptionsButtonReference.current?.focus();
  }

  function handleSubmit(event: FormEvent<HTMLFormElement>) {
    event.preventDefault();
    const formData = new FormData(event.currentTarget);
    const columnTitle = formData.get('columnTitle') as string;
    onUpdateColumnTitle(column.id, columnTitle);
    closeDropdownMenu();
  }

  function handleDropOverColumn(dataTransferData: string) {
    const card = JSON.parse(dataTransferData) as Card;
    onMoveCardToColumn(column.id, 0, card);
  }

  function handleDropOverListItem(cardId: string) {
    return (
      dataTransferData: string,
      dropDirection: KanbanBoardDropDirection,
    ) => {
      const card = JSON.parse(dataTransferData) as Card;
      const cardIndex = column.items.findIndex(({ id }) => id === cardId);
      const currentCardIndex = column.items.findIndex(
        ({ id }) => id === card.id,
      );

      const baseIndex = dropDirection === 'top' ? cardIndex : cardIndex + 1;
      const targetIndex =
        currentCardIndex !== -1 && currentCardIndex < baseIndex
          ? baseIndex - 1
          : baseIndex;

      const safeTargetIndex = Math.max(
        0,
        Math.min(targetIndex, column.items.length),
      );
      const overCard = column.items[safeTargetIndex];

      if (card.id === overCard?.id) {
        onDragCancel(card.id);
      } else {
        onMoveCardToColumn(column.id, safeTargetIndex, card);
        onDragEnd(card.id, overCard?.id || column.id);
      }
    };
  }

  return (
    <KanbanBoardColumn
      columnId={column.id}
      key={column.id}
      onDropOverColumn={handleDropOverColumn}
    >
      <KanbanBoardColumnHeader>
        {isEditingTitle ? (
          <form
            className="w-full"
            onSubmit={handleSubmit}
            onBlur={event => {
              if (!event.currentTarget.contains(event.relatedTarget)) {
                closeDropdownMenu();
              }
            }}
          >
            <Input
              aria-label="Column title"
              autoFocus
              defaultValue={column.title}
              name="columnTitle"
              onKeyDown={event => {
                if (event.key === 'Escape') {
                  closeDropdownMenu();
                }
              }}
              required
            />
          </form>
        ) : (
          <>
            <KanbanBoardColumnTitle columnId={column.id}>
              <KanbanColorCircle color={column.color} />
              {column.title}
            </KanbanBoardColumnTitle>

            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <KanbanBoardColumnIconButton ref={moreOptionsButtonReference}>
                  <MoreHorizontalIcon />

                  <span className="sr-only">
                    More options for {column.title}
                  </span>
                </KanbanBoardColumnIconButton>
              </DropdownMenuTrigger>

              <DropdownMenuContent align="end">
                <DropdownMenuLabel>Column</DropdownMenuLabel>

                <DropdownMenuGroup>
                  <DropdownMenuItem onClick={() => setIsEditingTitle(true)}>
                    <PenIcon />
                    Edit Details
                  </DropdownMenuItem>

                  <DropdownMenuItem
                    className="text-destructive"
                    onClick={() => onDeleteColumn(column.id)}
                  >
                    <Trash2Icon />
                    Delete
                  </DropdownMenuItem>
                </DropdownMenuGroup>
              </DropdownMenuContent>
            </DropdownMenu>
          </>
        )}
      </KanbanBoardColumnHeader>

      <KanbanBoardColumnList ref={listReference}>
        {column.items.map(card => (
          <KanbanBoardColumnListItem
            cardId={card.id}
            key={card.id}
            onDropOverListItem={handleDropOverListItem(card.id)}
          >
            <MyKanbanBoardCard
              card={card}
              isActive={activeCardId === card.id}
              onCardBlur={onCardBlur}
              onCardKeyDown={onCardKeyDown}
              onDeleteCard={onDeleteCard}
              onUpdateCardTitle={onUpdateCardTitle}
            />
          </KanbanBoardColumnListItem>
        ))}
      </KanbanBoardColumnList>

      <MyNewKanbanBoardCard
        column={column}
        onAddCard={onAddCard}
        scrollList={scrollList}
      />
    </KanbanBoardColumn>
  );
}

function MyKanbanBoardCard({
  card,
  isActive,
  onCardBlur,
  onCardKeyDown,
  onDeleteCard,
  onUpdateCardTitle,
}: {
  card: Card;
  isActive: boolean;
  onCardBlur: () => void;
  onCardKeyDown: (
    event: KeyboardEvent<HTMLButtonElement>,
    cardId: string,
  ) => void;
  onDeleteCard: (cardId: string) => void;
  onUpdateCardTitle: (cardId: string, cardTitle: string) => void;
}) {
  const [isEditingTitle, setIsEditingTitle] = useState(false);
  const kanbanBoardCardReference = useRef<HTMLButtonElement>(null);
  const previousIsActiveReference = useRef(isActive);
  const wasCancelledReference = useRef(false);

  useEffect(() => {
    if (isActive && !isEditingTitle) {
      kanbanBoardCardReference.current?.focus();
    }

    if (
      !isActive &&
      previousIsActiveReference.current &&
      wasCancelledReference.current
    ) {
      kanbanBoardCardReference.current?.focus();
      wasCancelledReference.current = false;
    }

    previousIsActiveReference.current = isActive;
  }, [isActive, isEditingTitle]);

  function handleBlur() {
    flushSync(() => {
      setIsEditingTitle(false);
    });

    kanbanBoardCardReference.current?.focus();
  }

  function handleSubmit(event: FormEvent<HTMLFormElement>) {
    event.preventDefault();
    const formData = new FormData(event.currentTarget);
    const cardTitle = formData.get('cardTitle') as string;
    onUpdateCardTitle(card.id, cardTitle);
    handleBlur();
  }

  return isEditingTitle ? (
    <form onBlur={handleBlur} onSubmit={handleSubmit}>
      <KanbanBoardCardTextarea
        aria-label="Edit card title"
        autoFocus
        defaultValue={card.title}
        name="cardTitle"
        onFocus={event => event.target.select()}
        onInput={event => {
          const input = event.currentTarget as HTMLTextAreaElement;
          if (/\S/.test(input.value)) {
            input.setCustomValidity('');
          } else {
            input.setCustomValidity(
              'Card content cannot be empty or just whitespace.',
            );
          }
        }}
        onKeyDown={event => {
          if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault();
            event.currentTarget.form?.requestSubmit();
          }

          if (event.key === 'Escape') {
            handleBlur();
          }
        }}
        placeholder="Edit card title ..."
        required
      />
    </form>
  ) : (
    <KanbanBoardCard
      data={card}
      isActive={isActive}
      onBlur={onCardBlur}
      onClick={() => setIsEditingTitle(true)}
      onKeyDown={event => {
        if (event.key === ' ') {
          event.preventDefault();
        }

        if (event.key === 'Escape') {
          wasCancelledReference.current = true;
        }

        onCardKeyDown(event, card.id);
      }}
      ref={kanbanBoardCardReference}
    >
      <KanbanBoardCardDescription>{card.title}</KanbanBoardCardDescription>
      <KanbanBoardCardButtonGroup disabled={isActive}>
        <KanbanBoardCardButton
          className="text-destructive"
          onClick={() => onDeleteCard(card.id)}
          tooltip="Delete card"
        >
          <Trash2Icon />

          <span className="sr-only">Delete card</span>
        </KanbanBoardCardButton>
      </KanbanBoardCardButtonGroup>
    </KanbanBoardCard>
  );
}

function MyNewKanbanBoardCard({
  column,
  onAddCard,
  scrollList,
}: {
  column: Column;
  onAddCard: (columnId: string, cardContent: string) => void;
  scrollList: () => void;
}) {
  const [cardContent, setCardContent] = useState('');
  const newCardButtonReference = useRef<HTMLButtonElement>(null);
  const submitButtonReference = useRef<HTMLButtonElement>(null);
  const [showNewCardForm, setShowNewCardForm] = useState(false);

  function handleAddCardClick() {
    flushSync(() => {
      setShowNewCardForm(true);
    });

    scrollList();
  }

  function handleCancelClick() {
    flushSync(() => {
      setShowNewCardForm(false);
      setCardContent('');
    });

    newCardButtonReference.current?.focus();
  }

  function handleInputChange(event: ChangeEvent<HTMLTextAreaElement>) {
    setCardContent(event.currentTarget.value);
  }

  function handleSubmit(event: FormEvent<HTMLFormElement>) {
    event.preventDefault();

    flushSync(() => {
      onAddCard(column.id, cardContent.trim());
      setCardContent('');
    });

    scrollList();
  }

  return showNewCardForm ? (
    <>
      <form
        onBlur={event => {
          if (!event.currentTarget.contains(event.relatedTarget)) {
            handleCancelClick();
          }
        }}
        onSubmit={handleSubmit}
      >
        <div className={kanbanBoardColumnListItemClassNames}>
          <KanbanBoardCardTextarea
            aria-label="New card content"
            autoFocus
            name="cardContent"
            onChange={handleInputChange}
            onInput={event => {
              const input = event.currentTarget as HTMLTextAreaElement;
              if (/\S/.test(input.value)) {
                input.setCustomValidity('');
              } else {
                input.setCustomValidity(
                  'Card content cannot be empty or just whitespace.',
                );
              }
            }}
            onKeyDown={event => {
              if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                submitButtonReference.current?.click();
              }

              if (event.key === 'Escape') {
                handleCancelClick();
              }
            }}
            placeholder="New post ..."
            required
            value={cardContent}
          />
        </div>

        <KanbanBoardColumnFooter>
          <Button ref={submitButtonReference} size="sm" type="submit">
            Add
          </Button>

          <Button
            onClick={handleCancelClick}
            size="sm"
            variant="outline"
            type="button"
          >
            Cancel
          </Button>
        </KanbanBoardColumnFooter>
      </form>
    </>
  ) : (
    <KanbanBoardColumnFooter>
      <KanbanBoardColumnButton
        onClick={handleAddCardClick}
        ref={newCardButtonReference}
      >
        <PlusIcon />

        <span aria-hidden>New card</span>

        <span className="sr-only">Add new card to {column.title}</span>
      </KanbanBoardColumnButton>
    </KanbanBoardColumnFooter>
  );
}

function MyNewKanbanBoardColumn({
  onAddColumn,
}: {
  onAddColumn: (columnTitle?: string) => void;
}) {
  const [showEditor, setShowEditor] = useState(false);
  const newColumnButtonReference = useRef<HTMLButtonElement>(null);
  const inputReference = useRef<HTMLInputElement>(null);

  function handleAddColumnClick() {
    flushSync(() => {
      setShowEditor(true);
    });

    onAddColumn();
  }

  function handleCancelClick() {
    flushSync(() => {
      setShowEditor(false);
    });

    newColumnButtonReference.current?.focus();
  }

  function handleSubmit(event: FormEvent<HTMLFormElement>) {
    event.preventDefault();
    const formData = new FormData(event.currentTarget);
    const columnTitle = formData.get('columnTitle') as string;
    onAddColumn(columnTitle);
    if (inputReference.current) {
      inputReference.current.value = '';
    }
  }

  return showEditor ? (
    <form
      className={kanbanBoardColumnClassNames}
      onBlur={event => {
        if (!event.currentTarget.contains(event.relatedTarget)) {
          handleCancelClick();
        }
      }}
      onSubmit={handleSubmit}
    >
      <KanbanBoardColumnHeader>
        <Input
          aria-label="Column title"
          autoFocus
          name="columnTitle"
          onKeyDown={event => {
            if (event.key === 'Escape') {
              handleCancelClick();
            }
          }}
          placeholder="New column title ..."
          ref={inputReference}
          required
        />
      </KanbanBoardColumnHeader>

      <KanbanBoardColumnFooter>
        <Button size="sm" type="submit">
          Add
        </Button>

        <Button
          onClick={handleCancelClick}
          size="sm"
          type="button"
          variant="outline"
        >
          Cancel
        </Button>
      </KanbanBoardColumnFooter>
    </form>
  ) : (
    <Tooltip>
      <TooltipTrigger asChild>
        <Button
          onClick={handleAddColumnClick}
          ref={newColumnButtonReference}
          variant="outline"
        >
          <PlusIcon />

          <span className="sr-only">Add column</span>
        </Button>
      </TooltipTrigger>

      <TooltipContent>Add a new column to the board</TooltipContent>
    </Tooltip>
  );
}

export default function KanbanBoardPage() {
  return (
    <div className="h-svh overflow-x-hidden px-4 py-4 md:px-6">
      <KanbanBoardProvider>
        <MyKanbanBoard />
      </KanbanBoardProvider>
    </div>
  );
}
</file>

<file path="app/example/page.tsx">
import KanbanBoardPage from './components/kanban-board';

export default function ExamplePage() {
  return <KanbanBoardPage />;
}
</file>

<file path="app/features/account/actions.ts">
"use server"

import { headers } from "next/headers"
import { redirect } from "next/navigation"
import { auth } from "@/auth"
import prisma from "~/lib/prisma"

export async function updateDisplayName(formData: FormData) {
  const name = (formData.get("name") as string | null)?.trim()
  if (!name) {
    throw new Error("Display name is required")
  }

  const headersList = await headers()
  const session = await auth.api.getSession({
    headers: headersList,
  })

  const userId = session?.user?.id
  if (!userId) {
    redirect("/")
  }

  await prisma.user.update({
    where: { id: userId },
    data: { name },
  })

  redirect("/account")
}
</file>

<file path="app/features/color-scheme/color-scheme-constants.ts">
export const THEME_TOGGLE_INTENT = 'themeToggle';
export const COLOR_SCHEME_FORM_KEY = 'colorScheme';

export const colorSchemes = {
  light: 'light',
  dark: 'dark',
  system: 'system',
} as const;

export type ColorScheme = (typeof colorSchemes)[keyof typeof colorSchemes];
</file>

<file path="app/features/color-scheme/color-scheme-script.tsx">
import { useLayoutEffect, useMemo } from 'react';

import { useColorScheme } from './use-color-scheme';

export function ColorSchemeScript() {
  const colorScheme = useColorScheme();

  const script = useMemo(
    () => `const colorScheme = ${JSON.stringify(colorScheme)};
if (colorScheme === 'system') {
  const media = globalThis.matchMedia('(prefers-color-scheme: dark)');
  if (media.matches) {
    document.documentElement.classList.add('dark');
  }
}`,
    [],
  );

  if (typeof document !== 'undefined') {
    useLayoutEffect(() => {
      switch (colorScheme) {
        case 'light': {
          document.documentElement.classList.remove('dark');

          break;
        }

        case 'dark': {
          document.documentElement.classList.add('dark');

          break;
        }

        case 'system': {
          function check(media: MediaQueryList | MediaQueryListEvent) {
            if (media.matches) {
              document.documentElement.classList.add('dark');
            } else {
              document.documentElement.classList.remove('dark');
            }
          }

          const media = globalThis.matchMedia('(prefers-color-scheme: dark)');
          check(media);

          media.addEventListener('change', check);
          return () => media.removeEventListener('change', check);
        }

        default: {
          console.error('Impossible color scheme state:', colorScheme);
        }
      }
    }, [colorScheme]);
  }

  return <script dangerouslySetInnerHTML={{ __html: script }} />;
}
</file>

<file path="app/features/color-scheme/theme-toggle.test.tsx">
import userEvent from '@testing-library/user-event';
import { createRoutesStub } from 'react-router';
import { describe, expect, test } from 'vitest';

import { render, screen } from '~/test/react-test-utils';

import { ThemeToggle } from './theme-toggle';

function renderThemeToggle() {
  const path = '/test';
  const RouterStub = createRoutesStub([{ path, Component: ThemeToggle }]);

  return render(
    <RouterStub
      initialEntries={[path]}
      hydrationData={{ loaderData: { root: { colorScheme: 'light' } } }}
    />,
  );
}

describe('ThemeToggle Component', () => {
  test('given: default render, should: show a button with correct aria-label and dropdown closed', () => {
    renderThemeToggle();

    const button = screen.getByRole('button', {
      name: /open theme menu/i,
    });
    expect(button).toBeInTheDocument();

    // Verify dropdown is initially closed
    expect(screen.queryByText(/appearance/i)).not.toBeInTheDocument();
  });

  test('given: user interactions, should: handle dropdown menu accessibility and keyboard navigation', async () => {
    const user = userEvent.setup();
    renderThemeToggle();

    // Get the button and verify initial state
    const button = screen.getByRole('button', {
      name: /open theme menu/i,
    });

    // Click to open dropdown
    await user.click(button);

    // Verify dropdown is open and menu items are visible
    const menu = screen.getByText(/appearance/i);
    expect(menu).toBeInTheDocument();

    // Verify all theme options are present
    expect(
      screen.getByRole('menuitem', { name: /light/i }),
    ).toBeInTheDocument();
    expect(screen.getByRole('menuitem', { name: /dark/i })).toBeInTheDocument();
    expect(
      screen.getByRole('menuitem', { name: /system/i }),
    ).toBeInTheDocument();

    // Test keyboard navigation - Escape to close
    await user.keyboard('{Escape}');
    expect(screen.queryByText(/appearance/i)).not.toBeInTheDocument();

    // Test keyboard navigation - open with Enter
    button.focus();
    expect(button).toHaveFocus();
    await user.keyboard('{Enter}');
    expect(screen.getByText(/appearance/i)).toBeInTheDocument();
  });
});
</file>

<file path="app/features/kanban/components/column.module.css">
.scroll {
  overflow-y: auto;
  /* —Ç–æ–Ω–∫–∏–π —Å–∫—Ä–æ–ª–ª –±–µ–∑ —Å–¥–≤–∏–≥–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: transparent transparent;
}

/* WebKit-–±—Ä–∞—É–∑–µ—Ä—ã */
.scroll::-webkit-scrollbar {
  width: 4px;
}

.scroll::-webkit-scrollbar-track {
  background: transparent;
}

.scroll::-webkit-scrollbar-thumb {
  background-color: transparent;
  border-radius: 9999px;
}

/* –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–æ–ª–æ–Ω–∫—É ‚Äî —Å–¥–µ–ª–∞—Ç—å –ø–æ–ª–∑—É–Ω–æ–∫ –≤–∏–¥–∏–º—ã–º */
.scroll:hover {
  scrollbar-color: rgba(148, 163, 184, 0.5) transparent;
}

.scroll:hover::-webkit-scrollbar-thumb {
  background-color: rgba(148, 163, 184, 0.5);
}
</file>

<file path="app/features/kanban/components/new-column.tsx">
'use client';

import { PlusIcon } from 'lucide-react';
import { useState } from 'react';
import { kanbanBoardColumnClassNames } from '@/new-york/ui/kanban';
import { Button } from '~/components/ui/button';
import { Input } from '~/components/ui/input';
import {
  KanbanBoardColumnFooter,
  KanbanBoardColumnHeader,
} from '@/new-york/ui/kanban';

type NewColumnProps = {
  onAddColumn: (title: string) => void;
};

export function MyNewKanbanBoardColumn({ onAddColumn }: NewColumnProps) {
  const [isAdding, setIsAdding] = useState(false);

  if (isAdding) {
    return (
      <form
        className={kanbanBoardColumnClassNames}
        onSubmit={(e) => {
          e.preventDefault();
          const fd = new FormData(e.currentTarget);
          onAddColumn(fd.get('title') as string);
          setIsAdding(false);
        }}
      >
        <KanbanBoardColumnHeader>
          <Input name="title" autoFocus placeholder="Column title..." />
        </KanbanBoardColumnHeader>
        <KanbanBoardColumnFooter>
          <Button size="sm" type="submit">Add</Button>
          <Button size="sm" variant="outline" type="button" onClick={() => setIsAdding(false)}>Cancel</Button>
        </KanbanBoardColumnFooter>
      </form>
    );
  }

  return (
    <Button onClick={() => setIsAdding(true)} variant="outline">
      <PlusIcon /> <span className="sr-only">Add Column</span>
    </Button>
  );
}
</file>

<file path="app/features/kanban/components/scrollbar.module.css">
.kanbanScrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgba(100, 100, 100, 0.5) transparent;
  overflow-y: auto;
}
.kanbanScrollbar::-webkit-scrollbar {
  width: 6px;
}
.kanbanScrollbar::-webkit-scrollbar-track {
  background: transparent;
}
.kanbanScrollbar::-webkit-scrollbar-thumb {
  background-color: rgba(100, 100, 100, 0.5);
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: content-box;
  opacity: 0;
  transition: opacity 0.3s;
}
.kanbanScrollbar:hover::-webkit-scrollbar-thumb {
  opacity: 1;
}
</file>

<file path="app/features/kanban/kanban-scrollbar.css">
.kanban-column-scrollbar {
  overflow-y: auto;
  scrollbar-gutter: stable;
}

.kanban-column-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.kanban-column-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.kanban-column-scrollbar::-webkit-scrollbar-thumb {
  background-color: transparent;
  border-radius: 3px;
  transition: background-color 0.2s;
}

.kanban-column-scrollbar:hover::-webkit-scrollbar-thumb {
  background-color: rgba(148, 163, 184, 0.5);
}

.kanban-column-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: rgba(148, 163, 184, 0.7);
}

/* Firefox */
.kanban-column-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
}

.kanban-column-scrollbar:hover {
  scrollbar-color: rgba(148, 163, 184, 0.5) transparent;
}
</file>

<file path="app/features/landing/svgs/playwright-icon.tsx">
import type { IconProps } from '~/utils/types';

export function PlaywrightIcon({ className, ...props }: IconProps) {
  return (
    <svg
      aria-hidden="true"
      className={className}
      fill="none"
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
      {...props}
    >
      <path
        d="M7.99585 13.141725c-0.87725 0.248975 -1.452775 0.685475 -1.8319 1.12165 0.363125 -0.317775 0.849525 -0.609425 1.505675 -0.795425 0.6711 -0.1902 1.243625 -0.188825 1.7167 -0.09755v-0.369925c-0.40355 -0.0369 -0.866225 -0.0075 -1.390475 0.14125Zm-1.872 -3.109775 -3.25795 0.858325s0.059375 0.083875 0.1693 0.195775l2.76235 -0.727875s-0.03915 0.5044 -0.379075 0.9556c0.643 -0.486475 0.705375 -1.281825 0.705375 -1.281825Zm2.727125 7.65675C4.26615 18.923575 1.8404825 13.61025 1.1060875 10.852425c-0.3393 -1.273 -0.487415 -2.2371 -0.5268925 -2.859275 -0.0042425 -0.0646 -0.0022825 -0.11905 0.002285 -0.16895 -0.237835 0.01435 -0.3517015 0.137975 -0.328535 0.49525 0.0394775 0.621825 0.187595 1.585875 0.526895 2.859275C1.5139075 13.936125 3.9399 19.24945 8.52475 18.0146c0.99795 -0.26885 1.747675 -0.758525 2.310475 -1.383625 -0.51875 0.468525 -1.168 0.8375 -1.98425 1.057725Zm0.861575 -10.90855v0.3263h1.79835c-0.0369 -0.115525 -0.074075 -0.219625 -0.110975 -0.3263h-1.687375Z"
        fill="#2d4552"
        strokeWidth="0.25"
      />
      <path
        d="M11.9129 9.46735c0.80875 0.229675 1.2365 0.7967 1.462575 1.2985l0.90175 0.2561s-0.123 -1.756175 -1.711525 -2.2074c-1.486075 -0.422225 -2.400575 0.8257 -2.5118 0.9872 0.4323 -0.308 1.063575 -0.56015 1.859 -0.3344Zm7.178175 1.3066c-1.487425 -0.424125 -2.401575 0.8264 -2.511175 0.985625 0.432625 -0.307625 1.063575 -0.559875 1.85865 -0.3331 0.80745 0.23005 1.23485 0.796375 1.461625 1.298525l0.90305 0.25705s-0.125 -1.756525 -1.71215 -2.2081Zm-0.8959 4.6305 -7.501475 -2.097125s0.0812 0.411725 0.3928 0.94485l6.3159 1.765675c0.519975 -0.30085 0.792775 -0.6134 0.792775 -0.6134ZM12.994375 19.918475C7.054675 18.326 7.77275 10.758025 8.733875 7.171825c0.395725 -1.4779 0.802575 -2.576375 1.13995 -3.312725 -0.2013 -0.041425 -0.368025 0.0646 -0.532775 0.39965 -0.358225 0.726575 -0.8163 1.90955 -1.259625 3.5656 -0.96085 3.586125 -1.67895 11.15385 4.2605 12.746325 2.79955 0.75 4.980475 -0.3899 6.60625 -2.18005 -1.543175 1.3977 -3.513425 2.181325 -5.9538 1.52785Z"
        fill="#2d4552"
        strokeWidth="0.25"
      />
      <path
        d="M9.7126 15.915175V14.388l-4.243175 1.2032s0.313525 -1.82175 2.526475 -2.4495c0.6711 -0.1902 1.2437 -0.1889 1.7167 -0.09755V6.780125h2.124575c-0.231325 -0.714825 -0.4551 -1.26515 -0.64305 -1.64755 -0.310925 -0.632925 -0.62965 -0.21335 -1.35325 0.39185 -0.50965 0.425775 -1.797675 1.33405 -3.7359 1.85635 -1.938275 0.522625 -3.50525 0.384025 -4.15906 0.2708 -0.9268825 -0.1599 -1.4116925 -0.36345 -1.3663375 0.34155 0.03947 0.621825 0.187595 1.58595 0.5268925 2.859275C1.8405325 13.609875 4.266525 18.9232 8.85135 17.68835c1.197625 -0.3227 2.04295 -0.960525 2.6289 -1.7735h-1.76765v0.000325ZM2.865625 10.89025l3.258275 -0.858325s-0.094975 1.25345 -1.31645 1.57545c-1.2218 0.321675 -1.941825 -0.717125 -1.941825 -0.717125Z"
        fill="#e2574c"
        strokeWidth="0.25"
      />
      <path
        d="M21.975075 6.8525c-0.84695 0.148475 -2.878875 0.33345 -5.389975 -0.339625 -2.5118 -0.672675 -4.17835 -1.849175 -4.838625 -2.402175 -0.936 -0.783975 -1.347725 -1.328825 -1.752925 -0.5047 -0.358225 0.726875 -0.816325 1.909875 -1.259725 3.565925 -0.960775 3.586125 -1.67885 11.15385 4.260525 12.7463 5.938125 1.591125 9.09945 -5.322175 10.0603 -8.908625 0.4434 -1.655725 0.637825 -2.9095 0.691325 -3.717925 0.061 -0.915775 -0.568025 -0.64995 -1.7709 -0.439175ZM10.0418 9.81945s0.936 -1.45575 2.523525 -1.00455c1.588525 0.451225 1.711525 2.207425 1.711525 2.207425l-4.23505 -1.202875ZM13.917 16.352c-2.79235 -0.817975 -3.223 -3.04465 -3.223 -3.04465l7.501125 2.0972c0 -0.00035 -1.5141 1.755175 -4.278125 0.94745Zm2.6521 -4.57605s0.9347 -1.45475 2.521925 -1.00225c1.587175 0.4519 1.71215 2.2081 1.71215 2.2081l-4.234075 -1.20585Z"
        fill="#2ead33"
        strokeWidth="0.25"
      />
      <path
        d="M8.2299 14.808525 5.4695 15.590875s0.29985 -1.708225 2.33335 -2.385175l-1.563075 -5.865975 -0.135075 0.04105c-1.93825 0.5227 -3.505225 0.384025 -4.15903 0.2708 -0.9268775 -0.159825 -1.411685 -0.36345 -1.3663375 0.341625 0.0394775 0.621825 0.187595 1.585875 0.5268925 2.85925 0.7340675 2.757425 3.160075 8.07075 7.744875 6.8359l0.135075 -0.042425 -0.756275 -2.8374ZM2.8657 10.8903l3.258275 -0.858375s-0.094975 1.25345 -1.316425 1.57545c-1.221825 0.321675 -1.94185 -0.717075 -1.94185 -0.717075Z"
        fill="#d65348"
        strokeWidth="0.25"
      />
      <path
        d="m14.04295 16.382625 -0.1263 -0.0307c-2.792325 -0.8179 -3.223 -3.044575 -3.223 -3.044575l3.86805 1.0812 2.047825 -7.86915 -0.024775 -0.006525c-2.5118 -0.672675 -4.17825 -1.849175 -4.838625 -2.402175 -0.936 -0.783975 -1.347725 -1.328825 -1.752925 -0.5047 -0.357875 0.726875 -0.815975 1.909875 -1.259375 3.565925 -0.960775 3.586125 -1.67885 11.15385 4.260525 12.74625l0.121725 0.027425 0.926875 -3.562975ZM10.0418 9.819475s0.936 -1.455775 2.523525 -1.004575c1.588525 0.451225 1.711525 2.207425 1.711525 2.207425l-4.23505 -1.20285Z"
        fill="#1d8d22"
        strokeWidth="0.25"
      />
      <path
        d="m8.37055 14.7683 -0.740275 0.2101c0.174875 0.9859 0.483125 1.93205 0.966975 2.7679 0.0842 -0.0186 0.167725 -0.034575 0.2535 -0.058075 0.2248 -0.06065 0.43325 -0.13575 0.63395 -0.21765 -0.5406 -0.802225 -0.898225 -1.726175 -1.11415 -2.702275Zm-0.289075 -6.9439c-0.3804 1.419825 -0.720725 3.46345 -0.62705 5.51325 0.167675 -0.072775 0.3448 -0.140575 0.54155 -0.1964l0.13705 -0.030625c-0.167075 -2.189525 0.194075 -4.4207 0.600925 -5.93875 0.103125 -0.384025 0.206525 -0.741225 0.3096 -1.07435 -0.166025 0.105675 -0.3448 0.213975 -0.548425 0.32555 -0.137325 0.42385 -0.276 0.887125 -0.41365 1.401325Z"
        fill="#c04b41"
        strokeWidth="0.25"
      />
    </svg>
  );
}
</file>

<file path="app/features/landing/svgs/reactsquad-logo-icon.tsx">
import type { IconProps } from '~/utils/types';

export function ReactsquadLogoIcon({ className = '', ...props }: IconProps) {
  return (
    <svg
      width="153"
      height="25"
      viewBox="0 0 153 25"
      fill="none" // Ensures children control their fill
      xmlns="http://www.w3.org/2000/svg"
      className={className} // Apply Tailwind classes here
      {...props}
    >
      <g clipPath="url(#clip0_12_23_your_icon)">
        {' '}
        {/* Unique ID for clipPath */}
        <path
          d="M23.6669 7.70503C23.4458 7.5855 23.2147 7.46952 22.9742 7.35763C22.8212 7.28641 22.6652 7.21709 22.5065 7.14996C22.5275 6.97831 22.5457 6.80802 22.5607 6.63964C22.8264 3.64732 22.0562 1.46877 20.3921 0.505988C18.8754 -0.371924 16.8574 -0.100118 14.6545 1.26273C14.4408 1.39509 14.2254 1.53754 14.0084 1.69036C13.8701 1.78779 13.7321 1.88849 13.5946 1.99274C13.4568 1.88822 13.319 1.78752 13.181 1.69036C10.7285 -0.0365331 8.46136 -0.457069 6.7973 0.505988C5.28053 1.38363 4.50622 3.27154 4.58273 5.86488C4.58981 6.1165 4.60533 6.37493 4.62874 6.63964C4.64372 6.80802 4.66196 6.97831 4.68319 7.14996C4.52419 7.21709 4.36819 7.28641 4.21518 7.35763C3.97477 7.46952 3.74362 7.5855 3.52254 7.70503C1.24372 8.9358 -0.000244141 10.5514 -0.000244141 12.3069C-0.000244141 14.0625 1.24372 15.6783 3.52254 16.9088C3.74362 17.0283 3.97477 17.1443 4.21518 17.2562C4.36819 17.3274 4.52419 17.3967 4.68319 17.4641C4.66196 17.6358 4.64372 17.8061 4.62874 17.9745C4.36301 20.9668 5.13324 23.1451 6.7973 24.1081C7.38212 24.4465 8.04126 24.6141 8.75704 24.6141C9.89754 24.6141 11.1813 24.1886 12.5347 23.3511C12.7487 23.2187 12.964 23.0763 13.181 22.9235C13.319 22.826 13.4571 22.7253 13.5948 22.6211C13.7326 22.7256 13.8704 22.8263 14.0084 22.9235C15.599 24.0434 17.1116 24.6141 18.4324 24.6141C19.1482 24.6141 19.8073 24.4465 20.3921 24.1081C21.9089 23.2302 22.6832 21.3426 22.6067 18.7492C22.5996 18.4976 22.5841 18.2392 22.5607 17.9745C22.5457 17.8058 22.5275 17.6355 22.5062 17.4639C22.6652 17.3967 22.8212 17.3274 22.9742 17.2562C23.2147 17.1443 23.4455 17.0286 23.6666 16.9088C25.9457 15.6783 27.1897 14.0627 27.1897 12.3069C27.1897 10.5511 25.9457 8.9358 23.6669 7.70503ZM23.3334 15.2138C23.0151 15.4081 22.6655 15.5945 22.2862 15.7711C22.2623 15.7823 22.2381 15.7935 22.2138 15.8044C21.7322 16.0251 21.2168 16.2252 20.6734 16.4034C20.5813 16.4337 20.4882 16.4634 20.3943 16.4923C20.155 16.9009 19.9078 17.3012 19.6532 17.6917C19.4708 17.9717 19.2848 18.2471 19.0953 18.517C19.3077 18.4717 19.5176 18.4236 19.7248 18.3729C20.1362 18.2722 20.5372 18.1611 20.9263 18.04C20.9287 18.0664 20.9312 18.0929 20.9336 18.1194C20.9707 18.5369 20.9846 18.9334 20.9758 19.307C20.9369 20.9802 20.4471 22.1855 19.5753 22.6901C18.5092 23.3069 16.8225 22.9038 14.9474 21.5838C14.9257 21.5685 14.9042 21.5532 14.8824 21.5377C14.4506 21.2299 14.0201 20.8825 13.5946 20.4999C13.5224 20.4349 13.4503 20.3689 13.3784 20.302C12.5665 20.2963 11.7644 20.2572 10.9792 20.1866C11.4132 20.6693 11.857 21.121 12.3071 21.5377C12.2855 21.5532 12.2638 21.5685 12.2423 21.5838C11.9 21.8248 11.5643 22.0349 11.2371 22.2142C10.3225 22.7152 9.47771 22.9729 8.75976 22.9729C8.32768 22.9729 7.94162 22.8795 7.61409 22.6901C6.54791 22.0731 6.05294 20.4071 6.25605 18.1194C6.2585 18.0929 6.26095 18.0664 6.2634 18.04C6.31349 17.5113 6.39844 16.9642 6.51633 16.4034C6.5362 16.3084 6.55717 16.2129 6.57922 16.1171C6.17818 15.4095 5.81063 14.6937 5.47874 13.9762C5.27917 14.5943 5.11064 15.2054 4.9756 15.8044C4.95137 15.7935 4.92741 15.7823 4.90345 15.7711C4.52419 15.5945 4.17461 15.4081 3.85634 15.2138C2.42996 14.3438 1.63332 13.3158 1.63332 12.3069C1.63332 11.298 2.42996 10.27 3.85634 9.4C4.17461 9.2057 4.52419 9.01931 4.90345 8.84275C4.92741 8.83156 4.95137 8.82064 4.9756 8.80972C5.4575 8.58895 5.97289 8.38892 6.51633 8.21071C6.60835 8.18042 6.70119 8.15095 6.79485 8.12202C7.03417 7.71322 7.28165 7.31315 7.53595 6.92236C7.71836 6.6421 7.90459 6.36674 8.09408 6.09685C7.88172 6.14215 7.6718 6.19018 7.46461 6.24121C7.05323 6.34164 6.65219 6.45271 6.2634 6.57387C6.26095 6.5474 6.2585 6.52093 6.25605 6.49446C6.21902 6.0772 6.20513 5.6804 6.21385 5.30708C6.25251 3.63394 6.74231 2.42855 7.61409 1.92397C7.94162 1.7343 8.32768 1.64124 8.75976 1.64124C9.73418 1.64124 10.943 2.11581 12.2423 3.03029C12.2638 3.04558 12.2855 3.06086 12.3071 3.07641C12.7389 3.38424 13.1693 3.73164 13.5948 4.11397C13.667 4.17892 13.7391 4.24496 13.811 4.31182C14.6229 4.31755 15.425 4.35658 16.2102 4.42726C15.7762 3.94477 15.3327 3.49313 14.8826 3.07641C14.9042 3.06086 14.9259 3.04558 14.9474 3.03029C15.2894 2.78932 15.6254 2.57892 15.9524 2.3999C16.8669 1.89859 17.712 1.64124 18.4297 1.64124C18.8617 1.64124 19.2481 1.7343 19.5753 1.92397C20.6418 2.54099 21.1368 4.20676 20.9336 6.49446C20.9312 6.52093 20.9287 6.5474 20.9263 6.57387C20.8762 7.10275 20.7913 7.64991 20.6734 8.21071C20.6535 8.30568 20.6325 8.4012 20.6105 8.49726C21.0115 9.20488 21.3791 9.92042 21.7107 10.6376C21.9105 10.0195 22.0788 9.40846 22.2138 8.80945C22.2381 8.82037 22.2623 8.83156 22.2862 8.84275C22.6652 9.01931 23.0148 9.20543 23.3331 9.39973C24.7595 10.27 25.5561 11.298 25.5561 12.3069C25.5561 13.3158 24.7595 14.3438 23.3334 15.2138Z"
          fill="currentColor"
        />
        <path
          d="M20.136 10.2012C19.9588 9.85325 19.7723 9.50612 19.5774 9.16063C19.533 9.08122 19.4878 9.00208 19.4423 8.92294C19.1984 8.4994 18.9457 8.08514 18.6852 7.6818C18.9593 7.73938 19.2291 7.80188 19.4935 7.86901C19.5588 7.54781 19.6122 7.23179 19.6533 6.92233C19.6775 6.74112 19.6974 6.5621 19.7132 6.38554C19.7176 6.33696 19.7214 6.28893 19.7249 6.2409C19.5177 6.19041 19.3078 6.14211 19.0955 6.09708C18.5294 5.97564 17.9457 5.87358 17.3481 5.79117C16.5999 5.68801 15.8302 5.61569 15.0458 5.57585C14.6565 5.55593 14.2634 5.54392 13.8678 5.54037C13.7771 5.53955 13.6862 5.53901 13.595 5.53901C13.5038 5.53901 13.4128 5.53955 13.3219 5.54037C12.9263 5.54392 12.5334 5.55593 12.1438 5.57585C12.3309 5.36654 12.5195 5.16377 12.7098 4.96756C12.3216 4.62316 11.9301 4.31097 11.538 4.03507C11.498 4.00696 11.4583 3.9794 11.4191 3.95265C10.8781 4.51946 10.3502 5.13457 9.84157 5.79117C9.37845 6.38908 8.93113 7.02112 8.50422 7.68207C8.29268 8.0101 8.08603 8.34522 7.8851 8.68661C7.83882 8.76493 7.7928 8.8438 7.74734 8.92294C7.50339 9.34648 7.27197 9.77302 7.05362 10.2006C6.96622 9.93375 6.88536 9.66877 6.8113 9.4057C6.31933 9.57025 5.85403 9.75419 5.4195 9.9564C5.3754 9.97687 5.33184 9.99761 5.28882 10.0184C5.50772 10.771 5.77535 11.5368 6.08845 12.3066C6.37351 13.0077 6.69586 13.712 7.05362 14.4128C7.23113 14.7608 7.41736 15.1076 7.61202 15.4531C7.65667 15.5325 7.70187 15.6117 7.74734 15.6908C7.99128 16.1146 8.24421 16.5286 8.50477 16.9322C8.23033 16.8746 7.96079 16.8121 7.69615 16.745C7.68308 16.8086 7.67083 16.8722 7.65885 16.9352C7.65313 16.9644 7.64769 16.9936 7.64252 17.0228C7.63734 17.0498 7.63244 17.0771 7.62781 17.1041C7.62183 17.1372 7.61611 17.1702 7.61039 17.2032C7.58235 17.3675 7.55784 17.5304 7.53633 17.6914C7.53171 17.7264 7.52708 17.7613 7.52272 17.7962C7.51973 17.8197 7.517 17.8429 7.51428 17.8663C7.50639 17.9324 7.49904 17.9982 7.49223 18.0634C7.48978 18.0871 7.48733 18.1109 7.48515 18.1346C7.48215 18.166 7.47916 18.1971 7.47644 18.2282C7.47208 18.2768 7.46827 18.3248 7.46473 18.3728C7.67192 18.4233 7.88183 18.4716 8.0942 18.5167C8.6605 18.6381 9.24396 18.7402 9.84157 18.8226C10.5895 18.9257 11.3592 18.9981 12.1435 19.0379C12.5329 19.0578 12.926 19.0698 13.3219 19.0734C13.4128 19.0742 13.5038 19.0747 13.595 19.0747C13.6862 19.0747 13.7771 19.0742 13.8678 19.0734C14.2636 19.0698 14.6565 19.0578 15.0461 19.0379C14.8591 19.2472 14.6704 19.45 14.4798 19.6462C14.8681 19.9906 15.2596 20.3025 15.6516 20.5787C15.6916 20.6068 15.7314 20.6344 15.7706 20.6611C16.3116 20.0943 16.8395 19.4792 17.3481 18.8226C17.8112 18.2249 18.2585 17.5929 18.6852 16.9319C18.897 16.6039 19.1036 16.2685 19.3046 15.9269C19.3508 15.8485 19.3968 15.7699 19.4423 15.6908C19.6863 15.2673 19.9177 14.8407 20.136 14.4131C20.2234 14.68 20.3043 14.9452 20.3786 15.2083C20.8703 15.0438 21.3356 14.8596 21.7701 14.6573C21.8143 14.6369 21.8578 14.6161 21.9008 14.5954C21.6819 13.8427 21.4143 13.077 21.1012 12.3071C20.8164 11.6063 20.4938 10.902 20.136 10.2012ZM18.6168 13.7942C18.4303 14.1547 18.2337 14.5143 18.0276 14.8721C17.5381 15.7219 17.0127 16.5297 16.4616 17.2837C15.925 17.3424 15.3772 17.3847 14.821 17.4098C14.4164 17.4281 14.0072 17.4374 13.595 17.4374C13.1828 17.4374 12.7736 17.4281 12.369 17.4098C11.8127 17.3847 11.265 17.3424 10.7283 17.2837C10.409 16.8473 10.0986 16.3927 9.79855 15.9225C9.58074 15.5806 9.36811 15.2302 9.16201 14.8721C8.67248 14.0223 8.23741 13.1624 7.86169 12.3069C8.07895 11.8116 8.31664 11.3149 8.57311 10.8193C8.75933 10.4591 8.9559 10.0994 9.16201 9.74163C9.65153 8.89183 10.177 8.08405 10.7283 7.33004C11.265 7.27136 11.8127 7.22906 12.369 7.20396C12.7736 7.18567 13.1828 7.17639 13.595 7.17639C14.0072 7.17639 14.4161 7.18567 14.8207 7.20396C15.3769 7.22906 15.9247 7.27136 16.4611 7.33004C16.7804 7.7664 17.0908 8.22105 17.3908 8.69125C17.6089 9.03319 17.8215 9.38359 18.0276 9.74163C18.5172 10.5917 18.9522 11.4516 19.3282 12.3071C19.1104 12.8022 18.873 13.2989 18.6168 13.7942Z"
          fill="currentColor"
        />
      </g>
      <path
        d="M35.635 20.307V6.22745H41.6288C42.4334 6.22745 43.1709 6.42859 43.8413 6.83086C44.5252 7.21973 45.0683 7.75609 45.4705 8.43995C45.8728 9.11041 46.0739 9.86802 46.0739 10.7128C46.0739 11.4771 45.8728 12.1878 45.4705 12.8448C45.0683 13.5019 44.5319 14.0316 43.8614 14.4338C43.191 14.8227 42.4468 15.0171 41.6288 15.0171H37.8072V20.307H35.635ZM44.0022 20.307L40.422 13.9511L42.6546 13.4483L46.6371 20.3271L44.0022 20.307ZM37.8072 12.9253H41.83C42.2188 12.9253 42.5675 12.8314 42.8759 12.6437C43.1843 12.4426 43.4256 12.1744 43.6 11.8392C43.7743 11.4905 43.8614 11.1084 43.8614 10.6927C43.8614 10.2234 43.7475 9.81439 43.5195 9.46575C43.305 9.1037 42.9966 8.82211 42.5943 8.62098C42.2054 8.41984 41.7629 8.31927 41.2668 8.31927H37.8072V12.9253ZM53.5382 20.5082C52.452 20.5082 51.4866 20.2802 50.6418 19.8243C49.8104 19.355 49.1534 18.718 48.6707 17.9135C48.2013 17.1089 47.9667 16.1837 47.9667 15.1378C47.9667 14.3064 48.1008 13.5488 48.369 12.865C48.6371 12.1811 49.0059 11.5911 49.4752 11.095C49.9579 10.5854 50.5278 10.1965 51.1849 9.92836C51.8553 9.64677 52.5794 9.50598 53.3571 9.50598C54.041 9.50598 54.6779 9.64007 55.2679 9.90825C55.8579 10.163 56.3675 10.5184 56.7966 10.9743C57.2391 11.4302 57.5743 11.9733 57.8023 12.6035C58.0436 13.2203 58.1576 13.8975 58.1442 14.635L58.1241 15.52H49.4953L49.0327 13.8706H56.334L56.0323 14.2126V13.7298C55.992 13.2873 55.8445 12.8918 55.5898 12.5431C55.335 12.1945 55.0132 11.9196 54.6243 11.7185C54.2354 11.5173 53.813 11.4168 53.3571 11.4168C52.633 11.4168 52.0229 11.5576 51.5268 11.8392C51.0307 12.1073 50.6552 12.5096 50.4004 13.046C50.1457 13.5689 50.0183 14.2193 50.0183 14.997C50.0183 15.7345 50.1725 16.3781 50.4809 16.9279C50.7893 17.4643 51.2251 17.88 51.7883 18.175C52.3515 18.47 53.0018 18.6175 53.7393 18.6175C54.2623 18.6175 54.745 18.5303 55.1875 18.356C55.6434 18.1817 56.1328 17.8666 56.6558 17.4106L57.7017 18.8789C57.3799 19.2008 56.9843 19.4824 56.515 19.7237C56.0591 19.9651 55.5696 20.1595 55.0467 20.307C54.5371 20.4411 54.0343 20.5082 53.5382 20.5082ZM64.3645 20.5082C63.4929 20.5082 62.6951 20.2668 61.971 19.7841C61.2603 19.3013 60.6904 18.6443 60.2613 17.8129C59.8322 16.9816 59.6177 16.0429 59.6177 14.997C59.6177 13.9377 59.8322 12.9991 60.2613 12.1811C60.7038 11.3497 61.2938 10.6994 62.0313 10.2301C62.7822 9.76075 63.6203 9.52609 64.5455 9.52609C65.0953 9.52609 65.5981 9.60655 66.054 9.76746C66.51 9.92836 66.9055 10.1563 67.2408 10.4513C67.5894 10.7329 67.871 11.0614 68.0855 11.4369C68.3135 11.8123 68.4543 12.2146 68.5079 12.6437L68.0453 12.4828V9.74734H70.1371V20.307H68.0453V17.7928L68.528 17.652C68.4476 18.0141 68.28 18.3694 68.0252 18.718C67.7838 19.0533 67.4687 19.355 67.0798 19.6231C66.7044 19.8913 66.282 20.1059 65.8127 20.2668C65.3568 20.4277 64.874 20.5082 64.3645 20.5082ZM64.9076 18.5974C65.5378 18.5974 66.0943 18.4431 66.577 18.1347C67.0597 17.8263 67.4352 17.4039 67.7034 16.8676C67.985 16.3178 68.1258 15.6943 68.1258 14.997C68.1258 14.3131 67.985 13.703 67.7034 13.1667C67.4352 12.6303 67.0597 12.2079 66.577 11.8995C66.0943 11.5911 65.5378 11.4369 64.9076 11.4369C64.2908 11.4369 63.741 11.5911 63.2582 11.8995C62.7889 12.2079 62.4135 12.6303 62.1319 13.1667C61.8637 13.703 61.7296 14.3131 61.7296 14.997C61.7296 15.6943 61.8637 16.3178 62.1319 16.8676C62.4135 17.4039 62.7889 17.8263 63.2582 18.1347C63.741 18.4431 64.2908 18.5974 64.9076 18.5974ZM77.4209 20.5082C76.4421 20.5082 75.5638 20.2668 74.7861 19.7841C74.0217 19.3013 73.4116 18.6443 72.9557 17.8129C72.5132 16.9816 72.292 16.0496 72.292 15.0171C72.292 13.9846 72.5132 13.0527 72.9557 12.2213C73.4116 11.39 74.0217 10.7329 74.7861 10.2502C75.5638 9.76746 76.4421 9.52609 77.4209 9.52609C78.3596 9.52609 79.2111 9.72052 79.9754 10.1094C80.7531 10.4848 81.3431 11.0011 81.7454 11.6581L80.5989 13.0661C80.3844 12.7577 80.1095 12.4761 79.7742 12.2213C79.439 11.9665 79.0837 11.7654 78.7082 11.6179C78.3328 11.4704 77.9707 11.3967 77.6221 11.3967C76.9784 11.3967 76.4018 11.5576 75.8923 11.8794C75.3962 12.1878 75.0006 12.6169 74.7056 13.1667C74.4106 13.7164 74.2631 14.3333 74.2631 15.0171C74.2631 15.701 74.4173 16.3178 74.7257 16.8676C75.0341 17.4039 75.4431 17.833 75.9526 18.1549C76.4622 18.4767 77.0254 18.6376 77.6422 18.6376C78.0042 18.6376 78.3529 18.5772 78.6881 18.4566C79.0367 18.3359 79.372 18.1549 79.6938 17.9135C80.0156 17.6721 80.3173 17.3771 80.5989 17.0285L81.7454 18.4364C81.3163 19.0399 80.6995 19.536 79.8949 19.9249C79.1038 20.3137 78.2791 20.5082 77.4209 20.5082ZM84.9128 20.307V7.05211H86.9845V20.307H84.9128ZM82.7204 11.7587V9.74734H89.4384V11.7587H82.7204ZM96.0982 20.5082C95.3339 20.5082 94.6232 20.4076 93.9662 20.2064C93.3225 20.0053 92.7325 19.7036 92.1962 19.3013C91.6732 18.8856 91.2039 18.3761 90.7882 17.7727L92.2766 16.063C92.9337 17.0017 93.5639 17.652 94.1673 18.0141C94.7707 18.3761 95.4881 18.5571 96.3195 18.5571C96.829 18.5571 97.2916 18.4767 97.7073 18.3158C98.123 18.1549 98.4515 17.9336 98.6929 17.652C98.9342 17.3704 99.0549 17.0486 99.0549 16.6866C99.0549 16.4452 99.0147 16.2172 98.9342 16.0027C98.8538 15.7881 98.7264 15.5937 98.5521 15.4194C98.3912 15.2451 98.1766 15.0842 97.9084 14.9367C97.6537 14.7892 97.352 14.6618 97.0033 14.5545C96.6547 14.4338 96.2524 14.3333 95.7965 14.2528C95.0724 14.1053 94.4422 13.9109 93.9058 13.6695C93.3695 13.4281 92.9203 13.1264 92.5582 12.7644C92.1962 12.4023 91.928 11.9934 91.7537 11.5375C91.5793 11.0681 91.4922 10.5452 91.4922 9.96859C91.4922 9.40541 91.6129 8.88245 91.8542 8.39973C92.109 7.917 92.4509 7.50132 92.88 7.15268C93.3225 6.79063 93.8388 6.51575 94.4288 6.32802C95.0188 6.12688 95.6557 6.02631 96.3396 6.02631C97.0637 6.02631 97.7274 6.12018 98.3308 6.30791C98.9342 6.49563 99.4706 6.77722 99.9399 7.15268C100.409 7.51473 100.798 7.96393 101.107 8.5003L99.5779 10.0088C99.3097 9.56632 99.008 9.19757 98.6728 8.90257C98.3375 8.59416 97.9688 8.3662 97.5665 8.2187C97.1642 8.05779 96.7351 7.97734 96.2792 7.97734C95.7563 7.97734 95.3004 8.05779 94.9115 8.2187C94.5226 8.37961 94.2142 8.60757 93.9863 8.90257C93.7717 9.18416 93.6645 9.51939 93.6645 9.90825C93.6645 10.1898 93.7181 10.4513 93.8254 10.6927C93.9326 10.9206 94.0936 11.1285 94.3081 11.3162C94.5361 11.4905 94.8378 11.6514 95.2132 11.7989C95.5887 11.933 96.0379 12.0537 96.5608 12.161C97.2983 12.3219 97.9554 12.5297 98.532 12.7845C99.1086 13.0259 99.598 13.3142 100 13.6494C100.403 13.9846 100.704 14.3601 100.905 14.7758C101.12 15.1914 101.227 15.6406 101.227 16.1234C101.227 17.0218 101.019 17.7995 100.604 18.4566C100.188 19.1136 99.598 19.6231 98.8337 19.9852C98.0694 20.3338 97.1575 20.5082 96.0982 20.5082ZM111.392 24.732V17.7928H111.794C111.794 18.1146 111.687 18.4364 111.472 18.7583C111.257 19.0667 110.969 19.355 110.607 19.6231C110.245 19.8913 109.843 20.1059 109.4 20.2668C108.958 20.4277 108.502 20.5082 108.033 20.5082C107.08 20.5082 106.229 20.2735 105.478 19.8042C104.727 19.3214 104.13 18.6711 103.688 17.8531C103.259 17.0218 103.044 16.0764 103.044 15.0171C103.044 13.9578 103.259 13.0192 103.688 12.2012C104.117 11.3698 104.7 10.7195 105.438 10.2502C106.189 9.76746 107.034 9.52609 107.972 9.52609C108.495 9.52609 108.991 9.61325 109.461 9.78757C109.943 9.96189 110.372 10.1898 110.748 10.4714C111.137 10.753 111.438 11.0681 111.653 11.4168C111.881 11.752 111.995 12.0939 111.995 12.4426L111.392 12.4828V9.72723H113.463V24.732H111.392ZM108.254 18.5974C108.884 18.5974 109.44 18.4431 109.923 18.1347C110.406 17.8263 110.781 17.4039 111.05 16.8676C111.331 16.3312 111.472 15.7144 111.472 15.0171C111.472 14.3198 111.331 13.703 111.05 13.1667C110.781 12.6169 110.406 12.1878 109.923 11.8794C109.44 11.571 108.884 11.4168 108.254 11.4168C107.624 11.4168 107.067 11.5777 106.584 11.8995C106.102 12.2079 105.719 12.637 105.438 13.1868C105.17 13.7231 105.036 14.3333 105.036 15.0171C105.036 15.701 105.17 16.3178 105.438 16.8676C105.719 17.4039 106.102 17.8263 106.584 18.1347C107.067 18.4431 107.624 18.5974 108.254 18.5974ZM119.964 20.5082C119.213 20.5082 118.556 20.3338 117.993 19.9852C117.443 19.6366 117.014 19.1471 116.706 18.5169C116.411 17.8867 116.263 17.1358 116.263 16.2642V9.74734H118.335V15.701C118.335 16.3178 118.429 16.8542 118.616 17.3101C118.818 17.7526 119.099 18.0945 119.461 18.3359C119.837 18.5772 120.286 18.6979 120.809 18.6979C121.198 18.6979 121.553 18.6376 121.875 18.5169C122.197 18.3828 122.472 18.2018 122.699 17.9738C122.941 17.7459 123.129 17.471 123.263 17.1492C123.397 16.8274 123.464 16.4787 123.464 16.1033V9.74734H125.536V20.307H123.464V18.0945L123.826 17.8531C123.665 18.3493 123.39 18.7985 123.001 19.2008C122.626 19.603 122.177 19.9249 121.654 20.1662C121.131 20.3942 120.567 20.5082 119.964 20.5082ZM132.41 20.5082C131.539 20.5082 130.741 20.2668 130.017 19.7841C129.306 19.3013 128.736 18.6443 128.307 17.8129C127.878 16.9816 127.663 16.0429 127.663 14.997C127.663 13.9377 127.878 12.9991 128.307 12.1811C128.749 11.3497 129.339 10.6994 130.077 10.2301C130.828 9.76075 131.666 9.52609 132.591 9.52609C133.141 9.52609 133.644 9.60655 134.1 9.76746C134.556 9.92836 134.951 10.1563 135.286 10.4513C135.635 10.7329 135.917 11.0614 136.131 11.4369C136.359 11.8123 136.5 12.2146 136.554 12.6437L136.091 12.4828V9.74734H138.183V20.307H136.091V17.7928L136.574 17.652C136.493 18.0141 136.326 18.3694 136.071 18.718C135.829 19.0533 135.514 19.355 135.125 19.6231C134.75 19.8913 134.328 20.1059 133.858 20.2668C133.402 20.4277 132.92 20.5082 132.41 20.5082ZM132.953 18.5974C133.583 18.5974 134.14 18.4431 134.623 18.1347C135.105 17.8263 135.481 17.4039 135.749 16.8676C136.031 16.3178 136.171 15.6943 136.171 14.997C136.171 14.3131 136.031 13.703 135.749 13.1667C135.481 12.6303 135.105 12.2079 134.623 11.8995C134.14 11.5911 133.583 11.4369 132.953 11.4369C132.336 11.4369 131.787 11.5911 131.304 11.8995C130.835 12.2079 130.459 12.6303 130.178 13.1667C129.909 13.703 129.775 14.3131 129.775 14.997C129.775 15.6943 129.909 16.3178 130.178 16.8676C130.459 17.4039 130.835 17.8263 131.304 18.1347C131.787 18.4431 132.336 18.5974 132.953 18.5974ZM145.386 20.5082C144.421 20.5082 143.556 20.2735 142.791 19.8042C142.041 19.3214 141.444 18.6711 141.001 17.8531C140.559 17.0218 140.338 16.0764 140.338 15.0171C140.338 13.9578 140.552 13.0192 140.981 12.2012C141.424 11.3698 142.02 10.7195 142.771 10.2502C143.522 9.76746 144.374 9.52609 145.326 9.52609C145.849 9.52609 146.352 9.61325 146.834 9.78757C147.33 9.94848 147.773 10.1764 148.162 10.4714C148.551 10.753 148.852 11.0681 149.067 11.4168C149.295 11.752 149.409 12.0939 149.409 12.4426L148.805 12.4828V5.42291H150.877V20.307H148.805V17.7928H149.208C149.208 18.1146 149.1 18.4364 148.886 18.7583C148.671 19.0667 148.383 19.355 148.021 19.6231C147.672 19.8913 147.263 20.1059 146.794 20.2668C146.338 20.4277 145.869 20.5082 145.386 20.5082ZM145.668 18.718C146.298 18.718 146.854 18.5571 147.337 18.2353C147.82 17.9135 148.195 17.4777 148.464 16.9279C148.745 16.3647 148.886 15.7278 148.886 15.0171C148.886 14.3064 148.745 13.6762 148.464 13.1264C148.195 12.5633 147.82 12.1208 147.337 11.7989C146.854 11.4771 146.298 11.3162 145.668 11.3162C145.037 11.3162 144.481 11.4771 143.998 11.7989C143.516 12.1208 143.133 12.5633 142.852 13.1264C142.584 13.6762 142.45 14.3064 142.45 15.0171C142.45 15.7278 142.584 16.3647 142.852 16.9279C143.133 17.4777 143.516 17.9135 143.998 18.2353C144.481 18.5571 145.037 18.718 145.668 18.718Z"
        fill="currentColor"
      />
      <defs>
        <clipPath id="clip0_12_23_your_icon">
          {' '}
          {/* Ensure this ID is unique if you use multiple SVGs with clipPaths on one page */}
          <rect width="27.1899" height="24.614" fill="white" />
        </clipPath>
      </defs>
    </svg>
  );
}
</file>

<file path="app/lib/auth-client.ts">
import { createAuthClient } from "better-auth/react";

export const authClient = createAuthClient();
</file>

<file path="app/lib/prisma.ts">
import { PrismaClient } from '@prisma/client';

const globalForPrisma = globalThis as unknown as {
  prisma?: PrismaClient;
};

export const db =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: ['error', 'warn'],
  });

if (process.env.NODE_ENV !== 'production') {
  globalForPrisma.prisma = db;
}

export default db;
</file>

<file path="app/lib/utils.ts">
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
</file>

<file path="app/projects/[projectId]/boards/new/page.tsx">
import { notFound } from "next/navigation"
import prisma from "~/lib/prisma"
import { createBoard } from "~/features/boards/actions"

interface NewBoardPageProps {
  params: Promise<{
    projectId: string
  }>
}

export default async function NewBoardPage({ params }: NewBoardPageProps) {
  const { projectId } = await params

  const project = await prisma.project.findUnique({
    where: { id: projectId },
    select: { id: true, title: true },
  })

  if (!project) {
    notFound()
  }

  return (
    <div className="h-full flex flex-col">
      <div className="p-4 border-b">
        <h1 className="text-2xl font-bold leading-tight">
          Create board
        </h1>
        <p className="text-sm text-muted-foreground">
          Project: {project.title}
        </p>
      </div>

      <div className="flex-1 overflow-auto p-4">
        <form action={createBoard} className="space-y-4 max-w-md">
          <input type="hidden" name="projectId" value={project.id} />
          <div className="space-y-2">
            <label
              htmlFor="title"
              className="text-sm font-medium text-foreground"
            >
              Board name
            </label>
            <input
              id="title"
              name="title"
              type="text"
              placeholder="Main board"
              className="w-full rounded-md border px-3 py-2 text-sm bg-background"
            />
          </div>
          <button
            type="submit"
            className="inline-flex items-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90"
          >
            Create board
          </button>
        </form>
      </div>
    </div>
  )
}
</file>

<file path="app/settings/page.tsx">
"use client"

import * as React from "react"
import { useTheme } from "next-themes"
import {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
} from "@/components/ui/breadcrumb"

export default function SettingsPage() {
  const { theme, setTheme } = useTheme()

  return (
    <div className="mx-auto flex max-w-xl flex-col gap-6 p-6">
      <Breadcrumb className="mb-1">
        <BreadcrumbList>
          <BreadcrumbItem>
            <BreadcrumbLink href="/">Home</BreadcrumbLink>
          </BreadcrumbItem>
          <BreadcrumbSeparator />
          <BreadcrumbItem>
            <BreadcrumbPage>Settings</BreadcrumbPage>
          </BreadcrumbItem>
        </BreadcrumbList>
      </Breadcrumb>

      <div>
        <h1 className="text-2xl font-semibold tracking-tight">
          Settings
        </h1>
        <p className="mt-1 text-sm text-muted-foreground">
          Manage your appearance and preferences.
        </p>
      </div>

      <section className="space-y-3 rounded-lg border bg-card p-4">
        <div>
          <h2 className="text-sm font-medium">Theme</h2>
          <p className="text-xs text-muted-foreground">
            Choose how Easyble looks on this device.
          </p>
        </div>
        <div className="flex flex-wrap gap-2">
          <button
            type="button"
            onClick={() => setTheme("light")}
            className={`inline-flex items-center rounded-md border px-3 py-1.5 text-xs font-medium transition ${
              theme === "light"
                ? "border-primary bg-primary text-primary-foreground"
                : "border-input bg-background hover:bg-accent hover:text-accent-foreground"
            }`}
          >
            Light
          </button>
          <button
            type="button"
            onClick={() => setTheme("dark")}
            className={`inline-flex items-center rounded-md border px-3 py-1.5 text-xs font-medium transition ${
              theme === "dark"
                ? "border-primary bg-primary text-primary-foreground"
                : "border-input bg-background hover:bg-accent hover:text-accent-foreground"
            }`}
          >
            Dark
          </button>
          <button
            type="button"
            onClick={() => setTheme("system")}
            className={`inline-flex items-center rounded-md border px-3 py-1.5 text-xs font-medium transition ${
              theme === "system"
                ? "border-primary bg-primary text-primary-foreground"
                : "border-input bg-background hover:bg-accent hover:text-accent-foreground"
            }`}
          >
            System
          </button>
        </div>
      </section>
    </div>
  )
}
</file>

<file path="app/teams/new/page.tsx">
import { createTeam } from "~/features/teams/actions"

export default function NewTeamPage() {
  return (
    <div className="h-full flex flex-col">
      <div className="p-4 border-b">
        <h1 className="text-2xl font-bold leading-tight">
          New team
        </h1>
        <p className="text-sm text-muted-foreground">
          Create a workspace to group your projects.
        </p>
      </div>

      <div className="flex-1 overflow-auto p-4">
        <form action={createTeam} className="space-y-4 max-w-md">
          <div className="space-y-2">
            <label
              htmlFor="name"
              className="text-sm font-medium text-foreground"
            >
              Team name
            </label>
            <input
              id="name"
              name="name"
              type="text"
              required
              placeholder="Client work"
              className="w-full rounded-md border px-3 py-2 text-sm bg-background"
            />
          </div>

          <button
            type="submit"
            className="inline-flex items-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90"
          >
            Create team
          </button>
        </form>
      </div>
    </div>
  )
}
</file>

<file path="app/types/sudo.d.ts">
// types/sudo.d.ts
declare module '*.sudo' {
  const content: string;
  export default content;
}
</file>

<file path="app/utils/get-error-message.test.ts">
/* eslint-disable @typescript-eslint/only-throw-error */
import { faker } from '@faker-js/faker';
import { describe, expect, test } from 'vitest';

import { getErrorMessage } from './get-error-message';

describe('getErrorMessage()', () => {
  test("given: an error, should: return the error's message", () => {
    const message = faker.word.words();

    const actual = getErrorMessage(new Error(message));
    const expected = message;

    expect(actual).toEqual(expected);
  });

  test('given: a string is thrown, should: return the string', () => {
    expect.assertions(1);

    const someString = faker.lorem.words();

    try {
      throw someString;
    } catch (error) {
      const actual = getErrorMessage(error);
      const expected = someString;

      expect(actual).toEqual(expected);
    }
  });

  test('given: a number is thrown, should: return the number as a string', () => {
    expect.assertions(1);

    const someNumber = 1;

    try {
      throw someNumber;
    } catch (error) {
      const actual = getErrorMessage(error);
      const expected = JSON.stringify(someNumber);

      expect(actual).toEqual(expected);
    }
  });

  test("given: an error that extends a custom error class, should: return the error's message", () => {
    class CustomError extends Error {
      public constructor(message: string) {
        super(message);
      }
    }

    const message = faker.word.words();

    const actual = getErrorMessage(new CustomError(message));
    const expected = message;

    expect(actual).toEqual(expected);
  });

  test("given: a custom error object with a message property, should: return the object's message property", () => {
    const message = faker.word.words();

    const actual = getErrorMessage({ message });
    const expected = message;

    expect(actual).toEqual(expected);
  });

  test('given: circular references, should: handle them gracefully', () => {
    expect.assertions(1);

    const object = { circular: this };

    try {
      throw object;
    } catch (error) {
      const actual = getErrorMessage(error);
      const expected = '[object Object]';

      expect(actual).toEqual(expected);
    }
  });
});
</file>

<file path="app/utils/get-error-message.ts">
type ErrorWithMessage = {
  message: string;
};

// This validates an existing message property in standard errors, custom errors
// and objects with a message property.
function isErrorWithMessage(error: unknown): error is ErrorWithMessage {
  return (
    typeof error === 'object' &&
    error !== null &&
    'message' in error &&
    typeof (error as Record<string, unknown>).message === 'string'
  );
}

function toErrorWithMessage(maybeError: unknown): ErrorWithMessage {
  if (isErrorWithMessage(maybeError)) return maybeError;

  try {
    if (typeof maybeError === 'string') return new Error(maybeError);

    return new Error(JSON.stringify(maybeError));
  } catch {
    // JSON.stringify() would throw in the case of a circular reference. We then
    // catch it here and coerce it into the [object Object] string.
    return new Error(String(maybeError));
  }
}

/**
 * Get the error message from an error or any other thing that has been thrown.
 *
 * @param error - Something that has been thrown and might be an error.
 * @returns A string containing the error message.
 *
 * @example
 *
 * Used on an Error instance:
 *
 * ```ts
 * getErrorMessage(new Error('Something went wrong'))
 * // ‚Üµ 'Something went wrong'
 * ```
 *
 * Used on a non-error object:
 *
 * ```ts
 * getErrorMessage({ message: 'Something went wrong' })
 * // ‚Üµ 'Something went wrong'
 * ```
 *
 * Used on a non-error object with no message property (e.g. a primitive):
 *
 * ```ts
 * getErrorMessage('Something went wrong')
 * // ‚Üµ '"some-string"'
 * ```
 */
export function getErrorMessage(error: unknown) {
  return toErrorWithMessage(error).message;
}
</file>

<file path="app/utils/get-socials-meta.server.tsx">
/**
 * Generates an array of metadata objects for social media sharing.
 *
 * @param options - An object containing the metadata options.
 * @param options.title - The title of the content.
 * @param options.description - A brief description of the content.
 * @param options.imageUrl - The URL of the image to be used in social media previews.
 * @param options.url - The URL of the content.
 * @param options.type - The type of content (default: 'website').
 * @param options.siteName - The name of the website (default: 'Jan Hesters').
 * @param options.locale - The locale of the content (default: 'en_US').
 * @param options.twitterHandle - The Twitter handle associated with the content (default: '@janhesters').
 * @param options.publishedTime - The publication time of the content (optional).
 * @param options.keywords - An array of keywords related to the content (optional).
 * @returns An array of metadata objects for various social media platforms and SEO purposes.
 */
export const getSocialsMeta = ({
  title,
  description,
  imageUrl = 'https://shadcn-kanban-board.com/public/og-image.png',
  url,
  type = 'website',
  siteName = 'Shadcn Kanban Board',
  locale = 'en_US',
  twitterHandle = '@janhesters',
  publishedTime,
  keywords,
  isUnlisted = false,
}: {
  title: string;
  description: string;
  imageUrl?: string;
  url: string;
  type?: string;
  siteName?: string;
  locale?: string;
  twitterHandle?: string;
  publishedTime?: string;
  keywords?: string;
  isUnlisted?: boolean;
}) => [
  ...(isUnlisted ? [{ name: 'robots', content: 'noindex' }] : []),
  { title },
  { name: 'title', content: title },
  { name: 'description', content: description },
  { name: 'image', content: imageUrl },
  ...(keywords ? [{ name: 'keywords', content: keywords }] : []),
  { property: 'og:title', content: title },
  { property: 'og:description', content: description },
  { property: 'og:image', content: imageUrl },
  { property: 'og:url', content: url },
  { property: 'og:type', content: type },
  { property: 'og:site_name', content: siteName },
  { property: 'og:locale', content: locale },
  ...(publishedTime
    ? [{ property: 'og:article:published_time', content: publishedTime }]
    : []),
  { name: 'twitter:title', content: title },
  { name: 'twitter:description', content: description },
  { name: 'twitter:image', content: imageUrl },
  { name: 'twitter:card', content: 'summary_large_image' },
  { name: 'twitter:image:alt', content: title },
  { name: 'twitter:site', content: twitterHandle },
  { name: 'twitter:creator', content: twitterHandle },
];
</file>

<file path="app/utils/types.ts">
import type { ComponentProps } from 'react';

/**
 * Props for an SVG icon component.
 */
export type IconProps = Omit<ComponentProps<'svg'>, 'fill'> & {
  className?: string;
};

/**
 * Arbitrary factory function for object of shape `Shape`.
 */
export type Factory<Shape> = (object?: Partial<Shape>) => Shape;
</file>

<file path="components/animate-ui/components/animate/avatar-group.tsx">
import * as React from 'react';
import * as motion from 'motion/react-client';

import {
  AvatarGroup as AvatarGroupPrimitive,
  AvatarGroupTooltip as AvatarGroupTooltipPrimitive,
  AvatarGroupTooltipArrow as AvatarGroupTooltipArrowPrimitive,
  type AvatarGroupProps as AvatarGroupPropsPrimitive,
  type AvatarGroupTooltipProps as AvatarGroupTooltipPropsPrimitive,
} from '@/components/animate-ui/primitives/animate/avatar-group';
import { cn } from '@/lib/utils';

type AvatarGroupProps = AvatarGroupPropsPrimitive;

function AvatarGroup({
  className,
  invertOverlap = true,
  ...props
}: AvatarGroupProps) {
  return (
    <AvatarGroupPrimitive
      className={cn('h-12 -space-x-3', className)}
      invertOverlap={invertOverlap}
      {...props}
    />
  );
}

type AvatarGroupTooltipProps = Omit<
  AvatarGroupTooltipPropsPrimitive,
  'asChild'
> & {
  children: React.ReactNode;
  layout?: boolean | 'position' | 'size' | 'preserve-aspect';
};

function AvatarGroupTooltip({
  className,
  children,
  layout = 'preserve-aspect',
  ...props
}: AvatarGroupTooltipProps) {
  return (
    <AvatarGroupTooltipPrimitive
      className={cn(
        'bg-primary text-primary-foreground z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance',
        className,
      )}
      {...props}
    >
      <motion.div layout={layout} className="overflow-hidden">
        {children}
      </motion.div>
      <AvatarGroupTooltipArrowPrimitive
        className="fill-primary size-3 data-[side='bottom']:translate-y-[1px] data-[side='right']:translate-x-[1px] data-[side='left']:translate-x-[-1px] data-[side='top']:translate-y-[-1px]"
        tipRadius={2}
      />
    </AvatarGroupTooltipPrimitive>
  );
}

export {
  AvatarGroup,
  AvatarGroupTooltip,
  type AvatarGroupProps,
  type AvatarGroupTooltipProps,
};
</file>

<file path="components/animate-ui/primitives/animate/avatar-group.tsx">
'use client';

import * as React from 'react';
import { HTMLMotionProps, motion, type Transition } from 'motion/react';

import {
  TooltipProvider,
  Tooltip,
  TooltipTrigger,
  TooltipContent,
  TooltipArrow,
  type TooltipProviderProps,
  type TooltipProps,
  type TooltipContentProps,
  type TooltipArrowProps,
} from '@/components/animate-ui/primitives/animate/tooltip';

type AvatarProps = Omit<HTMLMotionProps<'div'>, 'translate'> & {
  children: React.ReactNode;
  zIndex: number;
  translate?: string | number;
} & Omit<TooltipProps, 'children'>;

function AvatarContainer({
  zIndex,
  translate,
  side,
  sideOffset,
  align,
  alignOffset,
  ...props
}: AvatarProps) {
  return (
    <Tooltip
      side={side}
      sideOffset={sideOffset}
      align={align}
      alignOffset={alignOffset}
    >
      <TooltipTrigger asChild>
        <motion.div
          data-slot="avatar-container"
          initial="initial"
          whileHover="hover"
          whileTap="hover"
          style={{ position: 'relative', zIndex }}
        >
          <motion.div
            variants={{
              initial: { y: 0 },
              hover: { y: translate },
            }}
            {...props}
          />
        </motion.div>
      </TooltipTrigger>
    </Tooltip>
  );
}

type AvatarGroupProps = Omit<React.ComponentProps<'div'>, 'translate'> & {
  children: React.ReactElement[];
  invertOverlap?: boolean;
  translate?: string | number;
  transition?: Transition;
  tooltipTransition?: Transition;
} & Omit<TooltipProviderProps, 'children'> &
  Omit<TooltipProps, 'children'>;

function AvatarGroup({
  ref,
  children,
  id,
  transition = { type: 'spring', stiffness: 300, damping: 17 },
  invertOverlap = false,
  translate = '-30%',
  openDelay = 0,
  closeDelay = 0,
  side = 'top',
  sideOffset = 25,
  align = 'center',
  alignOffset = 0,
  tooltipTransition = { type: 'spring', stiffness: 300, damping: 35 },
  style,
  ...props
}: AvatarGroupProps) {
  return (
    <TooltipProvider
      id={id}
      openDelay={openDelay}
      closeDelay={closeDelay}
      transition={tooltipTransition}
    >
      <div
        ref={ref}
        data-slot="avatar-group"
        style={{
          display: 'flex',
          alignItems: 'center',
          ...style,
        }}
        {...props}
      >
        {children?.map((child, index) => (
          <AvatarContainer
            key={index}
            zIndex={
              invertOverlap ? React.Children.count(children) - index : index
            }
            transition={transition}
            translate={translate}
            side={side}
            sideOffset={sideOffset}
            align={align}
            alignOffset={alignOffset}
          >
            {child}
          </AvatarContainer>
        ))}
      </div>
    </TooltipProvider>
  );
}

type AvatarGroupTooltipProps = TooltipContentProps;

function AvatarGroupTooltip(props: AvatarGroupTooltipProps) {
  return <TooltipContent {...props} />;
}

type AvatarGroupTooltipArrowProps = TooltipArrowProps;

function AvatarGroupTooltipArrow(props: AvatarGroupTooltipArrowProps) {
  return <TooltipArrow {...props} />;
}

export {
  AvatarGroup,
  AvatarGroupTooltip,
  AvatarGroupTooltipArrow,
  type AvatarGroupProps,
  type AvatarGroupTooltipProps,
  type AvatarGroupTooltipArrowProps,
};
</file>

<file path="components/animate-ui/primitives/animate/slot.tsx">
'use client';

import * as React from 'react';
import { motion, isMotionComponent, type HTMLMotionProps } from 'motion/react';
import { cn } from '@/lib/utils';

type AnyProps = Record<string, unknown>;

type DOMMotionProps<T extends HTMLElement = HTMLElement> = Omit<
  HTMLMotionProps<keyof HTMLElementTagNameMap>,
  'ref'
> & { ref?: React.Ref<T> };

type WithAsChild<Base extends object> =
  | (Base & { asChild: true; children: React.ReactElement })
  | (Base & { asChild?: false | undefined });

type SlotProps<T extends HTMLElement = HTMLElement> = {
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  children?: any;
} & DOMMotionProps<T>;

function mergeRefs<T>(
  ...refs: (React.Ref<T> | undefined)[]
): React.RefCallback<T> {
  return (node) => {
    refs.forEach((ref) => {
      if (!ref) return;
      if (typeof ref === 'function') {
        ref(node);
      } else {
        (ref as React.RefObject<T | null>).current = node;
      }
    });
  };
}

function mergeProps<T extends HTMLElement>(
  childProps: AnyProps,
  slotProps: DOMMotionProps<T>,
): AnyProps {
  const merged: AnyProps = { ...childProps, ...slotProps };

  if (childProps.className || slotProps.className) {
    merged.className = cn(
      childProps.className as string,
      slotProps.className as string,
    );
  }

  if (childProps.style || slotProps.style) {
    merged.style = {
      ...(childProps.style as React.CSSProperties),
      ...(slotProps.style as React.CSSProperties),
    };
  }

  return merged;
}

function Slot<T extends HTMLElement = HTMLElement>({
  children,
  ref,
  ...props
}: SlotProps<T>) {
  const isAlreadyMotion =
    typeof children.type === 'object' &&
    children.type !== null &&
    isMotionComponent(children.type);

  const Base = React.useMemo(
    () =>
      isAlreadyMotion
        ? (children.type as React.ElementType)
        : motion.create(children.type as React.ElementType),
    [isAlreadyMotion, children.type],
  );

  if (!React.isValidElement(children)) return null;

  const { ref: childRef, ...childProps } = children.props as AnyProps;

  const mergedProps = mergeProps(childProps, props);

  return (
    <Base {...mergedProps} ref={mergeRefs(childRef as React.Ref<T>, ref)} />
  );
}

export {
  Slot,
  type SlotProps,
  type WithAsChild,
  type DOMMotionProps,
  type AnyProps,
};
</file>

<file path="components/animate-ui/primitives/animate/tooltip.tsx">
'use client';

import * as React from 'react';
import {
  motion,
  AnimatePresence,
  LayoutGroup,
  type Transition,
  type HTMLMotionProps,
} from 'motion/react';
import {
  useFloating,
  autoUpdate,
  offset as floatingOffset,
  flip,
  shift,
  arrow as floatingArrow,
  FloatingPortal,
  FloatingArrow,
  type UseFloatingReturn,
} from '@floating-ui/react';

import { getStrictContext } from '@/lib/get-strict-context';
import { Slot, type WithAsChild } from '@/components/animate-ui/primitives/animate/slot';

type Side = 'top' | 'bottom' | 'left' | 'right';
type Align = 'start' | 'center' | 'end';

type TooltipData = {
  contentProps: HTMLMotionProps<'div'>;
  contentAsChild: boolean;
  rect: DOMRect;
  side: Side;
  sideOffset: number;
  align: Align;
  alignOffset: number;
  id: string;
};

type GlobalTooltipContextType = {
  showTooltip: (data: TooltipData) => void;
  hideTooltip: () => void;
  hideImmediate: () => void;
  currentTooltip: TooltipData | null;
  transition: Transition;
  globalId: string;
  setReferenceEl: (el: HTMLElement | null) => void;
  referenceElRef: React.RefObject<HTMLElement | null>;
};

const [GlobalTooltipProvider, useGlobalTooltip] =
  getStrictContext<GlobalTooltipContextType>('GlobalTooltipProvider');

type TooltipContextType = {
  props: HTMLMotionProps<'div'>;
  setProps: React.Dispatch<React.SetStateAction<HTMLMotionProps<'div'>>>;
  asChild: boolean;
  setAsChild: React.Dispatch<React.SetStateAction<boolean>>;
  side: Side;
  sideOffset: number;
  align: Align;
  alignOffset: number;
  id: string;
};

const [LocalTooltipProvider, useTooltip] = getStrictContext<TooltipContextType>(
  'LocalTooltipProvider',
);

type TooltipPosition = { x: number; y: number };

function getResolvedSide(placement: Side | `${Side}-${Align}`) {
  if (placement.includes('-')) {
    return placement.split('-')[0] as Side;
  }
  return placement as Side;
}

function initialFromSide(side: Side): Partial<Record<'x' | 'y', number>> {
  if (side === 'top') return { y: 15 };
  if (side === 'bottom') return { y: -15 };
  if (side === 'left') return { x: 15 };
  return { x: -15 };
}

type TooltipProviderProps = {
  children: React.ReactNode;
  id?: string;
  openDelay?: number;
  closeDelay?: number;
  transition?: Transition;
};

function TooltipProvider({
  children,
  id,
  openDelay = 700,
  closeDelay = 300,
  transition = { type: 'spring', stiffness: 300, damping: 35 },
}: TooltipProviderProps) {
  const globalId = React.useId();
  const [currentTooltip, setCurrentTooltip] =
    React.useState<TooltipData | null>(null);
  const timeoutRef = React.useRef<number | null>(null);
  const lastCloseTimeRef = React.useRef<number>(0);
  const referenceElRef = React.useRef<HTMLElement | null>(null);

  const showTooltip = React.useCallback(
    (data: TooltipData) => {
      if (timeoutRef.current) clearTimeout(timeoutRef.current);
      if (currentTooltip !== null) {
        setCurrentTooltip(data);
        return;
      }
      const now = Date.now();
      const delay = now - lastCloseTimeRef.current < closeDelay ? 0 : openDelay;
      timeoutRef.current = window.setTimeout(
        () => setCurrentTooltip(data),
        delay,
      );
    },
    [openDelay, closeDelay, currentTooltip],
  );

  const hideTooltip = React.useCallback(() => {
    if (timeoutRef.current) clearTimeout(timeoutRef.current);
    timeoutRef.current = window.setTimeout(() => {
      setCurrentTooltip(null);
      lastCloseTimeRef.current = Date.now();
    }, closeDelay);
  }, [closeDelay]);

  const hideImmediate = React.useCallback(() => {
    if (timeoutRef.current) clearTimeout(timeoutRef.current);
    setCurrentTooltip(null);
    lastCloseTimeRef.current = Date.now();
  }, []);

  const setReferenceEl = React.useCallback((el: HTMLElement | null) => {
    referenceElRef.current = el;
  }, []);

  React.useEffect(() => {
    const onKeyDown = (e: KeyboardEvent) => {
      if (e.key === 'Escape') hideImmediate();
    };
    window.addEventListener('keydown', onKeyDown, true);
    window.addEventListener('scroll', hideImmediate, true);
    window.addEventListener('resize', hideImmediate, true);
    return () => {
      window.removeEventListener('keydown', onKeyDown, true);
      window.removeEventListener('scroll', hideImmediate, true);
      window.removeEventListener('resize', hideImmediate, true);
    };
  }, [hideImmediate]);

  return (
    <GlobalTooltipProvider
      value={{
        showTooltip,
        hideTooltip,
        hideImmediate,
        currentTooltip,
        transition,
        globalId: id ?? globalId,
        setReferenceEl,
        referenceElRef,
      }}
    >
      <LayoutGroup>{children}</LayoutGroup>
      <TooltipOverlay />
    </GlobalTooltipProvider>
  );
}

type RenderedTooltipContextType = {
  side: Side;
  align: Align;
  open: boolean;
};

const [RenderedTooltipProvider, useRenderedTooltip] =
  getStrictContext<RenderedTooltipContextType>('RenderedTooltipContext');

type FloatingContextType = {
  context: UseFloatingReturn['context'];
  arrowRef: React.RefObject<SVGSVGElement | null>;
};

const [FloatingProvider, useFloatingContext] =
  getStrictContext<FloatingContextType>('FloatingContext');

const MotionTooltipArrow = motion.create(FloatingArrow);

type TooltipArrowProps = Omit<
  React.ComponentProps<typeof MotionTooltipArrow>,
  'context'
> & {
  withTransition?: boolean;
};

function TooltipArrow({
  ref,
  withTransition = true,
  ...props
}: TooltipArrowProps) {
  const { side, align, open } = useRenderedTooltip();
  const { context, arrowRef } = useFloatingContext();
  const { transition, globalId } = useGlobalTooltip();
  React.useImperativeHandle(ref, () => arrowRef.current as SVGSVGElement);

  const deg = { top: 0, right: 90, bottom: 180, left: -90 }[side];

  return (
    <MotionTooltipArrow
      ref={arrowRef}
      context={context}
      data-state={open ? 'open' : 'closed'}
      data-side={side}
      data-align={align}
      data-slot="tooltip-arrow"
      style={{ rotate: deg }}
      layoutId={withTransition ? `tooltip-arrow-${globalId}` : undefined}
      transition={withTransition ? transition : undefined}
      {...props}
    />
  );
}

type TooltipPortalProps = React.ComponentProps<typeof FloatingPortal>;

function TooltipPortal(props: TooltipPortalProps) {
  return <FloatingPortal {...props} />;
}

function TooltipOverlay() {
  const { currentTooltip, transition, globalId, referenceElRef } =
    useGlobalTooltip();

  const [rendered, setRendered] = React.useState<{
    data: TooltipData | null;
    open: boolean;
  }>({ data: null, open: false });

  const arrowRef = React.useRef<SVGSVGElement | null>(null);

  const side = rendered.data?.side ?? 'top';
  const align = rendered.data?.align ?? 'center';

  const { refs, x, y, strategy, context, update } = useFloating({
    placement: align === 'center' ? side : `${side}-${align}`,
    whileElementsMounted: autoUpdate,
    middleware: [
      floatingOffset({
        mainAxis: rendered.data?.sideOffset ?? 0,
        crossAxis: rendered.data?.alignOffset ?? 0,
      }),
      flip(),
      shift({ padding: 8 }),
      floatingArrow({ element: arrowRef }),
    ],
  });

  React.useEffect(() => {
    if (currentTooltip) {
      setRendered({ data: currentTooltip, open: true });
    } else {
      setRendered((p) => (p.data ? { ...p, open: false } : p));
    }
  }, [currentTooltip]);

  React.useLayoutEffect(() => {
    if (referenceElRef.current) {
      refs.setReference(referenceElRef.current);
      update();
    }
  }, [referenceElRef, refs, update, rendered.data]);

  const ready = x != null && y != null;
  const Component = rendered.data?.contentAsChild ? Slot : motion.div;
  const resolvedSide = getResolvedSide(context.placement);

  return (
    <AnimatePresence mode="wait">
      {rendered.data && ready && (
        <TooltipPortal>
          <div
            ref={refs.setFloating}
            data-slot="tooltip-overlay"
            data-side={resolvedSide}
            data-align={rendered.data.align}
            data-state={rendered.open ? 'open' : 'closed'}
            style={{
              position: strategy,
              top: 0,
              left: 0,
              zIndex: 50,
              transform: `translate3d(${x!}px, ${y!}px, 0)`,
            }}
          >
            <FloatingProvider value={{ context, arrowRef }}>
              <RenderedTooltipProvider
                value={{
                  side: resolvedSide,
                  align: rendered.data.align,
                  open: rendered.open,
                }}
              >
                <Component
                  data-slot="tooltip-content"
                  data-side={resolvedSide}
                  data-align={rendered.data.align}
                  data-state={rendered.open ? 'open' : 'closed'}
                  layoutId={`tooltip-content-${globalId}`}
                  initial={{
                    opacity: 0,
                    scale: 0,
                    ...initialFromSide(rendered.data.side),
                  }}
                  animate={
                    rendered.open
                      ? { opacity: 1, scale: 1, x: 0, y: 0 }
                      : {
                          opacity: 0,
                          scale: 0,
                          ...initialFromSide(rendered.data.side),
                        }
                  }
                  exit={{
                    opacity: 0,
                    scale: 0,
                    ...initialFromSide(rendered.data.side),
                  }}
                  onAnimationComplete={() => {
                    if (!rendered.open)
                      setRendered({ data: null, open: false });
                  }}
                  transition={transition}
                  {...rendered.data.contentProps}
                  style={{
                    position: 'relative',
                    ...(rendered.data.contentProps?.style || {}),
                  }}
                />
              </RenderedTooltipProvider>
            </FloatingProvider>
          </div>
        </TooltipPortal>
      )}
    </AnimatePresence>
  );
}

type TooltipProps = {
  children: React.ReactNode;
  side?: Side;
  sideOffset?: number;
  align?: Align;
  alignOffset?: number;
};

function Tooltip({
  children,
  side = 'top',
  sideOffset = 0,
  align = 'center',
  alignOffset = 0,
}: TooltipProps) {
  const id = React.useId();
  const [props, setProps] = React.useState<HTMLMotionProps<'div'>>({});
  const [asChild, setAsChild] = React.useState(false);

  return (
    <LocalTooltipProvider
      value={{
        props,
        setProps,
        asChild,
        setAsChild,
        side,
        sideOffset,
        align,
        alignOffset,
        id,
      }}
    >
      {children}
    </LocalTooltipProvider>
  );
}

type TooltipContentProps = WithAsChild<HTMLMotionProps<'div'>>;

function shallowEqualWithoutChildren(
  a?: HTMLMotionProps<'div'>,
  b?: HTMLMotionProps<'div'>,
) {
  if (a === b) return true;
  if (!a || !b) return false;
  const keysA = Object.keys(a).filter((k) => k !== 'children');
  const keysB = Object.keys(b).filter((k) => k !== 'children');
  if (keysA.length !== keysB.length) return false;
  for (const k of keysA) {
    // @ts-expect-error index
    if (a[k] !== b[k]) return false;
  }
  return true;
}

function TooltipContent({ asChild = false, ...props }: TooltipContentProps) {
  const { setProps, setAsChild } = useTooltip();
  const lastPropsRef = React.useRef<HTMLMotionProps<'div'> | undefined>(
    undefined,
  );

  React.useEffect(() => {
    if (!shallowEqualWithoutChildren(lastPropsRef.current, props)) {
      lastPropsRef.current = props;
      setProps(props);
    }
  }, [props, setProps]);

  React.useEffect(() => {
    setAsChild(asChild);
  }, [asChild, setAsChild]);

  return null;
}

type TooltipTriggerProps = WithAsChild<HTMLMotionProps<'div'>>;

function TooltipTrigger({
  ref,
  onMouseEnter,
  onMouseLeave,
  onFocus,
  onBlur,
  onPointerDown,
  asChild = false,
  ...props
}: TooltipTriggerProps) {
  const {
    props: contentProps,
    asChild: contentAsChild,
    side,
    sideOffset,
    align,
    alignOffset,
    id,
  } = useTooltip();
  const {
    showTooltip,
    hideTooltip,
    hideImmediate,
    currentTooltip,
    setReferenceEl,
  } = useGlobalTooltip();

  const triggerRef = React.useRef<HTMLDivElement>(null);
  React.useImperativeHandle(ref, () => triggerRef.current as HTMLDivElement);

  const suppressNextFocusRef = React.useRef(false);

  const handleOpen = React.useCallback(() => {
    if (!triggerRef.current) return;
    setReferenceEl(triggerRef.current);
    const rect = triggerRef.current.getBoundingClientRect();
    showTooltip({
      contentProps,
      contentAsChild,
      rect,
      side,
      sideOffset,
      align,
      alignOffset,
      id,
    });
  }, [
    showTooltip,
    setReferenceEl,
    contentProps,
    contentAsChild,
    side,
    sideOffset,
    align,
    alignOffset,
    id,
  ]);

  const handlePointerDown = React.useCallback(
    (e: React.PointerEvent<HTMLDivElement>) => {
      onPointerDown?.(e);
      if (currentTooltip?.id === id) {
        suppressNextFocusRef.current = true;
        hideImmediate();
        Promise.resolve().then(() => {
          suppressNextFocusRef.current = false;
        });
      }
    },
    [onPointerDown, currentTooltip?.id, id, hideImmediate],
  );

  const handleMouseEnter = React.useCallback(
    (e: React.MouseEvent<HTMLDivElement>) => {
      onMouseEnter?.(e);
      handleOpen();
    },
    [handleOpen, onMouseEnter],
  );

  const handleMouseLeave = React.useCallback(
    (e: React.MouseEvent<HTMLDivElement>) => {
      onMouseLeave?.(e);
      hideTooltip();
    },
    [hideTooltip, onMouseLeave],
  );

  const handleFocus = React.useCallback(
    (e: React.FocusEvent<HTMLDivElement>) => {
      onFocus?.(e);
      if (suppressNextFocusRef.current) return;
      handleOpen();
    },
    [handleOpen, onFocus],
  );

  const handleBlur = React.useCallback(
    (e: React.FocusEvent<HTMLDivElement>) => {
      onBlur?.(e);
      hideTooltip();
    },
    [hideTooltip, onBlur],
  );

  const Component = asChild ? Slot : motion.div;

  return (
    <Component
      ref={triggerRef}
      onPointerDown={handlePointerDown}
      onMouseEnter={handleMouseEnter}
      onMouseLeave={handleMouseLeave}
      onFocus={handleFocus}
      onBlur={handleBlur}
      data-slot="tooltip-trigger"
      data-side={side}
      data-align={align}
      data-state={currentTooltip?.id === id ? 'open' : 'closed'}
      {...props}
    />
  );
}

export {
  TooltipProvider,
  Tooltip,
  TooltipContent,
  TooltipTrigger,
  TooltipArrow,
  useGlobalTooltip,
  useTooltip,
  type TooltipProviderProps,
  type TooltipProps,
  type TooltipContentProps,
  type TooltipTriggerProps,
  type TooltipArrowProps,
  type TooltipPosition,
  type GlobalTooltipContextType,
  type TooltipContextType,
};
</file>

<file path="components/ui/avatar.tsx">
"use client"

import * as React from "react"
import * as AvatarPrimitive from "@radix-ui/react-avatar"

import { cn } from "@/lib/utils"

function Avatar({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Root>) {
  return (
    <AvatarPrimitive.Root
      data-slot="avatar"
      className={cn(
        "relative flex size-8 shrink-0 overflow-hidden rounded-full",
        className
      )}
      {...props}
    />
  )
}

function AvatarImage({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Image>) {
  return (
    <AvatarPrimitive.Image
      data-slot="avatar-image"
      className={cn("aspect-square size-full", className)}
      {...props}
    />
  )
}

function AvatarFallback({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {
  return (
    <AvatarPrimitive.Fallback
      data-slot="avatar-fallback"
      className={cn(
        "bg-muted flex size-full items-center justify-center rounded-full",
        className
      )}
      {...props}
    />
  )
}

export { Avatar, AvatarImage, AvatarFallback }
</file>

<file path="components/ui/breadcrumb.tsx">
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { ChevronRight, MoreHorizontal } from "lucide-react"

import { cn } from "@/lib/utils"

function Breadcrumb({ ...props }: React.ComponentProps<"nav">) {
  return <nav aria-label="breadcrumb" data-slot="breadcrumb" {...props} />
}

function BreadcrumbList({ className, ...props }: React.ComponentProps<"ol">) {
  return (
    <ol
      data-slot="breadcrumb-list"
      className={cn(
        "text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",
        className
      )}
      {...props}
    />
  )
}

function BreadcrumbItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-item"
      className={cn("inline-flex items-center gap-1.5", className)}
      {...props}
    />
  )
}

function BreadcrumbLink({
  asChild,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean
}) {
  const Comp = asChild ? Slot : "a"

  return (
    <Comp
      data-slot="breadcrumb-link"
      className={cn("hover:text-foreground transition-colors", className)}
      {...props}
    />
  )
}

function BreadcrumbPage({ className, ...props }: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-page"
      role="link"
      aria-disabled="true"
      aria-current="page"
      className={cn("text-foreground font-normal", className)}
      {...props}
    />
  )
}

function BreadcrumbSeparator({
  children,
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-separator"
      role="presentation"
      aria-hidden="true"
      className={cn("[&>svg]:size-3.5", className)}
      {...props}
    >
      {children ?? <ChevronRight />}
    </li>
  )
}

function BreadcrumbEllipsis({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-ellipsis"
      role="presentation"
      aria-hidden="true"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}
    >
      <MoreHorizontal className="size-4" />
      <span className="sr-only">More</span>
    </span>
  )
}

export {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
  BreadcrumbEllipsis,
}
</file>

<file path="components/ui/button.tsx">
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive:
          "bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9",
        "icon-sm": "size-8",
        "icon-lg": "size-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Button({
  className,
  variant,
  size,
  asChild = false,
  ...props
}: React.ComponentProps<"button"> &
  VariantProps<typeof buttonVariants> & {
    asChild?: boolean
  }) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      {...props}
    />
  )
}

export { Button, buttonVariants }
</file>

<file path="components/ui/calendar.tsx">
"use client"

import * as React from "react"
import {
  ChevronDownIcon,
  ChevronLeftIcon,
  ChevronRightIcon,
} from "lucide-react"
import { DayButton, DayPicker, getDefaultClassNames } from "react-day-picker"

import { cn } from "@/lib/utils"
import { Button, buttonVariants } from "@/components/ui/button"

function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  captionLayout = "label",
  buttonVariant = "ghost",
  formatters,
  components,
  ...props
}: React.ComponentProps<typeof DayPicker> & {
  buttonVariant?: React.ComponentProps<typeof Button>["variant"]
}) {
  const defaultClassNames = getDefaultClassNames()

  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn(
        "bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",
        String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,
        String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,
        className
      )}
      captionLayout={captionLayout}
      formatters={{
        formatMonthDropdown: (date) =>
          date.toLocaleString("default", { month: "short" }),
        ...formatters,
      }}
      classNames={{
        root: cn("w-fit", defaultClassNames.root),
        months: cn(
          "flex gap-4 flex-col md:flex-row relative",
          defaultClassNames.months
        ),
        month: cn("flex flex-col w-full gap-4", defaultClassNames.month),
        nav: cn(
          "flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",
          defaultClassNames.nav
        ),
        button_previous: cn(
          buttonVariants({ variant: buttonVariant }),
          "size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",
          defaultClassNames.button_previous
        ),
        button_next: cn(
          buttonVariants({ variant: buttonVariant }),
          "size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",
          defaultClassNames.button_next
        ),
        month_caption: cn(
          "flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",
          defaultClassNames.month_caption
        ),
        dropdowns: cn(
          "w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",
          defaultClassNames.dropdowns
        ),
        dropdown_root: cn(
          "relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",
          defaultClassNames.dropdown_root
        ),
        dropdown: cn(
          "absolute bg-popover inset-0 opacity-0",
          defaultClassNames.dropdown
        ),
        caption_label: cn(
          "select-none font-medium",
          captionLayout === "label"
            ? "text-sm"
            : "rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",
          defaultClassNames.caption_label
        ),
        table: "w-full border-collapse",
        weekdays: cn("flex", defaultClassNames.weekdays),
        weekday: cn(
          "text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",
          defaultClassNames.weekday
        ),
        week: cn("flex w-full mt-2", defaultClassNames.week),
        week_number_header: cn(
          "select-none w-(--cell-size)",
          defaultClassNames.week_number_header
        ),
        week_number: cn(
          "text-[0.8rem] select-none text-muted-foreground",
          defaultClassNames.week_number
        ),
        day: cn(
          "relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",
          props.showWeekNumber
            ? "[&:nth-child(2)[data-selected=true]_button]:rounded-l-md"
            : "[&:first-child[data-selected=true]_button]:rounded-l-md",
          defaultClassNames.day
        ),
        range_start: cn(
          "rounded-l-md bg-accent",
          defaultClassNames.range_start
        ),
        range_middle: cn("rounded-none", defaultClassNames.range_middle),
        range_end: cn("rounded-r-md bg-accent", defaultClassNames.range_end),
        today: cn(
          "bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",
          defaultClassNames.today
        ),
        outside: cn(
          "text-muted-foreground aria-selected:text-muted-foreground",
          defaultClassNames.outside
        ),
        disabled: cn(
          "text-muted-foreground opacity-50",
          defaultClassNames.disabled
        ),
        hidden: cn("invisible", defaultClassNames.hidden),
        ...classNames,
      }}
      components={{
        Root: ({ className, rootRef, ...props }) => {
          return (
            <div
              data-slot="calendar"
              ref={rootRef}
              className={cn(className)}
              {...props}
            />
          )
        },
        Chevron: ({ className, orientation, ...props }) => {
          if (orientation === "left") {
            return (
              <ChevronLeftIcon className={cn("size-4", className)} {...props} />
            )
          }

          if (orientation === "right") {
            return (
              <ChevronRightIcon
                className={cn("size-4", className)}
                {...props}
              />
            )
          }

          return (
            <ChevronDownIcon className={cn("size-4", className)} {...props} />
          )
        },
        DayButton: CalendarDayButton,
        WeekNumber: ({ children, ...props }) => {
          return (
            <td {...props}>
              <div className="flex size-(--cell-size) items-center justify-center text-center">
                {children}
              </div>
            </td>
          )
        },
        ...components,
      }}
      {...props}
    />
  )
}

function CalendarDayButton({
  className,
  day,
  modifiers,
  ...props
}: React.ComponentProps<typeof DayButton>) {
  const defaultClassNames = getDefaultClassNames()

  const ref = React.useRef<HTMLButtonElement>(null)
  React.useEffect(() => {
    if (modifiers.focused) ref.current?.focus()
  }, [modifiers.focused])

  return (
    <Button
      ref={ref}
      variant="ghost"
      size="icon"
      data-day={day.date.toLocaleDateString()}
      data-selected-single={
        modifiers.selected &&
        !modifiers.range_start &&
        !modifiers.range_end &&
        !modifiers.range_middle
      }
      data-range-start={modifiers.range_start}
      data-range-end={modifiers.range_end}
      data-range-middle={modifiers.range_middle}
      className={cn(
        "data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",
        defaultClassNames.day,
        className
      )}
      {...props}
    />
  )
}

export { Calendar, CalendarDayButton }
</file>

<file path="components/ui/collapsible.tsx">
"use client"

import * as CollapsiblePrimitive from "@radix-ui/react-collapsible"

function Collapsible({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {
  return <CollapsiblePrimitive.Root data-slot="collapsible" {...props} />
}

function CollapsibleTrigger({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {
  return (
    <CollapsiblePrimitive.CollapsibleTrigger
      data-slot="collapsible-trigger"
      {...props}
    />
  )
}

function CollapsibleContent({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {
  return (
    <CollapsiblePrimitive.CollapsibleContent
      data-slot="collapsible-content"
      {...props}
    />
  )
}

export { Collapsible, CollapsibleTrigger, CollapsibleContent }
</file>

<file path="components/ui/dialog.tsx">
"use client"

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { XIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Dialog({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Root>) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />
}

function DialogTrigger({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />
}

function DialogPortal({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Portal>) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />
}

function DialogClose({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Close>) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />
}

function DialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {
  return (
    <DialogPrimitive.Overlay
      data-slot="dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props}
    />
  )
}

function DialogContent({
  className,
  children,
  showCloseButton = true,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Content> & {
  showCloseButton?: boolean
}) {
  return (
    <DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className
        )}
        {...props}
      >
        {children}
        {showCloseButton && (
          <DialogPrimitive.Close
            data-slot="dialog-close"
            className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"
          >
            <XIcon />
            <span className="sr-only">Close</span>
          </DialogPrimitive.Close>
        )}
      </DialogPrimitive.Content>
    </DialogPortal>
  )
}

function DialogHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  )
}

function DialogFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className
      )}
      {...props}
    />
  )
}

function DialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Title>) {
  return (
    <DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn("text-lg leading-none font-semibold", className)}
      {...props}
    />
  )
}

function DialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Description>) {
  return (
    <DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
}
</file>

<file path="components/ui/dropdown-menu.tsx">
"use client"

import * as React from "react"
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function DropdownMenu({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />
}

function DropdownMenuPortal({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
  return (
    <DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />
  )
}

function DropdownMenuTrigger({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
  return (
    <DropdownMenuPrimitive.Trigger
      data-slot="dropdown-menu-trigger"
      {...props}
    />
  )
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
  return (
    <DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className
        )}
        {...props}
      />
    </DropdownMenuPrimitive.Portal>
  )
}

function DropdownMenuGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
  return (
    <DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />
  )
}

function DropdownMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
  inset?: boolean
  variant?: "default" | "destructive"
}) {
  return (
    <DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    />
  )
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
  return (
    <DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>
  )
}

function DropdownMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
  return (
    <DropdownMenuPrimitive.RadioGroup
      data-slot="dropdown-menu-radio-group"
      {...props}
    />
  )
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
  return (
    <DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>
  )
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
  inset?: boolean
}) {
  return (
    <DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn(
        "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className
      )}
      {...props}
    />
  )
}

function DropdownMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
  return (
    <DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  )
}

function DropdownMenuShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="dropdown-menu-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className
      )}
      {...props}
    />
  )
}

function DropdownMenuSub({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
  inset?: boolean
}) {
  return (
    <DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>
  )
}

function DropdownMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
  return (
    <DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className
      )}
      {...props}
    />
  )
}

export {
  DropdownMenu,
  DropdownMenuPortal,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuLabel,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubTrigger,
  DropdownMenuSubContent,
}
</file>

<file path="components/ui/input.tsx">
import * as React from "react"

import { cn } from "@/lib/utils"

function Input({ className, type, ...props }: React.ComponentProps<"input">) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
        "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
        className
      )}
      {...props}
    />
  )
}

export { Input }
</file>

<file path="components/ui/label.tsx">
"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"

import { cn } from "@/lib/utils"

function Label({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  return (
    <LabelPrimitive.Root
      data-slot="label"
      className={cn(
        "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
        className
      )}
      {...props}
    />
  )
}

export { Label }
</file>

<file path="components/ui/popover.tsx">
"use client"

import * as React from "react"
import * as PopoverPrimitive from "@radix-ui/react-popover"

import { cn } from "@/lib/utils"

function Popover({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Root>) {
  return <PopoverPrimitive.Root data-slot="popover" {...props} />
}

function PopoverTrigger({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {
  return <PopoverPrimitive.Trigger data-slot="popover-trigger" {...props} />
}

function PopoverContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Content>) {
  return (
    <PopoverPrimitive.Portal>
      <PopoverPrimitive.Content
        data-slot="popover-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className
        )}
        {...props}
      />
    </PopoverPrimitive.Portal>
  )
}

function PopoverAnchor({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {
  return <PopoverPrimitive.Anchor data-slot="popover-anchor" {...props} />
}

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }
</file>

<file path="components/ui/separator.tsx">
"use client"

import * as React from "react"
import * as SeparatorPrimitive from "@radix-ui/react-separator"

import { cn } from "@/lib/utils"

function Separator({
  className,
  orientation = "horizontal",
  decorative = true,
  ...props
}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",
        className
      )}
      {...props}
    />
  )
}

export { Separator }
</file>

<file path="components/ui/skeleton.tsx">
import { cn } from "@/lib/utils"

function Skeleton({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="skeleton"
      className={cn("bg-accent animate-pulse rounded-md", className)}
      {...props}
    />
  )
}

export { Skeleton }
</file>

<file path="components/ui/table.tsx">
import * as React from "react"
import { cn } from "@/lib/utils"

export const Table = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLTableElement>) => (
  <table
    className={cn("w-full border-collapse text-sm", className)}
    {...props}
  />
)

export const TableHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLTableSectionElement>) => (
  <thead className={cn("bg-muted/50", className)} {...props} />
)

export const TableBody = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLTableSectionElement>) => (
  <tbody className={cn("", className)} {...props} />
)

export const TableFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLTableSectionElement>) => (
  <tfoot className={cn("bg-muted/50 font-medium", className)} {...props} />
)

export const TableRow = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLTableRowElement>) => (
  <tr
    className={cn(
      "border-b last:border-0 even:bg-muted/30 hover:bg-accent/30 transition-colors",
      className
    )}
    {...props}
  />
)

export const TableHead = ({
  className,
  ...props
}: React.ThHTMLAttributes<HTMLTableCellElement>) => (
  <th
    className={cn(
      "text-left px-4 py-2 font-medium text-muted-foreground align-middle",
      className
    )}
    {...props}
  />
)

export const TableCell = ({
  className,
  ...props
}: React.TdHTMLAttributes<HTMLTableCellElement>) => (
  <td
    className={cn("px-4 py-2 align-top", className)}
    {...props}
  />
)

export const TableCaption = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLTableCaptionElement>) =>
  React.createElement("caption", {
    className: cn("mt-2 text-xs text-muted-foreground", className),
    ...props,
  })

export default Table
</file>

<file path="components/ui/textarea.tsx">
import * as React from "react"

import { cn } from "@/lib/utils"

function Textarea({ className, ...props }: React.ComponentProps<"textarea">) {
  return (
    <textarea
      data-slot="textarea"
      className={cn(
        "border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        className
      )}
      {...props}
    />
  )
}

export { Textarea }
</file>

<file path="components/ui/tooltip.tsx">
"use client"

import * as React from "react"
import * as TooltipPrimitive from "@radix-ui/react-tooltip"

import { cn } from "@/lib/utils"

function TooltipProvider({
  delayDuration = 0,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {
  return (
    <TooltipPrimitive.Provider
      data-slot="tooltip-provider"
      delayDuration={delayDuration}
      {...props}
    />
  )
}

function Tooltip({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Root>) {
  return (
    <TooltipProvider>
      <TooltipPrimitive.Root data-slot="tooltip" {...props} />
    </TooltipProvider>
  )
}

function TooltipTrigger({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {
  return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />
}

function TooltipContent({
  className,
  sideOffset = 0,
  children,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Content>) {
  return (
    <TooltipPrimitive.Portal>
      <TooltipPrimitive.Content
        data-slot="tooltip-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",
          className
        )}
        {...props}
      >
        {children}
        <TooltipPrimitive.Arrow className="bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]" />
      </TooltipPrimitive.Content>
    </TooltipPrimitive.Portal>
  )
}

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }
</file>

<file path="components/nav-projects.tsx">
"use client"

import {
  Folder,
  Forward,
  MoreHorizontal,
  Trash2,
  type LucideIcon,
} from "lucide-react"

import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"
import {
  SidebarGroup,
  SidebarGroupLabel,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuButton,
  SidebarMenuItem,
  useSidebar,
} from "@/components/ui/sidebar"

export function NavProjects({
  projects,
}: {
  projects: {
    name: string
    url: string
    icon: LucideIcon
  }[]
}) {
  const { isMobile } = useSidebar()

  return (
    <SidebarGroup className="group-data-[collapsible=icon]:hidden">
      <SidebarGroupLabel>Projects</SidebarGroupLabel>
      <SidebarMenu>
        {projects.map((item) => (
          <SidebarMenuItem key={item.name}>
            <SidebarMenuButton asChild>
              <a href={item.url}>
                <item.icon />
                <span>{item.name}</span>
              </a>
            </SidebarMenuButton>
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <SidebarMenuAction showOnHover>
                  <MoreHorizontal />
                  <span className="sr-only">More</span>
                </SidebarMenuAction>
              </DropdownMenuTrigger>
              <DropdownMenuContent
                className="w-48 rounded-lg"
                side={isMobile ? "bottom" : "right"}
                align={isMobile ? "end" : "start"}
              >
                <DropdownMenuItem>
                  <Folder className="text-muted-foreground" />
                  <span>View Project</span>
                </DropdownMenuItem>
                <DropdownMenuItem>
                  <Forward className="text-muted-foreground" />
                  <span>Share Project</span>
                </DropdownMenuItem>
                <DropdownMenuSeparator />
                <DropdownMenuItem>
                  <Trash2 className="text-muted-foreground" />
                  <span>Delete Project</span>
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          </SidebarMenuItem>
        ))}
        <SidebarMenuItem>
          <SidebarMenuButton className="text-sidebar-foreground/70">
            <MoreHorizontal className="text-sidebar-foreground/70" />
            <span>More</span>
          </SidebarMenuButton>
        </SidebarMenuItem>
      </SidebarMenu>
    </SidebarGroup>
  )
}
</file>

<file path="components/project-tab-registrar.tsx">
"use client"

import { useEffect } from "react"
import { usePathname } from "next/navigation"

export function ProjectTabRegistrar({ title }: { title: string }) {
  const pathname = usePathname()

  useEffect(() => {
    if (!pathname) return
    window.dispatchEvent(
      new CustomEvent("workspace-tab:register", {
        detail: { href: pathname, title },
      }),
    )
  }, [pathname, title])

  return null
}
</file>

<file path="hooks/use-mobile.ts">
import * as React from "react"

const MOBILE_BREAKPOINT = 768

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    }
    mql.addEventListener("change", onChange)
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    return () => mql.removeEventListener("change", onChange)
  }, [])

  return !!isMobile
}
</file>

<file path="lib/get-strict-context.tsx">
import * as React from 'react';

function getStrictContext<T>(
  name?: string,
): readonly [
  ({
    value,
    children,
  }: {
    value: T;
    children?: React.ReactNode;
  }) => React.JSX.Element,
  () => T,
] {
  const Context = React.createContext<T | undefined>(undefined);

  const Provider = ({
    value,
    children,
  }: {
    value: T;
    children?: React.ReactNode;
  }) => <Context.Provider value={value}>{children}</Context.Provider>;

  const useSafeContext = () => {
    const ctx = React.useContext(Context);
    if (ctx === undefined) {
      throw new Error(`useContext must be used within ${name ?? 'a Provider'}`);
    }
    return ctx;
  };

  return [Provider, useSafeContext] as const;
}

export { getStrictContext };
</file>

<file path="lib/utils.ts">
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
</file>

<file path="prisma/migrations/20251125201823_init/migration.sql">
-- CreateEnum
CREATE TYPE "TaskStatus" AS ENUM ('TODO', 'IN_PROGRESS', 'DONE');

-- CreateTable
CREATE TABLE "User" (
    "id" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    "name" TEXT,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "User_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "Board" (
    "id" TEXT NOT NULL,
    "title" TEXT NOT NULL,
    "ownerId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "Board_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "Column" (
    "id" TEXT NOT NULL,
    "title" TEXT NOT NULL,
    "order" INTEGER NOT NULL,
    "boardId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "Column_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "Task" (
    "id" TEXT NOT NULL,
    "title" TEXT NOT NULL,
    "description" TEXT,
    "status" "TaskStatus" NOT NULL DEFAULT 'TODO',
    "order" INTEGER NOT NULL,
    "columnId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "Task_pkey" PRIMARY KEY ("id")
);

-- CreateIndex
CREATE UNIQUE INDEX "User_email_key" ON "User"("email");

-- CreateIndex
CREATE INDEX "Board_ownerId_idx" ON "Board"("ownerId");

-- CreateIndex
CREATE INDEX "Column_boardId_idx" ON "Column"("boardId");

-- CreateIndex
CREATE INDEX "Task_columnId_idx" ON "Task"("columnId");

-- AddForeignKey
ALTER TABLE "Board" ADD CONSTRAINT "Board_ownerId_fkey" FOREIGN KEY ("ownerId") REFERENCES "User"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "Column" ADD CONSTRAINT "Column_boardId_fkey" FOREIGN KEY ("boardId") REFERENCES "Board"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "Task" ADD CONSTRAINT "Task_columnId_fkey" FOREIGN KEY ("columnId") REFERENCES "Column"("id") ON DELETE RESTRICT ON UPDATE CASCADE;
</file>

<file path="prisma/migrations/20251125202758_add_column_color/migration.sql">
/*
  Warnings:

  - Added the required column `color` to the `Column` table without a default value. This is not possible if the table is not empty.

*/
-- AlterTable
ALTER TABLE "Column" ADD COLUMN     "color" TEXT NOT NULL;
</file>

<file path="prisma/migrations/20251126070915_add_better_auth_models/migration.sql">
/*
  Warnings:

  - Added the required column `updatedAt` to the `User` table without a default value. This is not possible if the table is not empty.

*/
-- AlterTable
ALTER TABLE "User" ADD COLUMN     "emailVerified" BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN     "image" TEXT,
ADD COLUMN     "updatedAt" TIMESTAMP(3) NOT NULL;

-- CreateTable
CREATE TABLE "session" (
    "id" TEXT NOT NULL,
    "token" TEXT NOT NULL,
    "expiresAt" TIMESTAMP(3) NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL,
    "userId" TEXT NOT NULL,

    CONSTRAINT "session_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "account" (
    "id" TEXT NOT NULL,
    "provider" TEXT NOT NULL,
    "providerAccountId" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "accessToken" TEXT,
    "refreshToken" TEXT,
    "expiresAt" TIMESTAMP(3),
    "tokenType" TEXT,
    "scope" TEXT,
    "idToken" TEXT,
    "sessionState" TEXT,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "account_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "verification" (
    "id" TEXT NOT NULL,
    "identifier" TEXT NOT NULL,
    "value" TEXT NOT NULL,
    "expiresAt" TIMESTAMP(3) NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "verification_pkey" PRIMARY KEY ("id")
);

-- CreateIndex
CREATE UNIQUE INDEX "session_token_key" ON "session"("token");

-- CreateIndex
CREATE UNIQUE INDEX "account_provider_providerAccountId_key" ON "account"("provider", "providerAccountId");

-- AddForeignKey
ALTER TABLE "session" ADD CONSTRAINT "session_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "account" ADD CONSTRAINT "account_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE RESTRICT ON UPDATE CASCADE;
</file>

<file path="prisma/migrations/20251126071114_fix_better_auth_account/migration.sql">
/*
  Warnings:

  - You are about to drop the column `tokenType` on the `account` table. All the data in the column will be lost.

*/
-- AlterTable
ALTER TABLE "account" DROP COLUMN "tokenType",
ADD COLUMN     "password" TEXT,
ADD COLUMN     "refreshTokenExpiresAt" TIMESTAMP(3);
</file>

<file path="prisma/migrations/20251126071214_add_session_ip_useragent/migration.sql">
-- AlterTable
ALTER TABLE "session" ADD COLUMN     "ipAddress" TEXT,
ADD COLUMN     "userAgent" TEXT;
</file>

<file path="prisma/migrations/20251126110555_rename_board_to_project/migration.sql">
/*
  Warnings:

  - You are about to drop the column `boardId` on the `Column` table. All the data in the column will be lost.
  - You are about to drop the `Board` table. If the table is not empty, all the data it contains will be lost.
  - Added the required column `projectId` to the `Column` table without a default value. This is not possible if the table is not empty.

*/
-- DropForeignKey
ALTER TABLE "Board" DROP CONSTRAINT "Board_ownerId_fkey";

-- DropForeignKey
ALTER TABLE "Column" DROP CONSTRAINT "Column_boardId_fkey";

-- DropIndex
DROP INDEX "Column_boardId_idx";

-- AlterTable
ALTER TABLE "Column" DROP COLUMN "boardId",
ADD COLUMN     "projectId" TEXT NOT NULL;

-- DropTable
DROP TABLE "Board";

-- CreateTable
CREATE TABLE "Project" (
    "id" TEXT NOT NULL,
    "title" TEXT NOT NULL,
    "ownerId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "Project_pkey" PRIMARY KEY ("id")
);

-- CreateIndex
CREATE INDEX "Project_ownerId_idx" ON "Project"("ownerId");

-- CreateIndex
CREATE INDEX "Column_projectId_idx" ON "Column"("projectId");

-- AddForeignKey
ALTER TABLE "Project" ADD CONSTRAINT "Project_ownerId_fkey" FOREIGN KEY ("ownerId") REFERENCES "User"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "Column" ADD CONSTRAINT "Column_projectId_fkey" FOREIGN KEY ("projectId") REFERENCES "Project"("id") ON DELETE RESTRICT ON UPDATE CASCADE;
</file>

<file path="prisma/migrations/20251126153042_add_board_model/migration.sql">
/*
  Warnings:

  - You are about to drop the column `projectId` on the `Column` table. All the data in the column will be lost.
  - Added the required column `boardId` to the `Column` table without a default value. This is not possible if the table is not empty.

*/
-- DropForeignKey
ALTER TABLE "Column" DROP CONSTRAINT "Column_projectId_fkey";

-- DropIndex
DROP INDEX "Column_projectId_idx";

-- AlterTable
ALTER TABLE "Column" DROP COLUMN "projectId",
ADD COLUMN     "boardId" TEXT NOT NULL;

-- CreateTable
CREATE TABLE "Board" (
    "id" TEXT NOT NULL,
    "title" TEXT NOT NULL,
    "projectId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "Board_pkey" PRIMARY KEY ("id")
);

-- CreateIndex
CREATE INDEX "Board_projectId_idx" ON "Board"("projectId");

-- CreateIndex
CREATE INDEX "Column_boardId_idx" ON "Column"("boardId");

-- AddForeignKey
ALTER TABLE "Board" ADD CONSTRAINT "Board_projectId_fkey" FOREIGN KEY ("projectId") REFERENCES "Project"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "Column" ADD CONSTRAINT "Column_boardId_fkey" FOREIGN KEY ("boardId") REFERENCES "Board"("id") ON DELETE RESTRICT ON UPDATE CASCADE;
</file>

<file path="prisma/migrations/20251126161456_add_project_icon/migration.sql">
-- AlterTable
ALTER TABLE "Project" ADD COLUMN     "icon" TEXT NOT NULL DEFAULT 'FolderKanban';
</file>

<file path="prisma/migrations/20251126163140_add_teams/migration.sql">
-- AlterTable
ALTER TABLE "Project" ADD COLUMN     "teamId" TEXT;

-- CreateTable
CREATE TABLE "Team" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "ownerId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "Team_pkey" PRIMARY KEY ("id")
);

-- CreateIndex
CREATE INDEX "Team_ownerId_idx" ON "Team"("ownerId");

-- CreateIndex
CREATE INDEX "Project_teamId_idx" ON "Project"("teamId");

-- AddForeignKey
ALTER TABLE "Team" ADD CONSTRAINT "Team_ownerId_fkey" FOREIGN KEY ("ownerId") REFERENCES "User"("id") ON DELETE RESTRICT ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE "Project" ADD CONSTRAINT "Project_teamId_fkey" FOREIGN KEY ("teamId") REFERENCES "Team"("id") ON DELETE SET NULL ON UPDATE CASCADE;
</file>

<file path="prisma/migrations/20251127125447_add_task_meta/migration.sql">
-- AlterTable
ALTER TABLE "Task" ADD COLUMN     "assignee" TEXT,
ADD COLUMN     "dueDate" TIMESTAMP(3);
</file>

<file path="prisma/migrations/20251127140235_add_task_start_end/migration.sql">
-- AlterTable
ALTER TABLE "Task" ADD COLUMN     "endAt" TIMESTAMP(3),
ADD COLUMN     "startAt" TIMESTAMP(3);
</file>

<file path="prisma/migrations/20251129121824_add_project_and_task_numbers/migration.sql">
-- CreateEnum
CREATE TYPE "TaskKind" AS ENUM ('TASK', 'MEETING', 'CALL');

-- AlterTable
ALTER TABLE "Project" ADD COLUMN     "number" INTEGER NOT NULL DEFAULT 0;

-- AlterTable
ALTER TABLE "Task" ADD COLUMN     "kind" "TaskKind" NOT NULL DEFAULT 'TASK',
ADD COLUMN     "number" INTEGER NOT NULL DEFAULT 0;
</file>

<file path="prisma/migrations/20251129123937_add_project_and_task_numbers/migration.sql">
/*
  Warnings:

  - You are about to drop the column `number` on the `Task` table. All the data in the column will be lost.
  - A unique constraint covering the columns `[number]` on the table `Project` will be added. If there are existing duplicate values, this will fail.

*/
-- AlterTable
CREATE SEQUENCE project_number_seq;
ALTER TABLE "Project" ALTER COLUMN "number" SET DEFAULT nextval('project_number_seq');
ALTER SEQUENCE project_number_seq OWNED BY "Project"."number";

-- AlterTable
ALTER TABLE "Task" DROP COLUMN "number",
ADD COLUMN     "projectTaskNumber" INTEGER NOT NULL DEFAULT 0;

-- CreateIndex
CREATE UNIQUE INDEX "Project_number_key" ON "Project"("number");
</file>

<file path="prisma/migrations/20251130072211_add_task_creator/migration.sql">
-- AlterTable
ALTER TABLE "Task" ADD COLUMN     "creatorId" TEXT;

-- AddForeignKey
ALTER TABLE "Task" ADD CONSTRAINT "Task_creatorId_fkey" FOREIGN KEY ("creatorId") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE;
</file>

<file path="prisma/migrations/20251130140048_dobavit_flag_arkhivatsii_v_model_task/migration.sql">
/*
  Warnings:

  - You are about to drop the column `creatorId` on the `Task` table. All the data in the column will be lost.

*/
-- DropForeignKey
ALTER TABLE "Task" DROP CONSTRAINT "Task_creatorId_fkey";

-- AlterTable
ALTER TABLE "Task" DROP COLUMN "creatorId",
ADD COLUMN     "archived" BOOLEAN NOT NULL DEFAULT false;
</file>

<file path="prisma/migrations/migration_lock.toml">
# Please do not edit this file manually
# It should be added in your version-control system (e.g., Git)
provider = "postgresql"
</file>

<file path="public/file.svg">
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>
</file>

<file path="public/globe.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
</file>

<file path="public/next.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>
</file>

<file path="public/vercel.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
</file>

<file path="public/window.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>
</file>

<file path="registry/new-york/hooks/use-js-loaded.ts">
import { useState } from 'react';
import { useEffect } from 'react';

/**
 * Hook to check if the JavaScript is loaded.
 *
 * @returns - True if the JavaScript is loaded, false otherwise.
 */
export function useJsLoaded() {
  const [loaded, setLoaded] = useState(false);

  useEffect(() => {
    if (
      document.readyState === 'complete' ||
      document.readyState === 'interactive'
    ) {
      setLoaded(true);
      return;
    }

    const onReady = () => setLoaded(true);
    document.addEventListener('DOMContentLoaded', onReady);
    window.addEventListener('load', onReady);

    return () => {
      document.removeEventListener('DOMContentLoaded', onReady);
      window.removeEventListener('load', onReady);
    };
  }, []);

  return loaded;
}
</file>

<file path=".nvmrc">
22.21.1
</file>

<file path="auth.ts">
import { prismaAdapter } from "better-auth/adapters/prisma";
import { PrismaClient } from "@prisma/client";
import { nextCookies } from "better-auth/next-js";
import { betterAuth } from "better-auth";

const client = new PrismaClient();

export const auth = betterAuth({
  database: prismaAdapter(client, {
    provider: "postgresql",
  }),
  appName: "easyble",
  plugins: [nextCookies()],
  socialProviders: {
    google: {
      clientId: process.env.GOOGLE_CLIENT_ID!,
      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
    },
  },
});
</file>

<file path="middleware.ts">
import { NextResponse, type NextRequest } from "next/server"
import { cookies } from "next/headers"

const PROTECTED_PREFIXES = ["/projects", "/dashboard"]

export async function middleware(req: NextRequest) {
const { pathname } = req.nextUrl

const isProtected = PROTECTED_PREFIXES.some((prefix) =>
pathname.startsWith(prefix),
)

if (!isProtected) {
return NextResponse.next()
}

const cookieStore = await cookies()
const hasSession =
cookieStore.has("better-auth.session_token") ||
cookieStore
.getAll()
.some((c) => c.name.startsWith("better-auth.session"))

if (!hasSession) {
const url = req.nextUrl.clone()
url.pathname = "/"
url.search = ""
return NextResponse.redirect(url)
}

return NextResponse.next()
}

export const config = {
runtime: "nodejs",
matcher: ["/((?!_next/static|_next/image|favicon.ico).*)"],
}
</file>

<file path="postcss.config.mjs">
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;
</file>

<file path="prisma.config.ts">
// This file was generated by Prisma and assumes you have installed the following:
// npm install --save-dev prisma dotenv
import "dotenv/config";
import { defineConfig, env } from "prisma/config";

export default defineConfig({
  schema: "prisma/schema.prisma",
  migrations: {
    path: "prisma/migrations",
  },
  datasource: {
    url: env("DATABASE_URL"),
  },
});
</file>

<file path="app/account/page.tsx">
import { headers } from "next/headers"
import { redirect } from "next/navigation"
import { auth } from "@/auth"
import prisma from "~/lib/prisma"
import { updateDisplayName } from "~/features/account/actions"
import {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
} from "@/components/ui/breadcrumb"

export default async function AccountPage() {
  const headersList = await headers()
  const session = await auth.api.getSession({
    headers: headersList,
  })

  const userId = session?.user?.id
  if (!userId) {
    redirect("/")
  }

  const user = await prisma.user.findUnique({
    where: { id: userId },
    select: { name: true, email: true },
  })

  if (!user) {
    redirect("/")
  }

  return (
    <div className="mx-auto flex max-w-xl flex-col gap-6 p-6">
      <Breadcrumb className="mb-1">
        <BreadcrumbList>
          <BreadcrumbItem>
            <BreadcrumbLink href="/">Home</BreadcrumbLink>
          </BreadcrumbItem>
          <BreadcrumbSeparator />
          <BreadcrumbItem>
            <BreadcrumbPage>Account</BreadcrumbPage>
          </BreadcrumbItem>
        </BreadcrumbList>
      </Breadcrumb>

      <div className="space-y-1">
        <h1 className="text-2xl font-bold leading-tight">
          Account
        </h1>
        <p className="text-sm text-muted-foreground">
          Manage your profile information.
        </p>
      </div>

      <div className="space-y-1 text-sm">
        <p className="text-muted-foreground">Email</p>
        <p className="font-medium">{user.email}</p>
      </div>

      <form action={updateDisplayName} className="space-y-4">
        <div className="space-y-2">
          <label
            htmlFor="name"
            className="text-sm font-medium text-foreground"
          >
            Display name
          </label>
          <input
            id="name"
            name="name"
            type="text"
            defaultValue={user.name ?? ""}
            required
            className="w-full rounded-md border px-3 py-2 text-sm bg-background"
          />
        </div>

        <button
          type="submit"
          className="w-full inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90"
        >
          Save changes
        </button>
      </form>
    </div>
  )
}
</file>

<file path="app/components/general-error-boundary.tsx">
import type { ReactElement, ReactNode } from 'react';

interface GeneralErrorBoundaryProps {
  children: ReactNode;
  fallback: ReactElement;
}

export function GeneralErrorBoundary({
  children,
  fallback,
}: GeneralErrorBoundaryProps) {
  // –ü–æ—Å–∫–æ–ª—å–∫—É react-router –Ω–µ –Ω—É–∂–µ–Ω, –ø—Ä–æ—Å—Ç–æ —Ä–µ–Ω–¥–µ—Ä–∏–º –¥–µ—Ç–µ–π –±–µ–∑ –æ—à–∏–±–æ–∫
  return <>{children}</>;
}
</file>

<file path="app/dashboard/page.tsx">
import { Suspense } from "react"
import { AppSidebar } from "@/components/app-sidebar"
import {
  Breadcrumb,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbList,
  BreadcrumbPage,
  BreadcrumbSeparator,
} from "@/components/ui/breadcrumb"
import { Separator } from "@/components/ui/separator"
import {
  SidebarInset,
  SidebarProvider,
  SidebarTrigger,
} from "@/components/ui/sidebar"

export default function Page() {
  return (
    <Suspense fallback={null}>
      <SidebarProvider>
        <AppSidebar />
        <SidebarInset>
          <header className="flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12">
            <div className="flex items-center gap-2 px-4">
              <SidebarTrigger className="-ml-1" />
              <Separator
                orientation="vertical"
                className="mr-2 data-[orientation=vertical]:h-4"
              />
              <Breadcrumb>
                <BreadcrumbList>
                  <BreadcrumbItem className="hidden md:block">
                    <BreadcrumbLink href="#">
                      Building Your Application
                    </BreadcrumbLink>
                  </BreadcrumbItem>
                  <BreadcrumbSeparator className="hidden md:block" />
                  <BreadcrumbItem>
                    <BreadcrumbPage>Data Fetching</BreadcrumbPage>
                  </BreadcrumbItem>
                </BreadcrumbList>
              </Breadcrumb>
            </div>
          </header>
          <div className="flex flex-1 flex-col gap-4 p-4 pt-0">
            <div className="grid auto-rows-min gap-4 md:grid-cols-3">
              <div className="bg-muted/50 aspect-video rounded-xl" />
              <div className="bg-muted/50 aspect-video rounded-xl" />
              <div className="bg-muted/50 aspect-video rounded-xl" />
            </div>
            <div className="bg-muted/50 min-h-[100vh] flex-1 rounded-xl md:min-h-min" />
          </div>
        </SidebarInset>
      </SidebarProvider>
    </Suspense>
  )
}
</file>

<file path="app/features/boards/actions.ts">
'use server';

import { redirect } from 'next/navigation';
import { revalidatePath } from 'next/cache';
import prisma from '~/lib/prisma';

export async function createBoard(formData: FormData) {
  const title = (formData.get('title') as string | null)?.trim();
  const projectId = formData.get('projectId') as string;

  if (!projectId) {
    throw new Error('projectId is required');
  }

  const project = await prisma.project.findUnique({
    where: { id: projectId },
    select: { id: true },
  });

  if (!project) {
    throw new Error('Project not found');
  }

  const board = await prisma.board.create({
    data: {
      title: title && title.length > 0 ? title : 'New board',
      projectId: projectId,
      columns: {
        create: [
          { title: 'To Do', color: 'blue', order: 0 },
          { title: 'In Progress', color: 'yellow', order: 1 },
          { title: 'Done', color: 'green', order: 2 },
        ],
      },
    },
  });

  redirect(`/projects/${projectId}/boards/${board.id}`);
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –±–æ—Ä–¥–∞
export async function updateBoard(formData: FormData) {
  const boardId = (formData.get('boardId') as string | null)?.trim();
  const projectId = (formData.get('projectId') as string | null)?.trim();
  const title = (formData.get('title') as string | null)?.trim();

  if (!boardId || !title) return;

  await prisma.board.update({
    where: { id: boardId },
    data: { title },
  });

  if (projectId) {
    revalidatePath(`/projects/${projectId}/boards/${boardId}`);
    revalidatePath('/projects');
  } else {
    revalidatePath('/projects');
  }
}

// –£–¥–∞–ª–µ–Ω–∏–µ –±–æ—Ä–¥–∞ —Å–æ –≤—Å–µ–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏ –∏ –∑–∞–¥–∞—á–∞–º–∏
export async function deleteBoard(formData: FormData) {
  const boardId = (formData.get('boardId') as string | null)?.trim();
  const projectId = (formData.get('projectId') as string | null)?.trim();

  if (!boardId) return;

  const columns = await prisma.column.findMany({
    where: { boardId },
    select: { id: true },
  });
  const columnIds = columns.map((c) => c.id);

  if (columnIds.length > 0) {
    await prisma.task.deleteMany({
      where: { columnId: { in: columnIds } },
    });

    await prisma.column.deleteMany({
      where: { id: { in: columnIds } },
    });
  }

  await prisma.board.delete({
    where: { id: boardId },
  });

  if (projectId) {
    revalidatePath(`/projects/${projectId}`);
  }
  revalidatePath('/projects');
}
</file>

<file path="app/features/color-scheme/color-scheme.server.ts">
/* eslint-disable unicorn/no-null */

// –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ color scheme –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –∫—É–∫–∏/headers.
// –ó–¥–µ—Å—å –æ—Å—Ç–∞–≤–ª—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –º–æ–¥—É–ª—å-–∑–∞–≥–ª—É—à–∫—É –±–µ–∑ react-router.

export type ColorScheme = "light" | "dark" | "system";

export function getColorScheme(): ColorScheme {
  // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º "system".
  return "system";
}

export async function setColorScheme(_scheme: ColorScheme): Promise<void> {
  // –ó–∞–≥–ª—É—à–∫–∞: –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å—Ö–µ–º—ã —á–µ—Ä–µ–∑ –∫—É–∫–∏/–ë–î.
  return;
}
</file>

<file path="app/features/color-scheme/use-color-scheme.ts">
'use client';

import { useEffect, useState } from 'react';

import type { ColorScheme } from './color-scheme-constants';
import { colorSchemes } from './color-scheme-constants';

const STORAGE_KEY = 'color-scheme';

function applyColorSchemeToDocument(colorScheme: ColorScheme) {
  if (typeof document === 'undefined') return;

  if (colorScheme === colorSchemes.system) {
    const media = window.matchMedia?.('(prefers-color-scheme: dark)');
    if (media?.matches) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
    return;
  }

  if (colorScheme === colorSchemes.dark) {
    document.documentElement.classList.add('dark');
  } else {
    document.documentElement.classList.remove('dark');
  }
}

function readInitialColorScheme(): ColorScheme {
  if (typeof window === 'undefined') {
    return colorSchemes.system;
  }

  const stored = window.localStorage.getItem(STORAGE_KEY) as ColorScheme | null;

  if (
    stored === colorSchemes.light ||
    stored === colorSchemes.dark ||
    stored === colorSchemes.system
  ) {
    return stored;
  }

  const prefersDark = window.matchMedia?.(
    '(prefers-color-scheme: dark)',
  ).matches;

  return prefersDark ? colorSchemes.dark : colorSchemes.light;
}

let externalSetColorScheme:
  | ((colorScheme: ColorScheme) => void)
  | null = null;

export function setColorScheme(colorScheme: ColorScheme) {
  if (typeof window !== 'undefined') {
    window.localStorage.setItem(STORAGE_KEY, colorScheme);
  }

  applyColorSchemeToDocument(colorScheme);

  if (externalSetColorScheme) {
    externalSetColorScheme(colorScheme);
  }
}

export function useColorScheme(): ColorScheme {
  const [colorScheme, setColorSchemeState] = useState<ColorScheme>(
    colorSchemes.system,
  );

  useEffect(() => {
    const initial = readInitialColorScheme();
    setColorSchemeState(initial);
    applyColorSchemeToDocument(initial);
    externalSetColorScheme = setColorSchemeState;

    const media = window.matchMedia?.('(prefers-color-scheme: dark)');
    if (!media) return;

    const handleChange = (event: MediaQueryListEvent) => {
      const stored = window.localStorage.getItem(
        STORAGE_KEY,
      ) as ColorScheme | null;

      if (!stored || stored === colorSchemes.system) {
        const nextScheme = event.matches
          ? colorSchemes.dark
          : colorSchemes.light;
        applyColorSchemeToDocument(nextScheme);
        setColorSchemeState(nextScheme);
      }
    };

    media.addEventListener('change', handleChange);

    return () => {
      media.removeEventListener('change', handleChange);

      if (externalSetColorScheme === setColorSchemeState) {
        externalSetColorScheme = null;
      }
    };
  }, []);

  return colorScheme;
}
</file>

<file path="app/features/landing/landing-page.tsx">
import { Description } from './description';
import { FAQ } from './faq';
import { Footer } from './footer';
import { Header } from './header';
import { Hero } from './hero';

export default function LandingPage() {
  return (
    <div className="overflow-hidden">
      <Header />

      <main className="container mx-auto">
        <Hero />
        <Description />
        <FAQ />
      </main>

      <Footer />
    </div>
  );
}
</file>

<file path="app/hooks/use-package-manager.ts">
'use client';

import { useEffect, useState } from 'react';

type PackageManager = 'npm' | 'yarn' | 'pnpm' | 'bun';
const STORAGE_KEY = 'packageManager';
const DEFAULT_PM: PackageManager = 'npm';

export function usePackageManager(): readonly [
  PackageManager,
  (pm: PackageManager) => void,
] {
  // lazy‚Äêinit from localStorage (or default)
  const [pm, setPm] = useState<PackageManager>(() => {
    try {
      const stored = localStorage.getItem(STORAGE_KEY);
      return stored === 'npm' ||
        stored === 'yarn' ||
        stored === 'pnpm' ||
        stored === 'bun'
        ? stored
        : DEFAULT_PM;
    } catch {
      return DEFAULT_PM;
    }
  });

  // sync out to localStorage whenever it changes
  useEffect(() => {
    try {
      localStorage.setItem(STORAGE_KEY, pm);
    } catch {
      // ignore (e.g. quota error, private mode)
    }
  }, [pm]);

  return [pm, setPm] as const;
}
</file>

<file path="app/onboarding/team/page.tsx">
import { createTeam } from "~/features/teams/actions"
import {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
} from "@/components/ui/breadcrumb"

export default function OnboardingTeamPage() {
  return (
    <div className="min-h-screen flex flex-col items-center justify-center px-4">
      <div className="w-full max-w-md space-y-6">
        <Breadcrumb className="mb-2">
          <BreadcrumbList>
            <BreadcrumbItem>
              <BreadcrumbLink href="/">Home</BreadcrumbLink>
            </BreadcrumbItem>
            <BreadcrumbSeparator />
            <BreadcrumbItem>
              <BreadcrumbPage>Create team</BreadcrumbPage>
            </BreadcrumbItem>
          </BreadcrumbList>
        </Breadcrumb>

        <div className="space-y-2 text-center">
          <h1 className="text-2xl font-bold leading-tight">
            Create a team
          </h1>
          <p className="text-sm text-muted-foreground">
            This workspace will contain your projects and boards.
          </p>
        </div>

        <form action={createTeam} className="space-y-4">
          <div className="space-y-2">
            <label
              htmlFor="name"
              className="text-sm font-medium text-foreground"
            >
              Team name
            </label>
            <input
              id="name"
              name="name"
              type="text"
              required
              placeholder="Acme Studio"
              className="w-full rounded-md border px-3 py-2 text-sm bg-background"
            />
          </div>

          <button
            type="submit"
            className="w-full inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90"
          >
            Continue
          </button>
        </form>
      </div>
    </div>
  )
}
</file>

<file path="app/projects/[projectId]/page.tsx">
import { redirect, notFound } from "next/navigation"
import prisma from "~/lib/prisma"

interface ProjectPageProps {
  params: Promise<{
    projectId: string
  }>
}

export default async function ProjectPage({ params }: ProjectPageProps) {
  const { projectId } = await params

  const project = await prisma.project.findUnique({
    where: { id: projectId },
    include: {
      boards: {
        select: { id: true },
        orderBy: { createdAt: "asc" },
      },
    },
  })

  if (!project) {
    notFound()
  }

  const firstBoard = project.boards[0]
  if (!firstBoard) {
    notFound()
  }

  redirect(`/projects/${project.id}/boards/${firstBoard.id}`)
}
</file>

<file path="app/projects/page.tsx">
import * as React from "react"
import Link from "next/link"
import { redirect } from "next/navigation"
import prisma from "~/lib/prisma"

import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table"

type SearchParams = {
  [key: string]: string | string[] | undefined
}

export default async function ProjectsIndexPage(props: {
  searchParams: Promise<SearchParams>
}) {
  const searchParams = await props.searchParams

  const teamFromUrlRaw = searchParams?.team
  const teamFromUrl =
    typeof teamFromUrlRaw === "string"
      ? teamFromUrlRaw
      : Array.isArray(teamFromUrlRaw)
        ? teamFromUrlRaw[0]
        : undefined

  const user = await prisma.user.findFirst({
    include: {
      teams: {
        orderBy: { createdAt: "asc" },
      },
      projects: {
        include: {
          boards: {
            include: {
              columns: {
                include: {
                  tasks: {
                    select: {
                      id: true,
                      title: true,
                      createdAt: true,
                    },
                    orderBy: { createdAt: "asc" },
                  },
                },
              },
            },
            orderBy: { createdAt: "asc" },
          },
        },
        orderBy: { createdAt: "asc" },
      },
    },
  })

  if (!user) {
    redirect("/projects/new")
  }

  const teams = user.teams ?? []
  const allProjects = user.projects ?? []

  if (allProjects.length === 0) {
    const newProjectUrl = teamFromUrl ? `/projects/new?team=${teamFromUrl}` : "/projects/new"
    redirect(newProjectUrl)
  }

  const defaultTeamId = teams[0]?.id
  const currentTeamId = teamFromUrl ?? defaultTeamId ?? null
  const currentTeam = currentTeamId
    ? teams.find((t) => t.id === currentTeamId) ?? null
    : null

  const projectsForTeam =
    currentTeamId != null
      ? allProjects.filter((p) => p.teamId === currentTeamId)
      : allProjects

  const teamQuery = currentTeamId ? `?team=${currentTeamId}` : ""

  // –ï—Å–ª–∏ –≤ –∫–æ–º–∞–Ω–¥–µ –≤—Å–µ–≥–æ –æ–¥–∏–Ω –±–æ—Ä–¥ ‚Äî —Å—Ä–∞–∑—É —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–º –Ω–∞ –Ω–µ–≥–æ
  const boardsForTeam = projectsForTeam.flatMap((project: any) => project.boards ?? [])
  if (boardsForTeam.length === 1) {
    const onlyBoard = boardsForTeam[0] as any
    redirect(`/projects/${onlyBoard.projectId}/boards/${onlyBoard.id}${teamQuery}`)
  }

  // –ö–æ–ª-–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–∞–Ω–¥–µ
  let teamMemberCount = 0
  if (currentTeamId) {
    teamMemberCount = await prisma.user.count({
      where: {
        teams: {
          some: { id: currentTeamId },
        },
      },
    })
  }

  const hasAnyBoards = projectsForTeam.some(
    (project: any) => (project.boards?.length ?? 0) > 0,
  )

  return (
    <div className="flex h-full w-full flex-col gap-6 p-4">
      <div className="flex flex-col gap-1">
        <h1 className="text-xl font-semibold leading-tight">
          {currentTeam ? currentTeam.name : "Projects"}
        </h1>
        <p className="text-sm text-muted-foreground">
          Boards and their tasks grouped by project in the current workspace.
        </p>
        {currentTeamId && (
          <p className="text-xs text-muted-foreground">
            Members in this workspace: {teamMemberCount}
          </p>
        )}
      </div>

      {!hasAnyBoards ? (
        <div className="mt-4 text-sm text-muted-foreground">
          There are no boards in this team yet.{" "}
          <Link
            href={
              currentTeamId
                ? `/projects/new?team=${currentTeamId}`
                : "/projects/new"
            }
            className="underline underline-offset-4"
          >
            Create your first project.
          </Link>
        </div>
      ) : (
        <div className="flex flex-col gap-6">
          {projectsForTeam.map((project: any) => {
            const projectBoards = project.boards ?? []

            // –í—Å–µ–≥–æ –∑–∞–¥–∞—á –≤ –ø—Ä–æ–µ–∫—Ç–µ
            const projectTasks = projectBoards.reduce(
              (sum: number, board: any) =>
                sum +
                (board.columns ?? []).reduce(
                  (inner: number, col: any) =>
                    inner + (col.tasks?.length ?? 0),
                  0,
                ),
              0,
            )

            if (projectBoards.length === 0) {
              return null
            }

            return (
              <section key={project.id} className="flex flex-col gap-2">
                {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ–µ–∫—Ç–∞ –í–ù–ï —Ç–∞–±–ª–∏—Ü—ã */}
                <div className="flex items-center justify-between gap-4">
                  <div>
                    <h2 className="text-sm font-semibold">
                      {project.title}
                    </h2>
                    <p className="text-xs text-muted-foreground">
                      {projectBoards.length} boards ¬∑ {projectTasks} tasks
                    </p>
                  </div>
                  <p className="whitespace-nowrap text-xs text-muted-foreground">
                    Project created{" "}
                    {project.createdAt.toISOString().slice(0, 10)}
                  </p>
                </div>

                {/* –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–ª—å–∫–æ –ø–æ –±–æ—Ä–¥–∞–º –∏ –∑–∞–¥–∞—á–∞–º */}
                <div className="overflow-auto rounded-md border bg-background">
                  <Table>
                    <TableHeader>
                      <TableRow>
                        <TableHead className="w-[260px] text-xs font-medium uppercase text-muted-foreground">
                          Board / Task
                        </TableHead>
                        <TableHead className="w-[160px] text-xs font-medium uppercase text-muted-foreground">
                          Status
                        </TableHead>
                        <TableHead className="w-[140px] text-xs font-medium uppercase text-muted-foreground">
                          Created
                        </TableHead>
                      </TableRow>
                    </TableHeader>
                    <TableBody>
                      {projectBoards.map((board: any) => {
                        const columns = board.columns ?? []
                        const allTasks = columns.flatMap((col: any) => col.tasks ?? [])

                        return (
                          <React.Fragment key={board.id}>
                            {/* –°—Ç—Ä–æ–∫–∞ –±–æ—Ä–¥–∞ */}
                            <TableRow className="bg-muted/40 hover:bg-muted/50">
                              <TableCell className="px-4 py-2">
                                <Link
                                  href={`/projects/${project.id}/boards/${board.id}${teamQuery}`}
                                  className="text-sm font-medium text-foreground underline underline-offset-4 decoration-muted-foreground/60 hover:decoration-foreground"
                                >
                                  {board.title}
                                </Link>
                              </TableCell>
                              <TableCell className="px-4 py-2 text-xs text-muted-foreground">
                                {allTasks.length} tasks
                              </TableCell>
                              <TableCell className="whitespace-nowrap px-4 py-2 text-xs text-muted-foreground">
                                {board.createdAt.toISOString().slice(0, 10)}
                              </TableCell>
                            </TableRow>

                            {/* –°—Ç—Ä–æ–∫–∏ –∑–∞–¥–∞—á —ç—Ç–æ–≥–æ –±–æ—Ä–¥–∞ */}
                            {columns.map((column: any) =>
                              (column.tasks ?? []).map((task: any) => (
                                <TableRow key={task.id}>
                                  <TableCell className="px-4 py-1 pl-8 text-xs">
                                    {task.title}
                                  </TableCell>
                                  <TableCell className="px-4 py-1 text-xs text-muted-foreground">
                                    {column.title}
                                  </TableCell>
                                  <TableCell className="whitespace-nowrap px-4 py-1 text-xs text-muted-foreground">
                                    {task.createdAt.toISOString().slice(0, 10)}
                                  </TableCell>
                                </TableRow>
                              )),
                            )}

                            {allTasks.length === 0 && (
                              <TableRow>
                                <TableCell
                                  colSpan={3}
                                  className="px-4 py-2 pl-8 text-xs text-muted-foreground"
                                >
                                  No tasks in this board yet.
                                </TableCell>
                              </TableRow>
                            )}
                          </React.Fragment>
                        )
                      })}
                    </TableBody>
                  </Table>
                </div>
              </section>
            )
          })}
        </div>
      )}
    </div>
  )
}
</file>

<file path="app/page.tsx">
import { headers } from "next/headers"
import { redirect } from "next/navigation"
import { auth } from "@/auth"
import LandingPage from "~/features/landing/landing-page"

export default async function Home() {
  const headersList = await headers()

  const session = await auth.api.getSession({
    headers: headersList,
  })

  if (session?.session) {
    redirect("/projects")
  }

  return <LandingPage />
}
</file>

<file path="components/ui/sheet.tsx">
"use client"

import * as React from "react"
import * as SheetPrimitive from "@radix-ui/react-dialog"
import { XIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {
  return <SheetPrimitive.Root data-slot="sheet" {...props} />
}

function SheetTrigger({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {
  return <SheetPrimitive.Trigger data-slot="sheet-trigger" {...props} />
}

function SheetClose({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Close>) {
  return <SheetPrimitive.Close data-slot="sheet-close" {...props} />
}

function SheetPortal({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Portal>) {
  return <SheetPrimitive.Portal data-slot="sheet-portal" {...props} />
}

function SheetOverlay({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {
  return (
    <SheetPrimitive.Overlay
      data-slot="sheet-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props}
    />
  )
}

function SheetContent({
  className,
  children,
  side = "right",
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Content> & {
  side?: "top" | "right" | "bottom" | "left"
}) {
  return (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content
        data-slot="sheet-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
          side === "right" &&
            "data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",
          side === "left" &&
            "data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",
          side === "top" &&
            "data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",
          side === "bottom" &&
            "data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",
          className
        )}
        {...props}
      >
        {children}
        <SheetPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-3 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none">
          <XIcon className="size-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  )
}

function SheetHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-header"
      className={cn("flex flex-col gap-1.5 p-4", className)}
      {...props}
    />
  )
}

function SheetFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props}
    />
  )
}

function SheetTitle({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Title>) {
  return (
    <SheetPrimitive.Title
      data-slot="sheet-title"
      className={cn("text-foreground font-semibold", className)}
      {...props}
    />
  )
}

function SheetDescription({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Description>) {
  return (
    <SheetPrimitive.Description
      data-slot="sheet-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

export {
  Sheet,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
}
</file>

<file path="lib/auth-client.ts">
import { createAuthClient } from "better-auth/react";

export const authClient = createAuthClient();
</file>

<file path="registry/new-york/ui/kanban.tsx">
/* eslint-disable @typescript-eslint/no-unsafe-member-access */
/* eslint-disable unicorn/no-null */
import type {
  ChangeEvent,
  ComponentProps,
  KeyboardEvent,
  RefObject,
} from "react"
import {
  createContext,
  useCallback,
  useContext,
  useEffect,
  useId,
  useImperativeHandle,
  useMemo,
  useRef,
  useState,
} from "react"
import { createPortal } from "react-dom"

import { Button, buttonVariants } from "~/components/ui/button"
import { Skeleton } from "~/components/ui/skeleton"
import { Textarea } from "~/components/ui/textarea"
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "~/components/ui/tooltip"
import { cn } from "~/lib/utils"

/*
Accessibility
*/

export type KanbanBoardDndMonitorEventHandler = {
  onDragStart?: (activeId: string) => void
  onDragMove?: (activeId: string, overId?: string) => void
  onDragOver?: (activeId: string, overId?: string) => void
  onDragEnd?: (activeId: string, overId?: string) => void
  onDragCancel?: (activeId: string) => void
}

export type KanbanBoardDndEventType = keyof KanbanBoardDndMonitorEventHandler

export type KanbanBoardDndMonitorContextValue = {
  activeIdRef: RefObject<string>
  draggableDescribedById: string
  registerMonitor: (monitor: KanbanBoardDndMonitorEventHandler) => void
  unregisterMonitor: (monitor: KanbanBoardDndMonitorEventHandler) => void
  triggerEvent: (
    eventType: KanbanBoardDndEventType,
    activeId: string,
    overId?: string,
  ) => void
}

export const KanbanBoardContext = createContext<
  KanbanBoardDndMonitorContextValue | undefined
>(undefined)

function useDndMonitor(monitor: KanbanBoardDndMonitorEventHandler) {
  const context = useContext(KanbanBoardContext)
  if (!context) {
    throw new Error("useDndMonitor must be used within a DndMonitorProvider")
  }

  const { registerMonitor, unregisterMonitor } = context

  useEffect(() => {
    registerMonitor(monitor)
    return () => {
      unregisterMonitor(monitor)
    }
  }, [monitor, registerMonitor, unregisterMonitor])
}

export function useDndEvents() {
  const context = useContext(KanbanBoardContext)

  if (!context) {
    throw new Error("useDndEvents must be used within a DndMonitorProvider")
  }

  const { activeIdRef, draggableDescribedById, triggerEvent } = context

  const onDragStart = useCallback(
    (activeId: string) => {
      activeIdRef.current = activeId
      triggerEvent("onDragStart", activeId)
    },
    [triggerEvent, activeIdRef],
  )

  const onDragMove = useCallback(
    (activeId: string, overId?: string) => {
      triggerEvent("onDragMove", activeId, overId)
    },
    [triggerEvent],
  )

  const onDragOver = useCallback(
    (activeId: string, overId?: string) => {
      const actualActiveId = activeId || activeIdRef.current
      triggerEvent("onDragOver", actualActiveId, overId)
    },
    [triggerEvent, activeIdRef],
  )

  const onDragEnd = useCallback(
    (activeId: string, overId?: string) => {
      triggerEvent("onDragEnd", activeId, overId)
    },
    [triggerEvent],
  )

  const onDragCancel = useCallback(
    (activeId: string) => {
      triggerEvent("onDragCancel", activeId)
    },
    [triggerEvent],
  )

  return {
    draggableDescribedById,
    onDragStart,
    onDragMove,
    onDragOver,
    onDragEnd,
    onDragCancel,
  }
}

export const defaultScreenReaderInstructions = `
To pick up a draggable item, press the space bar.
While dragging, use the arrow keys to move the item.
Press space again to drop the item in its new position, or press escape to cancel.
`

export type KanbanBoardAnnouncements = {
  onDragStart: (activeId: string) => string
  onDragMove?: (activeId: string, overId?: string) => string | undefined
  onDragOver: (activeId: string, overId?: string) => string
  onDragEnd: (activeId: string, overId?: string) => string
  onDragCancel: (activeId: string) => string
}

export const defaultAnnouncements: KanbanBoardAnnouncements = {
  onDragStart(activeId) {
    return `Picked up draggable item ${activeId}.`
  },
  onDragOver(activeId, overId) {
    if (overId) {
      return `Draggable item ${activeId} was moved over droppable area ${overId}.`
    }

    return `Draggable item ${activeId} is no longer over a droppable area.`
  },
  onDragEnd(activeId, overId) {
    if (overId) {
      return `Draggable item ${activeId} was dropped over droppable area ${overId}`
    }

    return `Draggable item ${activeId} was dropped.`
  },
  onDragCancel(activeId) {
    return `Dragging was cancelled. Draggable item ${activeId} was dropped.`
  },
}

export type KanbanBoardLiveRegionProps = {
  id: string
  announcement: string
  ariaLiveType?: "polite" | "assertive" | "off"
}

export function KanbanBoardLiveRegion({
  announcement,
  ariaLiveType = "assertive",
  className,
  id,
  ref,
  ...props
}: ComponentProps<"div"> & KanbanBoardLiveRegionProps) {
  return (
    <div
      aria-live={ariaLiveType}
      aria-atomic
      className={cn(
        "clip-[rect(0_0_0_0)] clip-path-[inset(100%)] fixed top-0 left-0 -m-px h-px w-px overflow-hidden border-0 p-0 whitespace-nowrap",
        className,
      )}
      id={id}
      ref={ref}
      role="status"
      {...props}
    >
      {announcement}
    </div>
  )
}

export type KanbanBoardHiddenTextProps = {
  id: string
  value: string
}

export function KanbanBoardHiddenText({
  id,
  value,
  className,
  ref,
  ...props
}: ComponentProps<"div"> & KanbanBoardHiddenTextProps) {
  return (
    <div id={id} className={cn("hidden", className)} ref={ref} {...props}>
      {value}
    </div>
  )
}

export function useAnnouncement() {
  const [announcement, setAnnouncement] = useState("")
  const announce = useCallback((value: string | undefined) => {
    if (value != undefined) {
      setAnnouncement(value)
    }
  }, [])

  return { announce, announcement } as const
}

export type KanbanBoardAccessibilityProps = {
  announcements?: KanbanBoardAnnouncements
  container?: Element
  screenReaderInstructions?: string
  hiddenTextDescribedById: string
}

export const KanbanBoardAccessibility = ({
  announcements = defaultAnnouncements,
  container,
  hiddenTextDescribedById,
  screenReaderInstructions = defaultScreenReaderInstructions,
}: KanbanBoardAccessibilityProps) => {
  const { announce, announcement } = useAnnouncement()
  const liveRegionId = useId()
  const [mounted, setMounted] = useState(false)

  useEffect(() => {
    setMounted(true)
  }, [])

  useDndMonitor(
    useMemo(
      () => ({
        onDragStart(activeId) {
          announce(announcements.onDragStart(activeId))
        },
        onDragMove(activeId, overId) {
          if (announcements.onDragMove) {
            announce(announcements.onDragMove(activeId, overId))
          }
        },
        onDragOver(activeId, overId) {
          announce(announcements.onDragOver(activeId, overId))
        },
        onDragEnd(activeId, overId) {
          announce(announcements.onDragEnd(activeId, overId))
        },
        onDragCancel(activeId) {
          announce(announcements.onDragCancel(activeId))
        },
      }),
      [announce, announcements],
    ),
  )

  if (!mounted) {
    return null
  }

  const markup = (
    <>
      <KanbanBoardHiddenText
        id={hiddenTextDescribedById}
        value={screenReaderInstructions}
      />
      <KanbanBoardLiveRegion id={liveRegionId} announcement={announcement} />
    </>
  )

  return container ? createPortal(markup, container) : markup
}

export type KanbanBoardProviderProps = {
  announcements?: KanbanBoardAnnouncements
  screenReaderInstructions?: string
  container?: Element
  children: React.ReactNode
}

export const KanbanBoardProvider = ({
  announcements,
  screenReaderInstructions,
  container,
  children,
}: KanbanBoardProviderProps) => {
  const draggableDescribedById = useId()
  const monitorsReference = useRef<KanbanBoardDndMonitorEventHandler[]>([])
  const activeIdReference = useRef<string>("")

  const registerMonitor = useCallback(
    (monitor: KanbanBoardDndMonitorEventHandler) => {
      monitorsReference.current.push(monitor)
    },
    [],
  )

  const unregisterMonitor = useCallback(
    (monitor: KanbanBoardDndMonitorEventHandler) => {
      monitorsReference.current = monitorsReference.current.filter(
        (m) => m !== monitor,
      )
    },
    [],
  )

  const triggerEvent = useCallback(
    (eventType: KanbanBoardDndEventType, activeId: string, overId?: string) => {
      for (const monitor of monitorsReference.current) {
        const handler = monitor[eventType]
        if (handler) {
          handler(activeId, overId)
        }
      }
    },
    [],
  )

  const contextValue = useMemo(
    () => ({
      activeIdRef: activeIdReference,
      draggableDescribedById,
      registerMonitor,
      unregisterMonitor,
      triggerEvent,
    }),
    [
      activeIdReference,
      draggableDescribedById,
      registerMonitor,
      unregisterMonitor,
      triggerEvent,
    ],
  )

  return (
    <TooltipProvider>
      <KanbanBoardContext.Provider value={contextValue}>
        {children}
        <KanbanBoardAccessibility
          announcements={announcements}
          screenReaderInstructions={screenReaderInstructions}
          container={container}
          hiddenTextDescribedById={draggableDescribedById}
        />
      </KanbanBoardContext.Provider>
    </TooltipProvider>
  )
}

/*
Constants
*/

const DATA_TRANSFER_TYPES = {
  CARD: "kanban-board-card",
}

const KANBAN_BOARD_CIRCLE_COLORS_MAP = {
  primary: "bg-kanban-board-circle-primary",
  gray: "bg-kanban-board-circle-gray",
  red: "bg-kanban-board-circle-red",
  yellow: "bg-kanban-board-circle-yellow",
  green: "bg-kanban-board-circle-green",
  cyan: "bg-kanban-board-circle-cyan",
  blue: "bg-kanban-board-circle-blue",
  indigo: "bg-kanban-board-circle-indigo",
  violet: "bg-kanban-board-circle-violet",
  purple: "bg-kanban-board-circle-purple",
  pink: "bg-kanban-board-circle-pink",
}

export type KanbanBoardCircleColor =
  keyof typeof KANBAN_BOARD_CIRCLE_COLORS_MAP

export const KANBAN_BOARD_CIRCLE_COLORS = Object.keys(
  KANBAN_BOARD_CIRCLE_COLORS_MAP,
) as KanbanBoardCircleColor[]

/*
Board
*/

export function KanbanBoard({
  className,
  ref,
  ...props
}: ComponentProps<"div">) {
  return (
    <div
      className={cn(
        "inline-flex h-full items-start gap-x-2 py-1",
        className,
      )}
      ref={ref}
      {...props}
    />
  )
}

/**
 * Add some extra margin to the right of the container to allow for scrolling
 * when adding a new column.
 */
export function KanbanBoardExtraMargin({
  className,
  ref,
  ...props
}: ComponentProps<"div">) {
  return (
    <div
      className={cn("h-1 w-8 flex-shrink-0", className)}
      ref={ref}
      {...props}
    />
  )
}

/*
Column
*/

export type KanbanBoardColumnProps = {
  columnId: string
  onDropOverColumn?: (dataTransferData: string) => void
}

export const kanbanBoardColumnClassNames =
  "w-64 flex-shrink-0 rounded-lg border flex flex-col border-border bg-sidebar py-2 max-h-full"

export function KanbanBoardColumn({
  className,
  columnId,
  onDropOverColumn,
  ref,
  ...props
}: ComponentProps<"section"> & KanbanBoardColumnProps) {
  const [isDropTarget, setIsDropTarget] = useState(false)
  const { onDragEnd, onDragOver } = useDndEvents()

  return (
    <section
      aria-labelledby={`column-${columnId}-title`}
      className={cn(
        kanbanBoardColumnClassNames,
        isDropTarget && "border-primary",
        className,
      )}
      onDragLeave={() => {
        setIsDropTarget(false)
      }}
      onDragOver={(event) => {
        if (event.dataTransfer.types.includes(DATA_TRANSFER_TYPES.CARD)) {
          event.preventDefault()
          setIsDropTarget(true)
          onDragOver("", columnId)
        }
      }}
      onDrop={(event) => {
        const data = event.dataTransfer.getData(DATA_TRANSFER_TYPES.CARD)
        onDropOverColumn?.(data)
        onDragEnd(JSON.parse(data).id as string, columnId)
        setIsDropTarget(false)
      }}
      ref={ref}
      {...props}
    />
  )
}

export function KanbanBoardColumnSkeleton() {
  return (
    <section className={cn(kanbanBoardColumnClassNames, "h-full py-0")}>
      <Skeleton className="h-full w-full" />
    </section>
  )
}

export function KanbanBoardColumnHeader({
  className,
  ref,
  ...props
}: ComponentProps<"div">) {
  return (
    <div
      className={cn("flex items-center justify-between px-2 py-1", className)}
      ref={ref}
      {...props}
    />
  )
}

export type KanbanBoardColumnTitleProps = {
  columnId: string
}

export function KanbanBoardColumnTitle({
  className,
  columnId,
  ref,
  ...props
}: ComponentProps<"h2"> & KanbanBoardColumnTitleProps) {
  return (
    <h2
      className={cn(
        "text-muted-foreground inline-flex items-center text-sm font-medium",
        className,
      )}
      ref={ref}
      id={`column-${columnId}-title`}
      {...props}
    />
  )
}

export function KanbanBoardColumnIconButton({
  className,
  ref,
  ...props
}: ComponentProps<typeof Button>) {
  return (
    <Button
      className={cn("text-muted-foreground size-6", className)}
      variant="ghost"
      size="icon"
      ref={ref}
      {...props}
    />
  )
}

export type KanbanBoardColorCircleProps = {
  color?: KanbanBoardCircleColor
}

export function KanbanColorCircle({
  className,
  color = "primary",
  ref,
  ...props
}: ComponentProps<"div"> & KanbanBoardColorCircleProps) {
  return (
    <div
      className={cn(
        "mr-2 size-2 rounded-full",
        KANBAN_BOARD_CIRCLE_COLORS_MAP[color],
        className,
      )}
      ref={ref}
      {...props}
    />
  )
}

export function KanbanBoardColumnList({
  className,
  ref,
  ...props
}: ComponentProps<"ul">) {
  return (
    <ul
      className={cn("min-h-0.5 flex-grow overflow-y-auto", className)}
      ref={ref}
      {...props}
    />
  )
}

export type KanbanBoardDropDirection = "none" | "top" | "bottom"

export type KanbanBoardColumnListItemProps = {
  cardId: string
  onDropOverListItem?: (
    dataTransferData: string,
    dropDirection: KanbanBoardDropDirection,
  ) => void
}

export const kanbanBoardColumnListItemClassNames =
  "-mb-[2px] border-b-2 border-t-2 border-b-transparent border-t-transparent px-2 py-1 last:mb-0"

export function KanbanBoardColumnListItem({
  cardId,
  className,
  onDropOverListItem,
  ref,
  ...props
}: ComponentProps<"li"> & KanbanBoardColumnListItemProps) {
  const [dropDirection, setDropDirection] =
    useState<KanbanBoardDropDirection>("none")
  const { onDragOver, onDragEnd } = useDndEvents()

  return (
    <li
      className={cn(
        kanbanBoardColumnListItemClassNames,
        dropDirection === "top" && "border-t-primary",
        dropDirection === "bottom" && "border-b-primary",
        className,
      )}
      onDragLeave={() => {
        setDropDirection("none")
      }}
      onDragOver={(event) => {
        if (event.dataTransfer.types.includes(DATA_TRANSFER_TYPES.CARD)) {
          event.preventDefault()
          event.stopPropagation()
          const rect = event.currentTarget.getBoundingClientRect()
          const midpoint = (rect.top + rect.bottom) / 2
          setDropDirection(event.clientY <= midpoint ? "top" : "bottom")
          onDragOver("", cardId)
        }
      }}
      onDrop={(event) => {
        event.stopPropagation()
        const data = event.dataTransfer.getData(DATA_TRANSFER_TYPES.CARD)
        onDropOverListItem?.(data, dropDirection)

        onDragEnd(JSON.parse(data).id as string, cardId)
        setDropDirection("none")
      }}
      ref={ref}
      {...props}
    />
  )
}

export function KanbanBoardColumnFooter({
  className,
  ref,
  ...props
}: ComponentProps<"div">) {
  return (
    <div
      className={cn("flex items-center justify-between px-2 pt-1", className)}
      ref={ref}
      {...props}
    />
  )
}

export function KanbanBoardColumnButton({
  className,
  ref,
  ...props
}: ComponentProps<typeof Button>) {
  return (
    <Button
      className={cn(
        "bg-sidebar text-primary hover:text-primary/80 w-full justify-start",
        className,
      )}
      variant="outline"
      size="sm"
      ref={ref}
      {...props}
    />
  )
}

/*
Card
*/

export type KanbanBoardCardProps<T extends { id: string } = { id: string }> = {
  data: T
  isActive?: boolean
}

const kanbanBoardCardClassNames =
  "rounded-lg border border-border bg-background p-3 text-start text-foreground shadow-sm"

export function KanbanBoardCard({
  className,
  data,
  isActive = false,
  ref,
  ...props
}: ComponentProps<"button"> & KanbanBoardCardProps) {
  const [isDragging, setIsDragging] = useState(false)
  const { draggableDescribedById, onDragStart } = useDndEvents()

  return (
    <button
      aria-describedby={draggableDescribedById}
      aria-roledescription="draggable"
      className={cn(
        kanbanBoardCardClassNames,
        "focus-visible:ring-ring inline-flex w-full cursor-grab touch-manipulation flex-col gap-1 focus-visible:ring-1 focus-visible:outline-none",
        isDragging
          ? "cursor-grabbing active:cursor-grabbing"
          : "group relative",
        isActive && "rotate-1 transform shadow-lg",
        className,
      )}
      draggable
      onDragStart={(event) => {
        setIsDragging(true)
        event.dataTransfer.effectAllowed = "move"
        event.dataTransfer.setData(
          DATA_TRANSFER_TYPES.CARD,
          JSON.stringify(data),
        )
        event.currentTarget.blur()
        onDragStart(data.id)
      }}
      onDragEnd={() => {
        setIsDragging(false)
      }}
      ref={ref}
      {...props}
    />
  )
}

export function KanbanBoardCardTitle({
  className,
  ref,
  ...props
}: ComponentProps<"h3">) {
  return (
    <h3 className={cn("text-sm font-medium", className)} ref={ref} {...props} />
  )
}

export function KanbanBoardCardDescription({
  className,
  ref,
  ...props
}: ComponentProps<"p">) {
  return (
    <p
      className={cn(
        "text-card-foreground text-xs leading-5 whitespace-pre-wrap",
        className,
      )}
      ref={ref}
      {...props}
    />
  )
}

export function KanbanBoardCardTextarea({
  className,
  onChange,
  value,
  ref: externalReference,
  ...props
}: ComponentProps<"textarea">) {
  const internalReference = useRef<HTMLTextAreaElement | null>(null)

  const adjustTextareaHeight = () => {
    if (internalReference.current) {
      internalReference.current.style.height = "auto"
      internalReference.current.style.height = `${internalReference.current.scrollHeight}px`
    }
  }

  useEffect(() => {
    adjustTextareaHeight()
  }, [])

  useEffect(() => {
    if (value === "") {
      adjustTextareaHeight()
    }
  }, [value])

  function handleChange(event: ChangeEvent<HTMLTextAreaElement>) {
    onChange?.(event)
    adjustTextareaHeight()
  }

  useImperativeHandle(externalReference, () => internalReference.current!)

  return (
    <Textarea
      className={cn(
        kanbanBoardCardClassNames,
        "min-h-min resize-none overflow-hidden text-xs leading-5",
        className,
      )}
      onChange={handleChange}
      rows={1}
      value={value}
      ref={internalReference}
      {...props}
    />
  )
}

export type KanbanBoardCardButtonGroupProps = {
  disabled?: boolean
}

export function KanbanBoardCardButtonGroup({
  className,
  disabled = false,
  ref,
  ...props
}: ComponentProps<"div"> & KanbanBoardCardButtonGroupProps) {
  return (
    <div
      ref={ref}
      className={cn(
        "bg-background absolute top-2.5 right-2.5 z-40 hidden items-center",
        !disabled && "group-focus-within:flex group-hover:flex",
        className,
      )}
      {...props}
    />
  )
}

export type KanbanBoardCardButtonProps = {
  tooltip?: string
}

/**
 * A button that can be used within a KanbanBoardCard.
 * It's a div under the hood because you shouldn't nest buttons within buttons,
 * and the card is a button.
 */
export function KanbanBoardCardButton({
  className,
  tooltip,
  ref: externalReference,
  ...props
}: ComponentProps<"div"> & KanbanBoardCardButtonProps) {
  const internalReference = useRef<HTMLDivElement | null>(null)

  useImperativeHandle(externalReference, () => internalReference.current!)

  const handleKeyDown = (event: KeyboardEvent<HTMLDivElement>) => {
    if (event.key === "Enter" || event.key === " ") {
      event.preventDefault()
      event.stopPropagation()

      internalReference.current?.click()
    }
  }

  const button = (
    <div
      className={cn(
        buttonVariants({ size: "icon", variant: "ghost" }),
        "border-border size-5 border hover:cursor-default [&_svg]:size-3.5",
        className,
      )}
      onKeyDown={handleKeyDown}
      role="button"
      tabIndex={0}
      ref={internalReference}
      {...props}
    />
  )

  if (!tooltip) {
    return button
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>

      <TooltipContent align="center" side="bottom">
        {tooltip}
      </TooltipContent>
    </Tooltip>
  )
}
</file>

<file path="eslint.config.mjs">
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals.js";
import nextTs from "eslint-config-next/typescript.js";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;
</file>

<file path="next.config.ts">
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  eslint: {
    ignoreDuringBuilds: true,
  },
};

export default nextConfig;
</file>

<file path="app/components/code-block-command.tsx">
'use client';

import { CheckIcon, ClipboardIcon } from 'lucide-react';
import * as React from 'react';

import { usePackageManager } from '~/hooks/use-package-manager';

import { copyToClipboardWithMeta } from './copy-button';
import { Button } from './ui/button';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';

type NpmCommands = {
  __npmCommand__?: string;
  __yarnCommand__?: string;
  __pnpmCommand__?: string;
  __bunCommand__?: string;
};

export function CodeBlockCommand({
  __npmCommand__,
  __yarnCommand__,
  __pnpmCommand__,
  __bunCommand__,
}: React.ComponentProps<'pre'> & NpmCommands) {
  const [packageManager, setPackageManager] = usePackageManager();
  const [hasCopied, setHasCopied] = React.useState(false);

  React.useEffect(() => {
    if (hasCopied) {
      const timer = setTimeout(() => setHasCopied(false), 2000);
      return () => clearTimeout(timer);
    }
  }, [hasCopied]);

  const tabs = React.useMemo(() => {
    return {
      pnpm: __pnpmCommand__,
      npm: __npmCommand__,
      yarn: __yarnCommand__,
      bun: __bunCommand__,
    };
  }, [__npmCommand__, __pnpmCommand__, __yarnCommand__, __bunCommand__]);

  const copyCommand = React.useCallback(() => {
    const command = tabs[packageManager];

    if (!command) {
      return;
    }

    copyToClipboardWithMeta(command);
    setHasCopied(true);
  }, [packageManager, tabs]);

  return (
    <div className="bg-card dark:bg-card border-border relative max-h-[650px] overflow-x-auto rounded-xl border">
      <Tabs
        value={packageManager}
        onValueChange={value => {
          setPackageManager(value as 'pnpm' | 'npm' | 'yarn' | 'bun');
        }}
      >
        <div className="border-border bg-muted flex items-center justify-between border-b px-3 pt-2.5">
          <TabsList className="h-7 translate-y-[2px] gap-3 bg-transparent p-0 pl-1">
            {Object.entries(tabs).map(([key]) => {
              return (
                <TabsTrigger
                  key={key}
                  value={key}
                  className="text-muted-foreground data-[state=active]:border-b-foreground data-[state=active]:text-foreground dark:data-[state=active]:!bg-muted dark:data-[state=active]:!border-muted dark:data-[state=active]:!border-b-foreground rounded-none border-b border-transparent bg-transparent p-0 pb-1.5 font-mono data-[state=active]:bg-transparent data-[state=active]:shadow-none"
                >
                  {key}
                </TabsTrigger>
              );
            })}
          </TabsList>
        </div>
        <div className="overflow-x-auto">
          {Object.entries(tabs).map(([key, value]) => {
            return (
              <TabsContent key={key} value={key} className="mt-0">
                <pre className="px-4 py-5">
                  <code
                    className="relative font-mono text-sm leading-none"
                    data-language="bash"
                  >
                    {value}
                  </code>
                </pre>
              </TabsContent>
            );
          })}
        </div>
      </Tabs>
      <Button
        size="icon"
        variant="ghost"
        className="text-foreground hover:bg-accent hover:text-accent-foreground absolute top-2 right-2.5 z-10 h-6 w-6 [&_svg]:h-3 [&_svg]:w-3"
        onClick={copyCommand}
      >
        <span className="sr-only">Copy</span>
        {hasCopied ? <CheckIcon /> : <ClipboardIcon />}
      </Button>
    </div>
  );
}
</file>

<file path="app/components/not-found.tsx">
import Link from "next/link";

import { Button } from "~/components/ui/button";
import { cn } from "~/lib/utils";

export type NotFoundProps = {
  className?: string;
};

export function NotFound({ className }: NotFoundProps) {
  return (
    <main
      className={cn(
        "grid min-h-full place-items-center px-6 py-24 sm:py-32 lg:px-8",
        className,
      )}
    >
      <div className="text-center">
        <p className="text-primary text-base font-semibold">404</p>

        <h1 className="text-foreground mt-4 text-3xl font-bold tracking-tighter sm:text-5xl">
          Page Not Found
        </h1>

        <p className="text-muted-foreground mt-6 text-base">
          Sorry, we couldn't find the page you're looking for.
        </p>

        <Button asChild className="mt-10">
          <Link href="/">Return Home</Link>
        </Button>
      </div>
    </main>
  );
}
</file>

<file path="app/features/color-scheme/theme-toggle.tsx">
'use client';

import { MonitorIcon, MoonIcon, SunIcon } from 'lucide-react';
import type { ComponentProps, MouseEvent } from 'react';
import { TbBrightness } from 'react-icons/tb';

import { Button } from '~/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '~/components/ui/dropdown-menu';
import { cn } from '~/lib/utils';

import type { ColorScheme } from './color-scheme-constants';
import { colorSchemes } from './color-scheme-constants';
import { setColorScheme, useColorScheme } from './use-color-scheme';

type ColorSchemeButtonProps = ComponentProps<'button'> & {
  value: ColorScheme;
};

function ColorSchemeButton({
  className,
  value,
  children,
  onClick,
  ...props
}: ColorSchemeButtonProps) {
  const currentColorScheme = useColorScheme();
  const isActive = currentColorScheme === value;

  function handleClick(event: MouseEvent<HTMLButtonElement>) {
    if (!isActive) {
      setColorScheme(value);
    }

    if (onClick) {
      onClick(event);
    }
  }

  return (
    <DropdownMenuItem asChild className="w-full">
      <button
        {...props}
        type="button"
        className={cn(
          className,
          isActive && 'text-primary [&_svg]:!text-primary',
        )}
        disabled={isActive}
        onClick={handleClick}
      >
        {children}
      </button>
    </DropdownMenuItem>
  );
}

export function ThemeToggle() {
  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button
          aria-label="Open theme menu"
          className="size-8"
          size="icon"
          variant="outline"
        >
          <TbBrightness />
        </Button>
      </DropdownMenuTrigger>

      <DropdownMenuContent align="end" sideOffset={4}>
        <DropdownMenuLabel className="sr-only">Appearance</DropdownMenuLabel>

        <DropdownMenuSeparator className="sr-only" />

        <DropdownMenuGroup>
          <ColorSchemeButton value={colorSchemes.light}>
            <SunIcon />
            Light
          </ColorSchemeButton>

          <ColorSchemeButton value={colorSchemes.dark}>
            <MoonIcon />
            Dark
          </ColorSchemeButton>

          <ColorSchemeButton value={colorSchemes.system}>
            <MonitorIcon />
            System
          </ColorSchemeButton>
        </DropdownMenuGroup>
      </DropdownMenuContent>
    </DropdownMenu>
  );
}
</file>

<file path="app/features/landing/description.tsx">
import {
  AccessibilityIcon,
  PackageIcon,
  PaintbrushIcon,
  PaletteIcon,
  PlugIcon,
} from 'lucide-react';

import { cn } from '~/lib/utils';

const featureIconMap = {
  'zero-dependencies': PackageIcon,
  'css-performance': PaletteIcon,
  accessibility: AccessibilityIcon,
  theming: PaintbrushIcon,
  'framework-agnostic': PlugIcon,
};

const features = {
  'zero-dependencies': {
    title: '–≠–º–ø–∞—Ç–∏—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏',
    description:
      'Easyble –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –º—è–≥–∫–∏–µ –∏ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã, –∫–æ–≥–¥–∞ –≤—ã –ø–∏—à–µ—Ç–µ –∑–∞–¥–∞—á–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —á—Ç–æ–±—ã –≤ —Ç–µ–∫—Å—Ç–µ –±—ã–ª–æ –º–µ–Ω—å—à–µ —Ä–µ–∑–∫–æ—Å—Ç–∏ –∏ –±–æ–ª—å—à–µ —è—Å–Ω–æ—Å—Ç–∏.',
  },
  'css-performance': {
    title: '–ó–∞–±–æ—Ç–∞ –æ –∫–æ–º–∞–Ω–¥–µ',
    description:
      '–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ–º–æ–≥–∞–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç, –Ω–∞–≥—Ä—É–∑–∫—É –∏ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–µ–¥–ª–∞–π–Ω—ã –∏ —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏.',
  },
  accessibility: {
    title: '–ò–ò –∫–∞–∫ –±–µ—Ä–µ–∂–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫',
    description:
      '–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –ø–æ–º–æ–≥–∞–µ—Ç –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –∏ —É—Ç–æ—á–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏, –Ω–æ –Ω–µ –Ω–∞–≤—è–∑—ã–≤–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –∏ –Ω–µ –ø–æ–¥–º–µ–Ω—è–µ—Ç –∂–∏–≤–æ–µ –æ–±—â–µ–Ω–∏–µ.',
  },
  theming: {
    title: '–õ—ë–≥–∫–∏–π —Ñ–æ–∫—É—Å –Ω–∞ –≤–∞–∂–Ω–æ–º',
    description:
      '–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ: –º–∏–Ω–∏–º—É–º –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —à—É–º–∞, –º–∞–∫—Å–∏–º—É–º —Ñ–æ–∫—É—Å–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ –∫–æ–º–∞–Ω–¥—ã.',
  },
  'framework-agnostic': {
    title: '–ü—Ä–∏–≤—ã—á–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –Ω–æ–≤—ã–π —Ç–æ–Ω',
    description:
      '–í—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Å–ø—Ä–∏–Ω—Ç—ã –∏ –≤–µ–¥—ë—Ç–µ –∫–æ–ª–æ–Ω–∫–∏, –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ –ø–æ‚Äë—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏ ‚Äî –±–µ–∑ –ø–∞—Å—Å–∏–≤–Ω–æ–π –∞–≥—Ä–µ—Å—Å–∏–∏ –∏ –º–∏–∫—Ä–æ–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞.',
  },
};

const imageClassNames =
  'border-border w-3xl max-w-none rounded-xl border sm:w-228 md:-ml-4 lg:-ml-0';

export function Description() {
  return (
    <div className="py-24 sm:py-32">
      <div className="px-4">
        <div className="mx-auto grid max-w-2xl grid-cols-1 items-center gap-x-8 gap-y-16 sm:gap-y-20 lg:mx-0 lg:max-w-none lg:grid-cols-2">
          <div className="lg:pr-8">
            <div className="lg:max-w-xl">
              <h2 className="text-primary text-base font-semibold">
                –ü–æ—á–µ–º—É –∫–æ–º–∞–Ω–¥–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è Easyble
              </h2>

              <p className="text-foreground mt-2 text-4xl font-semibold tracking-tight text-pretty sm:text-5xl">
                –¢–∞—Å–∫‚Äë–º–µ–Ω–µ–¥–∂–µ—Ä —Å —ç–º–ø–∞—Ç–∏–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
              </p>

              <p className="text-muted-foreground mt-6 text-lg/8">
                Easyble –ø–æ–º–æ–≥–∞–µ—Ç –ø–∏—Å–∞—Ç—å –∑–∞–¥–∞—á–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –∏—Ö —Ö–æ—Ç–µ–ª–æ—Å—å —á–∏—Ç–∞—Ç—å:
                –±–µ–∑ –Ω–∞–µ–∑–¥–æ–≤, –Ω–µ–¥–æ—Å–∫–∞–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –ª–∏—à–Ω–µ–≥–æ —Å—Ç—Ä–µ—Å—Å–∞. –≠—Ç–æ —Ä–∞–±–æ—á–µ–µ
                –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ —É–≤–∞–∂–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å.
              </p>

              <dl className="text-muted-foreground mt-10 max-w-xl space-y-8 text-base/7 lg:max-w-none">
                {Object.entries(features).map(([key, feature]) => {
                  const Icon =
                    featureIconMap[key as keyof typeof featureIconMap];
                  return (
                    <div key={feature.title} className="relative pl-9">
                      <dt className="text-foreground inline font-semibold">
                        <Icon
                          aria-hidden="true"
                          className="text-primary absolute top-1 left-1 size-5"
                        />
                        {feature.title}
                      </dt>{' '}
                      <dd className="inline">{feature.description}</dd>
                    </div>
                  );
                })}
              </dl>
            </div>
          </div>

          <img
            alt="–î–æ—Å–∫–∞ –∑–∞–¥–∞—á Easyble (—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞)"
            className={cn(imageClassNames, 'dark:hidden')}
            height={1442}
            src="/images/app-light.png"
            width={2432}
          />

          <img
            alt="–î–æ—Å–∫–∞ –∑–∞–¥–∞—á Easyble (—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞)"
            className={cn(imageClassNames, 'hidden dark:block')}
            height={1442}
            src="/images/app-dark.png"
            width={2432}
          />
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/features/landing/faq.tsx">
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from '~/components/ui/accordion';

const faqItems = [
  {
    question: '–î–ª—è –∫–æ–≥–æ —Å–¥–µ–ª–∞–Ω Easyble?',
    answer:
      'Easyble —Å–æ–∑–¥–∞—ë—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã—Ö, –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –∏ —Ç–µ—Ö–∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–º –≤–∞–∂–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ —É—Å–ø–µ–≤–∞—Ç—å, –Ω–æ –∏ –Ω–µ –≤—ã–≥–æ—Ä–∞—Ç—å: –∫–æ–≥–¥–∞ —Ç–æ–Ω –∑–∞–¥–∞—á –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –Ω–µ –º–µ–Ω—å—à–µ, —á–µ–º —Å—Ä–æ–∫–∏.',
  },
  {
    question: '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏ Easyble –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç?',
    answer:
      '–î–∞. –ò–ò –≤ Easyble –ø–æ–º–æ–≥–∞–µ—Ç –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –±–æ–ª–µ–µ –º—è–≥–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ, –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ–ø–∏—Å–∞–Ω–∏–π –∏ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è, –Ω–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –∑–∞ –ª—é–¥—å–º–∏.',
  },
  {
    question: '–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç Easyble?',
    answer:
      'Easyble ‚Äî –ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥. –°–µ–π—á–∞—Å –º—ã –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ; —Ç–æ—á–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –∏ –ø–ª–∞–Ω—ã –ø–æ—è–≤—è—Ç—Å—è –±–ª–∏–∂–µ –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É.',
  },
  {
    question: '–ß–µ–º Easyble –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥—Ä—É–≥–∏—Ö —Ç–∞—Å–∫‚Äë–º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤?',
    answer:
      '–í —Ü–µ–Ω—Ç—Ä–µ Easyble ‚Äî —ç–º–ø–∞—Ç–∏—è –∏ —è–∑—ã–∫. –ú—ã –ø–æ–º–æ–≥–∞–µ–º –ø–∏—Å–∞—Ç—å –∑–∞–¥–∞—á–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –≤ –Ω–∏—Ö –º–µ–Ω—å—à–µ –±—ã–ª–æ –ø–∞—Å—Å–∏–≤–Ω–æ–π –∞–≥—Ä–µ—Å—Å–∏–∏ –∏ –≤–∑–∞–∏–º–Ω—ã—Ö –ø—Ä–µ—Ç–µ–Ω–∑–∏–π –∏ –±–æ–ª—å—à–µ —è—Å–Ω–æ—Å—Ç–∏, –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –¥–æ–≤–µ—Ä–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã.',
  },
];

export function FAQ() {
  return (
    <section className="px-4 py-24">
      <div className="mx-auto max-w-4xl">
        <h2 className="text-primary mb-10 text-3xl font-semibold">
          –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
        </h2>

        <Accordion type="single" collapsible>
          {faqItems.map((item, index) => (
            <AccordionItem key={item.question} value={`item-${index}`}>
              <AccordionTrigger>{item.question}</AccordionTrigger>

              <AccordionContent className="text-muted-foreground">
                {item.answer}
              </AccordionContent>
            </AccordionItem>
          ))}
        </Accordion>
      </div>
    </section>
  );
}
</file>

<file path="app/features/landing/footer.tsx">
import type { ComponentProps } from 'react';

import { cn } from '~/lib/utils';
import { ThemeToggle } from '../color-scheme/theme-toggle';

export function Footer({ className, ...props }: ComponentProps<'footer'>) {
  return (
    <footer
      className={cn('border-t sm:h-[var(--header-height)]', className)}
      {...props}
    >
      <div className="container mx-auto flex h-full flex-col items-center justify-between gap-4 px-4 py-4 sm:flex-row md:py-0">
        <div className="flex items-center gap-3">
          <ThemeToggle />
          <span className="text-sm text-muted-foreground">
            –°–≤–µ—Ç–ª–∞—è –∏ —Ç—ë–º–Ω–∞—è —Ç–µ–º—ã ‚Äî –ø–æ–¥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã.
          </span>
        </div>

        <div className="flex items-center gap-2 text-sm text-muted-foreground">
          <span>¬© 2025 Easyble. –≠–º–ø–∞—Ç–∏—á–Ω—ã–π —Ç–∞—Å–∫‚Äë–º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –∫–æ–º–∞–Ω–¥.</span>
        </div>
      </div>
    </footer>
  );
}
</file>

<file path="app/features/teams/actions.ts">
'use server';

import { redirect } from 'next/navigation';
import { revalidatePath } from 'next/cache';
import prisma from '~/lib/prisma';

export async function createTeam(formData: FormData) {
  const name = (formData.get('name') as string | null)?.trim();

  if (!name) {
    throw new Error('Team name is required');
  }

  let user = await prisma.user.findFirst();
  if (!user) {
    try {
      user = await prisma.user.create({
        data: {
          email: 'test@example.com',
          name: 'Test User',
        },
      });
    } catch {
      user = await prisma.user.findFirst();
    }
  }

  if (!user) throw new Error('No user found and failed to create one');

  const team = await prisma.team.create({
    data: {
      name,
      ownerId: user.id,
    },
  });

  redirect(`/projects/new?team=${team.id}`);
}

export async function updateTeam(formData: FormData) {
  const id = (formData.get('teamId') as string | null)?.trim();
  const name = (formData.get('name') as string | null)?.trim();

  if (!id || !name) {
    return;
  }

  // updateMany –Ω–µ –∫–∏–¥–∞–µ—Ç –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –∑–∞–ø–∏—Å—å —É–∂–µ —É–¥–∞–ª–µ–Ω–∞
  await prisma.team.updateMany({
    where: { id },
    data: { name },
  });

  revalidatePath('/projects');
}

export async function deleteTeam(formData: FormData) {
  const id = (formData.get('teamId') as string | null)?.trim();
  if (!id) return;

  // –û—Ç–≤—è–∑—ã–≤–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã –æ—Ç –∫–æ–º–∞–Ω–¥—ã, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ FK‚Äë–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
  await prisma.project.updateMany({
    where: { teamId: id },
    data: { teamId: null },
  });

  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É, –¥–∞–∂–µ –µ—Å–ª–∏ –µ—ë —É–∂–µ –Ω–µ—Ç
  await prisma.team.deleteMany({
    where: { id },
  });

  revalidatePath('/projects');
}
</file>

<file path="app/projects/new/page.tsx">
import {
  FolderKanban,
  SquareKanban,
  SquareDashedKanban,
  Briefcase,
  BriefcaseBusiness,
  BriefcaseMedical,
  Folder,
  FolderOpen,
  ClipboardList,
  ClipboardCheck,
  Target,
  Rocket,
  Layers,
  Cat,
} from "lucide-react"
import { createProject } from "~/features/projects/actions"

const ICON_OPTIONS = [
  { value: "FolderKanban", Icon: FolderKanban },
  { value: "SquareKanban", Icon: SquareKanban },
  { value: "SquareDashedKanban", Icon: SquareDashedKanban },
  { value: "Briefcase", Icon: Briefcase },
  { value: "BriefcaseBusiness", Icon: BriefcaseBusiness },
  { value: "BriefcaseMedical", Icon: BriefcaseMedical },
  { value: "Folder", Icon: Folder },
  { value: "FolderOpen", Icon: FolderOpen },
  { value: "ClipboardList", Icon: ClipboardList },
  { value: "ClipboardCheck", Icon: ClipboardCheck },
  { value: "Target", Icon: Target },
  { value: "Rocket", Icon: Rocket },
  { value: "Layers", Icon: Layers },
  { value: "Cat", Icon: Cat },
] as const

type NewProjectPageProps = {
  searchParams: Promise<{ [key: string]: string | string[] | undefined }>
}

export default async function NewProjectPage({ searchParams }: NewProjectPageProps) {
  const resolvedSearchParams = await searchParams
  const teamId =
    typeof resolvedSearchParams.team === "string" ? resolvedSearchParams.team : ""

  return (
    <div className="h-full flex flex-col">
      <div className="p-4 border-b">
        <h1 className="text-2xl font-bold leading-tight">
          New project
        </h1>
        <p className="text-sm text-muted-foreground">
          Create a project and its first board.
        </p>
      </div>

      <div className="flex-1 overflow-auto p-4">
        <form action={createProject} className="space-y-6 max-w-md">
          <input type="hidden" name="teamId" value={teamId} />
          <div className="space-y-2">
            <label
              htmlFor="title"
              className="text-sm font-medium text-foreground"
            >
              Project name
            </label>
            <input
              id="title"
              name="title"
              type="text"
              required
              placeholder="Client roadmap"
              className="w-full rounded-md border px-3 py-2 text-sm bg-background"
            />
          </div>

          <div className="space-y-3">
            <p className="text-sm font-medium text-foreground">
              Project icon
            </p>
            <div className="grid grid-cols-7 gap-3">
              {ICON_OPTIONS.map(({ value, Icon }) => (
                <label key={value} className="cursor-pointer">
                  <input
                    type="radio"
                    name="icon"
                    value={value}
                    defaultChecked={value === "FolderKanban"}
                    className="peer sr-only"
                  />
                  <div className="flex items-center justify-center rounded-md border p-2 transition-colors peer-checked:border-primary peer-checked:bg-primary/10">
                    <Icon className="h-5 w-5" />
                  </div>
                </label>
              ))}
            </div>
          </div>

          <button
            type="submit"
            className="inline-flex items-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90"
          >
            Create project
          </button>
        </form>
      </div>
    </div>
  )
}
</file>

<file path="components/ui/sidebar.tsx">
"use client"

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"
import { PanelLeftIcon } from "lucide-react"

import { useIsMobile } from "@/hooks/use-mobile"
import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Separator } from "@/components/ui/separator"
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
} from "@/components/ui/sheet"
import { Skeleton } from "@/components/ui/skeleton"
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip"

const SIDEBAR_COOKIE_NAME = "sidebar_state"
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7
const SIDEBAR_WIDTH = "16rem"
const SIDEBAR_WIDTH_MOBILE = "18rem"
const SIDEBAR_WIDTH_ICON = "3rem"
const SIDEBAR_KEYBOARD_SHORTCUT = "b"

type SidebarContextProps = {
  state: "expanded" | "collapsed"
  open: boolean
  setOpen: (open: boolean) => void
  openMobile: boolean
  setOpenMobile: (open: boolean) => void
  isMobile: boolean
  toggleSidebar: () => void
}

const SidebarContext = React.createContext<SidebarContextProps | null>(null)

function useSidebar() {
  const context = React.useContext(SidebarContext)
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider.")
  }

  return context
}

function SidebarProvider({
  defaultOpen = true,
  open: openProp,
  onOpenChange: setOpenProp,
  className,
  style,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  defaultOpen?: boolean
  open?: boolean
  onOpenChange?: (open: boolean) => void
}) {
  const isMobile = useIsMobile()
  const [openMobile, setOpenMobile] = React.useState(false)

  // This is the internal state of the sidebar.
  // We use openProp and setOpenProp for control from outside the component.
  const [_open, _setOpen] = React.useState(defaultOpen)
  const open = openProp ?? _open
  const setOpen = React.useCallback(
    (value: boolean | ((value: boolean) => boolean)) => {
      const openState = typeof value === "function" ? value(open) : value
      if (setOpenProp) {
        setOpenProp(openState)
      } else {
        _setOpen(openState)
      }

      // This sets the cookie to keep the sidebar state.
      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`
    },
    [setOpenProp, open]
  )

  // Helper to toggle the sidebar.
  const toggleSidebar = React.useCallback(() => {
    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)
  }, [isMobile, setOpen, setOpenMobile])

  // Adds a keyboard shortcut to toggle the sidebar.
  React.useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      if (
        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
        (event.metaKey || event.ctrlKey)
      ) {
        event.preventDefault()
        toggleSidebar()
      }
    }

    window.addEventListener("keydown", handleKeyDown)
    return () => window.removeEventListener("keydown", handleKeyDown)
  }, [toggleSidebar])

  // We add a state so that we can do data-state="expanded" or "collapsed".
  // This makes it easier to style the sidebar with Tailwind classes.
  const state = open ? "expanded" : "collapsed"

  const contextValue = React.useMemo<SidebarContextProps>(
    () => ({
      state,
      open,
      setOpen,
      isMobile,
      openMobile,
      setOpenMobile,
      toggleSidebar,
    }),
    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]
  )

  return (
    <SidebarContext.Provider value={contextValue}>
      <TooltipProvider delayDuration={0}>
        <div
          data-slot="sidebar-wrapper"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH,
              "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
              ...style,
            } as React.CSSProperties
          }
          className={cn(
            "group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex h-svh w-full",
            className
          )}
          {...props}
        >
          {children}
        </div>
      </TooltipProvider>
    </SidebarContext.Provider>
  )
}

function Sidebar({
  side = "left",
  variant = "sidebar",
  collapsible = "offcanvas",
  className,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  side?: "left" | "right"
  variant?: "sidebar" | "floating" | "inset"
  collapsible?: "offcanvas" | "icon" | "none"
}) {
  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()

  if (collapsible === "none") {
    return (
      <div
        data-slot="sidebar"
        className={cn(
          "bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",
          className
        )}
        {...props}
      >
        {children}
      </div>
    )
  }

  if (isMobile) {
    return (
      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
        <SheetContent
          data-sidebar="sidebar"
          data-slot="sidebar"
          data-mobile="true"
          className="bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH_MOBILE,
            } as React.CSSProperties
          }
          side={side}
        >
          <SheetHeader className="sr-only">
            <SheetTitle>Sidebar</SheetTitle>
            <SheetDescription>Displays the mobile sidebar.</SheetDescription>
          </SheetHeader>
          <div className="flex h-full w-full flex-col">{children}</div>
        </SheetContent>
      </Sheet>
    )
  }

  return (
    <div
      className="group peer text-sidebar-foreground hidden md:block"
      data-state={state}
      data-collapsible={state === "collapsed" ? collapsible : ""}
      data-variant={variant}
      data-side={side}
      data-slot="sidebar"
    >
      {/* This is what handles the sidebar gap on desktop */}
      <div
        data-slot="sidebar-gap"
        className={cn(
          "relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear",
          "group-data-[collapsible=offcanvas]:w-0",
          "group-data-[side=right]:rotate-180",
          variant === "floating" || variant === "inset"
            ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon)"
        )}
      />
      <div
        data-slot="sidebar-container"
        className={cn(
          "fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",
          side === "left"
            ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
            : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
          // Adjust the padding for floating and inset variants.
          variant === "floating" || variant === "inset"
            ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",
          className
        )}
        {...props}
      >
        <div
          data-sidebar="sidebar"
          data-slot="sidebar-inner"
          className="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"
        >
          {children}
        </div>
      </div>
    </div>
  )
}

function SidebarTrigger({
  className,
  onClick,
  ...props
}: React.ComponentProps<typeof Button>) {
  const { toggleSidebar } = useSidebar()

  return (
    <Button
      data-sidebar="trigger"
      data-slot="sidebar-trigger"
      variant="ghost"
      size="icon"
      className={cn("size-7", className)}
      onClick={(event) => {
        onClick?.(event)
        toggleSidebar()
      }}
      {...props}
    >
      <PanelLeftIcon />
      <span className="sr-only">Toggle Sidebar</span>
    </Button>
  )
}

function SidebarRail({ className, ...props }: React.ComponentProps<"button">) {
  const { toggleSidebar } = useSidebar()

  return (
    <button
      data-sidebar="rail"
      data-slot="sidebar-rail"
      aria-label="Toggle Sidebar"
      tabIndex={-1}
      onClick={toggleSidebar}
      title="Toggle Sidebar"
      className={cn(
        "hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex",
        "in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize",
        "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
        "hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full",
        "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
        "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
        className
      )}
      {...props}
    />
  )
}

function SidebarInset({ className, ...props }: React.ComponentProps<"main">) {
  return (
    <main
      data-slot="sidebar-inset"
      className={cn(
        "bg-background relative flex w-full min-w-0 flex-1 flex-col",
        "md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",
        className
      )}
      {...props}
    />
  )
}

function SidebarInput({
  className,
  ...props
}: React.ComponentProps<typeof Input>) {
  return (
    <Input
      data-slot="sidebar-input"
      data-sidebar="input"
      className={cn("bg-background h-8 w-full shadow-none", className)}
      {...props}
    />
  )
}

function SidebarHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-header"
      data-sidebar="header"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  )
}

function SidebarFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-footer"
      data-sidebar="footer"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  )
}

function SidebarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof Separator>) {
  return (
    <Separator
      data-slot="sidebar-separator"
      data-sidebar="separator"
      className={cn("bg-sidebar-border mx-2 w-auto", className)}
      {...props}
    />
  )
}

function SidebarContent({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-content"
      data-sidebar="content"
      className={cn(
        "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
        className
      )}
      {...props}
    />
  )
}

function SidebarGroup({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group"
      data-sidebar="group"
      className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
      {...props}
    />
  )
}

function SidebarGroupLabel({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<"div"> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "div"

  return (
    <Comp
      data-slot="sidebar-group-label"
      data-sidebar="group-label"
      className={cn(
        "text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
        className
      )}
      {...props}
    />
  )
}

function SidebarGroupAction({
  className,
  asChild = false,
  showOnHover = false,
  ...props
}: React.ComponentProps<"button"> & { asChild?: boolean; showOnHover?: boolean }) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="sidebar-group-action"
      data-sidebar="group-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0",
        className
      )}
      {...props}
    />
  )
}

function SidebarGroupContent({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group-content"
      data-sidebar="group-content"
      className={cn("w-full text-sm", className)}
      {...props}
    />
  )
}

function SidebarMenu({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu"
      data-sidebar="menu"
      className={cn("flex w-full min-w-0 flex-col gap-1", className)}
      {...props}
    />
  )
}

function SidebarMenuItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-item"
      data-sidebar="menu-item"
      className={cn("group/menu-item relative", className)}
      {...props}
    />
  )
}

const sidebarMenuButtonVariants = cva(
  "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
        outline:
          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
      },
      size: {
        default: "h-8 text-sm",
        sm: "h-7 text-xs",
        lg: "h-12 text-sm group-data-[collapsible=icon]:p-0!",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function SidebarMenuButton({
  asChild = false,
  isActive = false,
  variant = "default",
  size = "default",
  tooltip,
  className,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean
  isActive?: boolean
  tooltip?: string | React.ComponentProps<typeof TooltipContent>
} & VariantProps<typeof sidebarMenuButtonVariants>) {
  const Comp = asChild ? Slot : "button"
  const { isMobile, state } = useSidebar()

  const button = (
    <Comp
      data-slot="sidebar-menu-button"
      data-sidebar="menu-button"
      data-size={size}
      data-active={isActive}
      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
      {...props}
    />
  )

  if (!tooltip) {
    return button
  }

  if (typeof tooltip === "string") {
    tooltip = {
      children: tooltip,
    }
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>
      <TooltipContent
        side="right"
        align="center"
        hidden={state !== "collapsed" || isMobile}
        {...tooltip}
      />
    </Tooltip>
  )
}

function SidebarMenuAction({
  className,
  asChild = false,
  showOnHover = false,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean
  showOnHover?: boolean
}) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="sidebar-menu-action"
      data-sidebar="menu-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0",
        className
      )}
      {...props}
    />
  )
}

function SidebarMenuBadge({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-menu-badge"
      data-sidebar="menu-badge"
      className={cn(
        "text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none",
        "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props}
    />
  )
}

function SidebarMenuSkeleton({
  className,
  showIcon = false,
  ...props
}: React.ComponentProps<"div"> & {
  showIcon?: boolean
}) {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`
  }, [])

  return (
    <div
      data-slot="sidebar-menu-skeleton"
      data-sidebar="menu-skeleton"
      className={cn("flex h-8 items-center gap-2 rounded-md px-2", className)}
      {...props}
    >
      {showIcon && (
        <Skeleton
          className="size-4 rounded-md"
          data-sidebar="menu-skeleton-icon"
        />
      )}
      <Skeleton
        className="h-4 max-w-(--skeleton-width) flex-1"
        data-sidebar="menu-skeleton-text"
        style={
          {
            "--skeleton-width": width,
          } as React.CSSProperties
        }
      />
    </div>
  )
}

function SidebarMenuSub({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu-sub"
      data-sidebar="menu-sub"
      className={cn(
        "border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props}
    />
  )
}

function SidebarMenuSubItem({
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-sub-item"
      data-sidebar="menu-sub-item"
      className={cn("group/menu-sub-item relative", className)}
      {...props}
    />
  )
}

function SidebarMenuSubButton({
  asChild = false,
  size = "md",
  isActive = false,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean
  size?: "sm" | "md"
  isActive?: boolean
}) {
  const Comp = asChild ? Slot : "a"

  return (
    <Comp
      data-slot="sidebar-menu-sub-button"
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
        "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
        size === "sm" && "text-xs",
        size === "md" && "text-sm",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props}
    />
  )
}

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
}
</file>

<file path="components/theme-provider.tsx">
"use client"

import * as React from "react"
import { ThemeProvider as NextThemesProvider } from "next-themes"

type ThemeProviderProps = React.ComponentProps<typeof NextThemesProvider>

export function ThemeProvider({ children, ...props }: ThemeProviderProps) {
  return (
    <NextThemesProvider
      attribute="class"
      defaultTheme="system"
      enableSystem
      disableTransitionOnChange
      {...props}
    >
      {children}
    </NextThemesProvider>
  )
}
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts

/generated/prisma
</file>

<file path="README.md">
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "baseUrl": ".",
    "paths": {
      "@/*": [
        "./*",
        "./registry/*"
      ],
      "~/*": [
        "./app/*",
        "./lib/*"
      ]
    },
    "plugins": [
      {
        "name": "next"
      }
    ]
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": [
    "node_modules"
  ]
}
</file>

<file path="app/features/kanban/components/new-card.tsx">
'use client';

import { useMemo, useState } from 'react';
import { CheckIcon, MoreVerticalIcon } from 'lucide-react';
import { KanbanBoardCard } from '@/new-york/ui/kanban';
import { Input } from '~/components/ui/input';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '~/components/ui/dropdown-menu';

const MAX_TITLE_LENGTH = 250;

type NewCardFormProps = {
  columnId: string;
  onAddCard: (columnId: string, content: string) => void;
  onCancel: () => void;
};

export function NewCardForm({ columnId, onAddCard, onCancel }: NewCardFormProps) {
  const [content, setContent] = useState('');
  const [isCompleted, setIsCompleted] = useState(false);

  const initials = useMemo(() => {
    const src = content || '??';
    return (
      src
        .trim()
        .split(/\s+/)
        .slice(0, 2)
        .map((p) => p[0] || '')
        .join('')
        .toUpperCase()
        .slice(0, 2) || '?'
    );
  }, [content]);

  function handleChange(value: string) {
    if (value.length > MAX_TITLE_LENGTH) {
      setContent(value.slice(0, MAX_TITLE_LENGTH));
    } else {
      setContent(value);
    }
  }

  function submitNewCard(e: React.FormEvent<HTMLFormElement> | React.KeyboardEvent) {
    e.preventDefault();
    const trimmed = content.trim();
    if (!trimmed) return;
    onAddCard(columnId, trimmed);
    setContent('');
    onCancel();
  }

  const remaining = Math.max(0, MAX_TITLE_LENGTH - content.length);

  return (
    <form className="px-2 pt-1" onSubmit={submitNewCard}>
      <KanbanBoardCard data={{ id: 'new' }} className="space-y-2">
        <Input
          autoFocus
          value={content}
          onChange={(e) => handleChange(e.target.value)}
          onKeyDown={(e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              submitNewCard(e);
            }
            if (e.key === 'Escape') {
              e.preventDefault();
              onCancel();
            }
          }}
          placeholder="–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞"
          className="h-auto border-none bg-transparent p-0 text-xs leading-snug shadow-none focus-visible:ring-0 focus-visible:ring-offset-0"
        />

        <div className="mt-1 flex items-center justify-between">
          <div className="flex items-center gap-1">
            <button
              type="button"
              onClick={(e) => {
                e.stopPropagation();
                setIsCompleted((prev) => !prev);
              }}
              className={`flex h-5 w-5 items-center justify-center rounded-full border text-[10px] transition-colors ${
                isCompleted
                  ? 'border-primary bg-primary text-primary-foreground'
                  : 'border-muted-foreground/40 text-muted-foreground'
              }`}
            >
              {isCompleted && <CheckIcon size={10} />}
            </button>
            <span className="text-[10px] text-muted-foreground">
              {remaining}
            </span>
          </div>

          <div className="flex items-center gap-2">
            <div className="flex h-5 w-5 items-center justify-center rounded-full bg-primary text-[9px] font-medium text-primary-foreground">
              {initials}
            </div>
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <button
                  type="button"
                  onClick={(e) => e.stopPropagation()}
                  className="flex h-5 w-5 items-center justify-center text-muted-foreground hover:text-foreground"
                >
                  <MoreVerticalIcon size={14} />
                </button>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end">
                <DropdownMenuItem
                  onClick={(e) => {
                    e.stopPropagation();
                    submitNewCard(e as any);
                  }}
                >
                  –°–æ–∑–¥–∞—Ç—å
                </DropdownMenuItem>
                <DropdownMenuItem
                  onClick={(e) => {
                    e.stopPropagation();
                    onCancel();
                  }}
                >
                  –û—Ç–º–µ–Ω–∏—Ç—å
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          </div>
        </div>
      </KanbanBoardCard>
    </form>
  );
}
</file>

<file path="app/features/landing/installation-instructions.tsx">
export function InstallationInstructions() {
  return (
    <section className="mx-auto flex max-w-xl flex-col gap-4 py-16">
      <h2 className="text-primary mb-4 text-center text-3xl font-semibold">
        –ö–∞–∫ –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Easyble
      </h2>

      <p className="text-muted-foreground text-lg text-center">
        Easyble –∑–∞–¥—É–º–∞–Ω –∫–∞–∫ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ –∑–∞–¥–∞—á–∏ –ø–∏—à—É—Ç—Å—è –±–µ—Ä–µ–∂–Ω–æ, –∞
        –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –≤ –∫–æ–º–∞–Ω–¥–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª–µ–≥—á–µ. –ü—Ä–æ—Å—Ç–æ –≤–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç, —Å–æ–∑–¥–∞–π—Ç–µ
        –ø–µ—Ä–≤—É—é –¥–æ—Å–∫—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –≤–º–µ—Å—Ç–µ —Å –ò–ò‚Äë–ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏.
      </p>
    </section>
  );
}
</file>

<file path="app/features/projects/actions.ts">
'use server';

import { redirect } from 'next/navigation';
import { revalidatePath } from 'next/cache';
import prisma from '~/lib/prisma';

export async function createProject(formData: FormData) {
  const title = (formData.get('title') as string).trim();
  const icon = ((formData.get('icon') as string | null) || 'FolderKanban').trim();
  const teamId = (formData.get('teamId') as string | null)?.trim() || null;

  let user = await prisma.user.findFirst();
  if (!user) {
    try {
      user = await prisma.user.create({
        data: {
          email: 'test@example.com',
          name: 'Test User',
        },
      });
    } catch {
      user = await prisma.user.findFirst();
    }
  }

  if (!user) throw new Error('No user found and failed to create one');

  const project = await prisma.project.create({
    data: {
      title,
      icon,
      ownerId: user.id,
      teamId: teamId && teamId.length > 0 ? teamId : null,
      boards: {
        create: {
          title: 'Main board',
          columns: {
            create: [
              { title: 'To Do', color: 'blue', order: 0 },
              { title: 'In Progress', color: 'yellow', order: 1 },
              { title: 'Done', color: 'green', order: 2 },
            ],
          },
        },
      },
    },
    include: {
      boards: {
        select: { id: true },
        orderBy: { createdAt: 'asc' },
      },
    },
  });

  const firstBoard = project.boards[0];

  redirect(`/projects/${project.id}/boards/${firstBoard.id}`);
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: –ø–æ–∫–∞ –¥–∞—ë–º –ø–æ–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ title (–∏–∫–æ–Ω–∫—É –Ω–µ —Ç—Ä–æ–≥–∞–µ–º)
export async function updateProject(formData: FormData) {
  const id = (formData.get('projectId') as string | null)?.trim();
  const title = (formData.get('title') as string | null)?.trim();

  if (!id || !title) {
    return;
  }

  await prisma.project.update({
    where: { id },
    data: { title },
  });

  // –ü–µ—Ä–µ—á–∏—Ç—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤/–±–æ—Ä–¥–æ–≤ –∏ —Ç–µ–∫—É—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  revalidatePath('/projects');
}

// –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ –≤—Å–µ–º–∏ –±–æ—Ä–¥–∞–º–∏/–∫–æ–ª–æ–Ω–∫–∞–º–∏/—Ç–∞—Å–∫–∞–º–∏
export async function deleteProject(formData: FormData) {
  const id = (formData.get('projectId') as string | null)?.trim();
  if (!id) return;

  // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –±–æ—Ä–¥—ã –ø—Ä–æ–µ–∫—Ç–∞
  const boards = await prisma.board.findMany({
    where: { projectId: id },
    select: { id: true },
  });
  const boardIds = boards.map((b) => b.id);

  if (boardIds.length > 0) {
    // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∑–∞–¥–∞—á–∏ –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º —ç—Ç–∏—Ö –±–æ—Ä–¥–æ–≤
    await prisma.task.deleteMany({
      where: {
        column: {
          boardId: { in: boardIds },
        },
      },
    });

    // –£–¥–∞–ª—è–µ–º –∫–æ–ª–æ–Ω–∫–∏ —ç—Ç–∏—Ö –±–æ—Ä–¥–æ–≤
    await prisma.column.deleteMany({
      where: { boardId: { in: boardIds } },
    });

    // –£–¥–∞–ª—è–µ–º —Å–∞–º–∏ –±–æ—Ä–¥—ã
    await prisma.board.deleteMany({
      where: { id: { in: boardIds } },
    });
  }

  // –ò –Ω–∞–∫–æ–Ω–µ—Ü –ø—Ä–æ–µ–∫—Ç
  await prisma.project.delete({
    where: { id },
  });

  revalidatePath('/projects');
}
</file>

<file path="app/globals.css">
@import "tailwindcss";
@import "tw-animate-css";
@import "simplebar-react/dist/simplebar.min.css";

@custom-variant dark {
  /* support the .dark class */
  &:where(.dark *, .dark) {
    @slot;
  }

  /* support the .system class + prefers-color-scheme */
  &:where(.system *, .system) {
    @media (prefers-color-scheme: dark) {
      @slot;
    }
  }
}

:root {

  --card: oklch(1 0 0);
  --card-foreground: oklch(0.141 0.005 285.823);

  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.141 0.005 285.823);

  --primary: oklch(0.21 0.006 285.885);
  --primary-foreground: oklch(0.985 0 0);

  --secondary: oklch(0.967 0.001 286.375);
  --secondary-foreground: oklch(0.21 0.006 285.885);

  --muted: oklch(0.967 0.001 286.375);
  --muted-foreground: oklch(0.552 0.016 285.938);

  --accent: oklch(0.967 0.001 286.375);
  --accent-foreground: oklch(0.21 0.006 285.885);

  --destructive: oklch(0.577 0.245 27.325);

  --border: oklch(0.92 0.004 286.32);
  --input: oklch(0.92 0.004 286.32);
  --ring: oklch(0.705 0.015 286.067);

  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);

  --radius: 0.625rem;
  --header-height: calc(var(--spacing) * 12 + 1px);

  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.141 0.005 285.823);
  --sidebar-primary: oklch(0.21 0.006 285.885);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.967 0.001 286.375);
  --sidebar-accent-foreground: oklch(0.21 0.006 285.885);
  --sidebar-border: oklch(0.92 0.004 286.32);
  --sidebar-ring: oklch(0.705 0.015 286.067);

  --kanban-board-circle-primary: oklch(0.439 0 0);
  --kanban-board-circle-gray:    oklch(0.5513 0.0233 264.36);
  --kanban-board-circle-red:     oklch(0.6368 0.2078 25.33);
  --kanban-board-circle-yellow:  oklch(0.7959 0.1618 86.05);
  --kanban-board-circle-green:   oklch(0.7229 0.1921 149.58);
  --kanban-board-circle-cyan:    oklch(0.7146 0.1256 215.13);
  --kanban-board-circle-blue:    oklch(0.6232 0.1879 259.80);
  --kanban-board-circle-indigo:  oklch(0.5860 0.2037 277.12);
  --kanban-board-circle-violet:  oklch(0.6059 0.2187 292.72);
  --kanban-board-circle-purple:  oklch(0.6267 0.2325 303.86);
  --kanban-board-circle-pink:    oklch(0.6559 0.2117 354.34);
  --background: oklch(1 0 0);
  --foreground: oklch(0.141 0.005 285.823);
}

.dark {
  color-scheme: dark;

  --background: oklch(0.141 0.005 285.823);
  --foreground: oklch(0.985 0 0);

  --card: oklch(0.21 0.006 285.885);
  --card-foreground: oklch(0.985 0 0);

  --popover: oklch(0.21 0.006 285.885);
  --popover-foreground: oklch(0.985 0 0);

  --primary: oklch(0.92 0.004 286.32);
  --primary-foreground: oklch(0.21 0.006 285.885);

  --secondary: oklch(0.274 0.006 286.033);
  --secondary-foreground: oklch(0.985 0 0);

  --muted: oklch(0.274 0.006 286.033);
  --muted-foreground: oklch(0.705 0.015 286.067);

  --accent: oklch(0.274 0.006 286.033);
  --accent-foreground: oklch(0.985 0 0);

  --destructive: oklch(0.704 0.191 22.216);

  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.552 0.016 285.938);

  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);

  --sidebar: oklch(0.21 0.006 285.885);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.274 0.006 286.033);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.552 0.016 285.938);

  --kanban-board-circle-primary: oklch(0.556 0 0);
  --kanban-board-circle-gray:    oklch(0.7137 0.0192 261.33);
  --kanban-board-circle-red:     oklch(0.7108 0.1660 22.21);
  --kanban-board-circle-yellow:  oklch(0.8601 0.1730 91.84);
  --kanban-board-circle-green:   oklch(0.8003 0.1823 151.70);
  --kanban-board-circle-cyan:    oklch(0.7973 0.1339 211.45);
  --kanban-board-circle-blue:    oklch(0.7135 0.1435 254.61);
  --kanban-board-circle-indigo:  oklch(0.6797 0.1586 276.96);
  --kanban-board-circle-violet:  oklch(0.7093 0.1589 293.52);
  --kanban-board-circle-purple:  oklch(0.7218 0.1766 305.51);
  --kanban-board-circle-pink:    oklch(0.7253 0.1752 349.74);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  --color-kanban-board-circle-primary: var(--kanban-board-circle-primary);
  --color-kanban-board-circle-gray:    var(--kanban-board-circle-gray);
  --color-kanban-board-circle-red:     var(--kanban-board-circle-red);
  --color-kanban-board-circle-yellow:  var(--kanban-board-circle-yellow);
  --color-kanban-board-circle-green:   var(--kanban-board-circle-green);
  --color-kanban-board-circle-cyan:    var(--kanban-board-circle-cyan);
  --color-kanban-board-circle-blue:    var(--kanban-board-circle-blue);
  --color-kanban-board-circle-indigo:  var(--kanban-board-circle-indigo);
  --color-kanban-board-circle-violet:  var(--kanban-board-circle-violet);
  --color-kanban-board-circle-purple:  var(--kanban-board-circle-purple);
  --color-kanban-board-circle-pink:    var(--kanban-board-circle-pink);

  --animate-marquee: marquee var(--duration) infinite linear;
  --animate-marquee-vertical: marquee-vertical var(--duration) linear infinite;

  @keyframes marquee {
    from { transform: translateX(0); }
    to   { transform: translateX(calc(-100% - var(--gap))); }
  }
  @keyframes marquee-vertical {
    from { transform: translateY(0); }
    to   { transform: translateY(calc(-100% - var(--gap))); }
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  html,
  body {
    @apply bg-background text-foreground m-0;
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* SimpleBar: –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç—Ä–µ–∫ –∏ –Ω–µ–≤–∏–¥–∏–º—ã–π –≤ –ø–æ–∫–æ–µ —Ç–æ–Ω–∫–∏–π –ø–æ–ª–∑—É–Ω–æ–∫ */
.simplebar-track.simplebar-vertical {
  width: 6px !important;                 /* —Ç–æ–Ω–∫–∏–π —Ç—Ä–µ–∫, –≤–∏–∑—É–∞–ª—å–Ω–æ ~3px */
  background-color: transparent !important;
}

.simplebar-scrollbar::before {
  background-color: oklch(0.705 0.015 286.067) !important; /* —Ü–≤–µ—Ç –∫–æ–ª—å—Ü–∞ */
  opacity: 0 !important;                  /* –≤ –ø–æ–∫–æ–µ –≤–æ–æ–±—â–µ –Ω–µ –≤–∏–¥–Ω–æ */
}

.simplebar-scrollbar.simplebar-visible::before {
  opacity: 0.6 !important;                /* –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ/—Ö–æ–≤–µ—Ä–µ */
}

/* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –Ω–∏–∂–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ SimpleBar, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–Ω—Ç –æ–±—Ä–µ–∑–∞–ª—Å—è —Ä–æ–≤–Ω–æ –ø–æ –≥—Ä–∞–Ω–∏—Ü–µ */
.simplebar-content,
.simplebar-content-wrapper {
  padding-bottom: 0 !important;
  margin-bottom: 0 !important;
}
</file>

<file path="app/layout.tsx">
import type { Metadata } from "next"
import { Geist, Geist_Mono } from "next/font/google"
import "./globals.css"
import { ThemeProvider } from "@/components/theme-provider"

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
})

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
})

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang="en" suppressHydrationWarning className="h-screen overflow-x-hidden">
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased bg-background text-foreground min-h-full`}
      >
        <ThemeProvider>
          {children}
        </ThemeProvider>
      </body>
    </html>
  )
}
</file>

<file path="components/nav-user.tsx">
"use client"

import * as React from "react"
import { useRouter } from "next/navigation"
import { authClient } from "~/lib/auth-client"

import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"
import {
  SidebarMenu,
  SidebarMenuButton,
  SidebarMenuItem,
} from "@/components/ui/sidebar"
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar"

export function NavUser() {
  const router = useRouter()
  const { data, isPending } = authClient.useSession()
  const sessionUser = (data as any)?.user as any

  if (isPending) {
    return (
      <SidebarMenu>
        <SidebarMenuItem>
          <SidebarMenuButton size="lg" className="opacity-70">
            <div className="flex items-center gap-2">
              <div className="flex h-8 w-8 animate-pulse rounded-full bg-muted" />
              <div className="grid flex-1 gap-1 text-left">
                <div className="h-3 w-24 rounded bg-muted" />
                <div className="h-3 w-16 rounded bg-muted" />
              </div>
            </div>
          </SidebarMenuButton>
        </SidebarMenuItem>
      </SidebarMenu>
    )
  }

  if (!sessionUser) {
    return (
      <SidebarMenu>
        <SidebarMenuItem>
          <SidebarMenuButton
            size="lg"
            className="justify-between"
            onClick={() => router.push("/sign-in")}
          >
            <span className="truncate font-semibold">Sign in</span>
          </SidebarMenuButton>
        </SidebarMenuItem>
      </SidebarMenu>
    )
  }

  const name: string =
    sessionUser.name || sessionUser.email || "User"
  const email: string = sessionUser.email || ""
  const image: string | undefined = sessionUser.image || undefined

  const initials =
    name
      .split(" ")
      .map((part: string) => part[0] || "")
      .join("")
      .slice(0, 2)
      .toUpperCase() || "U"

  const handleSignOut = async () => {
    await authClient.signOut()
    router.push("/sign-in")
  }

  return (
    <SidebarMenu>
      <SidebarMenuItem>
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <SidebarMenuButton
              size="lg"
              className="data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground"
            >
              <Avatar className="size-8">
                {image ? (
                  <AvatarImage src={image} alt={name} />
                ) : null}
                <AvatarFallback className="text-xs font-medium">
                  {initials}
                </AvatarFallback>
              </Avatar>
              <div className="grid flex-1 text-left text-sm leading-tight">
                <span className="truncate font-semibold">
                  {name}
                </span>
                {email ? (
                  <span className="truncate text-xs text-muted-foreground">
                    {email}
                  </span>
                ) : null}
              </div>
            </SidebarMenuButton>
          </DropdownMenuTrigger>
          <DropdownMenuContent
            className="w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg"
            align="start"
            side="top"
            sideOffset={8}
          >
            <DropdownMenuLabel className="flex items-center gap-2">
              <Avatar className="size-8">
                {image ? (
                  <AvatarImage src={image} alt={name} />
                ) : null}
                <AvatarFallback className="text-xs font-medium">
                  {initials}
                </AvatarFallback>
              </Avatar>
              <div className="grid flex-1 text-left text-sm leading-tight">
                <span className="truncate font-semibold">
                  {name}
                </span>
                {email ? (
                  <span className="truncate text-xs text-muted-foreground">
                    {email}
                  </span>
                ) : null}
              </div>
            </DropdownMenuLabel>
            <DropdownMenuSeparator />
            <DropdownMenuItem onClick={() => router.push("/account")}>
              Account
            </DropdownMenuItem>
            <DropdownMenuItem onClick={() => router.push("/settings")}>
              Settings
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem
              className="text-destructive focus:text-destructive"
              onClick={handleSignOut}
            >
              Sign out
            </DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      </SidebarMenuItem>
    </SidebarMenu>
  )
}
</file>

<file path="components/team-switcher.tsx">
"use client"

import * as React from "react"
import { Check, ChevronsUpDown, Plus, Cog } from "lucide-react"
import { usePathname, useRouter, useSearchParams } from "next/navigation"

import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"
import {
  SidebarMenu,
  SidebarMenuButton,
  SidebarMenuItem,
  useSidebar,
} from "@/components/ui/sidebar"
import { Dialog, DialogClose, DialogContent, DialogFooter, DialogHeader, DialogTitle } from "@/components/ui/dialog"
import { Input } from "@/components/ui/input"
import { Button } from "@/components/ui/button"
import { cn } from "@/lib/utils"
import { updateTeam, deleteTeam } from "~/features/teams/actions"

type Team = {
  id: string
  name: string
  logo: React.ElementType
  plan: string
}

export function TeamSwitcher({ teams }: { teams: Team[] }) {
  const { isMobile } = useSidebar()
  const router = useRouter()
  const pathname = usePathname()
  const searchParams = useSearchParams()

  const [teamDialog, setTeamDialog] = React.useState<Team | null>(null)

  const goToNewTeam = () => {
    router.push("/onboarding/team")
  }

  if (!teams || teams.length === 0) {
    return (
      <SidebarMenu>
        <SidebarMenuItem>
          <SidebarMenuButton
            size="lg"
            className="justify-between"
            onClick={goToNewTeam}
          >
            <div className="flex items-center gap-2">
              <div className="flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground">
                <Plus className="size-4" />
              </div>
              <div className="grid text-left text-sm leading-tight">
                <span className="truncate font-semibold">
                  Create team
                </span>
                <span className="truncate text-xs text-muted-foreground">
                  Start by creating your first workspace
                </span>
              </div>
            </div>
          </SidebarMenuButton>
        </SidebarMenuItem>
      </SidebarMenu>
    )
  }

  const currentTeamId = searchParams.get("team")
  const activeTeam =
    teams.find((t) => t.id === currentTeamId) ?? teams[0]

  const setTeam = (teamId: string) => {
    const params = new URLSearchParams(searchParams.toString())
    params.set("team", teamId)
    router.push(`${pathname}?${params.toString()}`)
  }

  return (
    <>
      <SidebarMenu>
        <SidebarMenuItem>
          <DropdownMenu>
            <DropdownMenuTrigger asChild>
              <SidebarMenuButton
                size="lg"
                className="data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground"
              >
                <div className="flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground">
                  <activeTeam.logo className="size-4" />
                </div>
                <div className="grid flex-1 text-left text-sm leading-tight">
                  <span className="truncate font-semibold">
                    {activeTeam.name}
                  </span>
                  <span className="truncate text-xs text-muted-foreground">
                    {activeTeam.plan}
                  </span>
                </div>
                <ChevronsUpDown className="ml-auto size-4" />
              </SidebarMenuButton>
            </DropdownMenuTrigger>
            <DropdownMenuContent
              className="w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg"
              align="start"
              side={isMobile ? "bottom" : "right"}
              sideOffset={4}
            >
              <DropdownMenuLabel className="text-xs text-muted-foreground">
                Teams
              </DropdownMenuLabel>
              {teams.map((team) => (
                <DropdownMenuItem
                  key={team.id}
                  onClick={() => setTeam(team.id)}
                  className="flex items-center gap-2 p-2"
                >
                  <Check
                    className={cn(
                      "size-4",
                      activeTeam.id === team.id
                        ? "opacity-100"
                        : "opacity-0",
                    )}
                  />
                  <div className="flex size-6 items-center justify-center rounded-sm border">
                    <team.logo className="size-4 shrink-0" />
                  </div>
                  <span className="flex-1 truncate">{team.name}</span>
                  <button
                    type="button"
                    onClick={(e) => {
                      e.preventDefault()
                      e.stopPropagation()
                      setTeamDialog(team)
                    }}
                    className="flex h-6 w-6 items-center justify-center rounded-md text-muted-foreground hover:bg-muted hover:text-foreground"
                    aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–∞–Ω–¥—ã"
                  >
                    <Cog className="size-4" />
                  </button>
                </DropdownMenuItem>
              ))}
              <DropdownMenuSeparator />
              <DropdownMenuItem
                className="gap-2 p-2"
                onClick={goToNewTeam}
              >
                <div className="flex size-6 items-center justify-center rounded-md border bg-background">
                  <Plus className="size-4" />
                </div>
                <div className="flex flex-col">
                  <span className="text-sm font-medium">Add team</span>
                  <span className="text-xs text-muted-foreground">
                    Create a new team
                  </span>
                </div>
              </DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        </SidebarMenuItem>
      </SidebarMenu>

      {/* –î–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã */}
      <Dialog
        open={teamDialog !== null}
        onOpenChange={(open) => {
          if (!open) setTeamDialog(null)
        }}
      >
        {teamDialog && (
          <DialogContent>
            <DialogHeader>
              <DialogTitle>Team settings</DialogTitle>
            </DialogHeader>
            <div className="space-y-4">
              <form
                action={async (formData: FormData) => {
                  await updateTeam(formData)
                  setTeamDialog(null)
                }}
                className="space-y-3"
              >
                <input
                  type="hidden"
                  name="teamId"
                  value={teamDialog.id}
                />
                <div className="space-y-1">
                  <label
                    htmlFor="team-name"
                    className="text-xs font-medium text-muted-foreground"
                  >
                    Team name
                  </label>
                  <Input
                    id="team-name"
                    name="name"
                    defaultValue={teamDialog.name}
                    required
                    className="h-8 text-sm"
                  />
                </div>
                <DialogFooter className="mt-3 flex justify-end gap-2">
                  <DialogClose asChild>
                    <Button
                      type="button"
                      variant="outline"
                      size="sm"
                    >
                      Cancel
                    </Button>
                  </DialogClose>
                  <Button type="submit" size="sm">
                    Save
                  </Button>
                </DialogFooter>
              </form>

              <form
                action={async (formData: FormData) => {
                  await deleteTeam(formData)
                  setTeamDialog(null)
                }}
              >
                <input
                  type="hidden"
                  name="teamId"
                  value={teamDialog.id}
                />
                <Button
                  type="submit"
                  variant="destructive"
                  size="sm"
                  className="w-full justify-center"
                >
                  Delete team
                </Button>
              </form>
            </div>
          </DialogContent>
        )}
      </Dialog>
    </>
  )
}
</file>

<file path="components.json">
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "app/globals.css",
    "baseColor": "zinc",
    "cssVariables": true,
    "prefix": ""
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "registries": {
    "@animate-ui": "https://animate-ui.com/r/{name}.json"
  }
}
</file>

<file path="app/features/landing/header.tsx">
'use client';

import Link from 'next/link';
import { usePathname, useRouter } from 'next/navigation';
import Image from 'next/image';
import type { ComponentProps } from 'react';

import { Button, buttonVariants } from '~/components/ui/button';
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogTrigger,
} from '~/components/ui/dialog';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '~/components/ui/dropdown-menu';
import { cn } from '~/lib/utils';
import { authClient } from '@/lib/auth-client';

export function Header({ className, ...props }: ComponentProps<'header'>) {
  const pathname = usePathname();
  const router = useRouter();
  const isExampleActive = pathname === '/example';

  const { data: session, isPending } = authClient.useSession();

  const handleGoogleSignIn = async () => {
    try {
      await authClient.signIn.social({
        provider: 'google',
      });
    } catch (error) {
      console.error('Google sign-in failed', error);
    }
  };

  const handleSignOut = async () => {
    try {
      await authClient.signOut({
        fetchOptions: {
          onSuccess: () => {
            router.push('/');
          },
        },
      });
    } catch (error) {
      console.error('Sign out failed', error);
    }
  };

  const userEmail = session?.user?.email;

  return (
    <header
      className={cn(
        'fixed top-0 left-0 z-50 w-full border-b backdrop-blur-md',
        className,
      )}
      {...props}
    >
      <div className="container mx-auto flex h-(--header-height) items-center justify-between gap-2 px-4">
        <Link
          className="flex items-center gap-2 self-center font-medium"
          href="/"
        >
          <div className="bg-primary text-primary-foreground flex size-8 items-center justify-center rounded-md sm:size-6">
            <Image
              src="/favicon.ico"
              alt="Easyble"
              width={24}
              height={24}
              className="rounded-md sm:size-4"
            />
          </div>

          <span className="hidden font-mono sm:block">Easyble</span>
        </Link>

        <nav className="flex gap-2 sm:absolute sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2">
          <Link
            href="/example"
            className={cn(
              buttonVariants({ size: 'sm', variant: 'ghost' }),
              isExampleActive && 'bg-accent text-primary',
            )}
          >
            –î–æ—Å–∫–∞
          </Link>
        </nav>

        <div className="flex gap-2">
          {session?.user ? (
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button size="sm" variant="outline">
                  {userEmail ?? '–ê–∫–∫–∞—É–Ω—Ç'}
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end">
                <DropdownMenuLabel>–ê–∫–∫–∞—É–Ω—Ç</DropdownMenuLabel>
                {userEmail && (
                  <DropdownMenuItem disabled>{userEmail}</DropdownMenuItem>
                )}
                <DropdownMenuSeparator />
                <DropdownMenuItem onClick={handleSignOut}>
                  –í—ã–π—Ç–∏
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          ) : (
            !isPending && (
              <Dialog>
                <DialogTrigger asChild>
                  <Button size="sm" variant="outline">
                    –í–æ–π—Ç–∏
                  </Button>
                </DialogTrigger>
                <DialogContent>
                  <DialogHeader>
                    <DialogTitle>–í–æ–π—Ç–∏ –≤ Easyble</DialogTitle>
                    <DialogDescription>
                      –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–≤–æ–∏ –¥–æ—Å–∫–∏ –∏ –∑–∞–¥–∞—á–∏.
                    </DialogDescription>
                  </DialogHeader>

                  <Button
                    className="mt-4 w-full"
                    variant="default"
                    onClick={handleGoogleSignIn}
                  >
                    –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
                  </Button>
                </DialogContent>
              </Dialog>
            )
          )}
        </div>
      </div>
    </header>
  );
}
</file>

<file path="app/features/landing/hero.tsx">
'use client';

import Image from 'next/image';
import Link from 'next/link';
import { BookTextIcon } from 'lucide-react';
import type { CSSProperties } from 'react';

import { Badge } from '~/components/ui/badge';
import { Button } from '~/components/ui/button';
import { cn } from '~/lib/utils';

const imageClassNames = 'border-border rounded-xl border object-contain';
const imageFadeStyle: CSSProperties = {
  WebkitMaskImage: 'linear-gradient(to bottom, black 75%, transparent)',
  maskImage: 'linear-gradient(to bottom, black 75%, transparent)',
};

export function Hero() {
  return (
    <section className="relative z-0 py-24 text-center sm:pt-32">
      <div
        className="absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80"
        aria-hidden="true"
      >
        <div
          className="from-primary to-secondary relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]"
          style={{
            clipPath:
              'polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)',
          }}
        />
      </div>

      <div className="mx-auto max-w-2xl px-4">
        <Badge className="mb-8" variant="secondary">
          –æ–Ω –∑–∞–±–æ—Ç–∏—Ç—Å—è
        </Badge>

        <h1 className="flex flex-col items-center justify-center font-mono text-4xl font-semibold sm:text-6xl">
          <span className="flex items-center text-center">
            <Image
              src="/favicon.ico"
              alt="Easyble"
              width={56}
              height={56}
              className="mr-2 rounded-xl sm:size-16"
            />
            Easyble ‚Äî
          </span>
            1-—ã–π —ç–º–ø–∞—Ç–∏—á–Ω—ã–π –∑–∞–¥–∞—á–Ω–∏–∫
        </h1>

        <p className="text-muted-foreground mt-8 text-lg sm:text-xl/8">
          <span className="relative">
            Easyble –ø–æ–º–æ–≥–∞–µ—Ç —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –±–µ—Ä–µ–∂–Ω–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ: –ò–ò –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç
            –º—è–≥–∫–∏–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç –º—ã—Å–ª–∏, —á—Ç–æ–±—ã –≤ –∫–æ–º–∞–Ω–¥–µ –±—ã–ª–æ –±–æ–ª—å—à–µ
            –¥–æ–≤–µ—Ä–∏—è –∏ —è—Å–Ω–æ—Å—Ç–∏.
          </span>
        </p>

        <div className="mt-10 flex items-center justify-center gap-2">
          <Button asChild>
            <Link href="/example">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É</Link>
          </Button>

          <Button asChild className="text-foreground" variant="link">
            <a href="...">
              –°–≤—è–∑–∞—Ç—å—Å—è
              <BookTextIcon />
            </a>
          </Button>
        </div>
      </div>

      <div className="mt-16 px-4">
        <img
          alt="–°–∫—Ä–∏–Ω—à–æ—Ç Easyble (—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞)"
          className={cn(imageClassNames, 'shadow-sm dark:hidden')}
          src="/images/app-light.png"
          style={imageFadeStyle}
        />

        <img
          alt="–°–∫—Ä–∏–Ω—à–æ—Ç Easyble (—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞)"
          className={cn(imageClassNames, 'hidden dark:block')}
          src="/images/app-dark.png"
          style={imageFadeStyle}
        />
      </div>

      <div
        className="absolute inset-x-0 top-[calc(100%-13rem)] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[calc(100%-80rem)]"
        aria-hidden="true"
      >
        <div
          className="from-primary to-secondary relative left-[calc(50%+3rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 bg-gradient-to-tr opacity-30 sm:left-[calc(50%+36rem)] sm:w-[72.1875rem]"
          style={{
            clipPath:
              'polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)',
          }}
        />
      </div>
    </section>
  );
}
</file>

<file path="components/app-sidebar.tsx">
"use client"

import * as React from "react"
import { Suspense } from "react"
import { useSearchParams } from "next/navigation"
import {
  AudioWaveform,
  Command,
  Frame,
  GalleryVerticalEnd,
  FolderKanban,
  SquareKanban,
  SquareDashedKanban,
  Briefcase,
  BriefcaseBusiness,
  BriefcaseMedical,
  Folder,
  FolderOpen,
  ClipboardList,
  ClipboardCheck,
  Target,
  Rocket,
  Layers,
  Cat,
} from "lucide-react"

import { NavMain } from "@/components/nav-main"
import { NavUser } from "@/components/nav-user"
import { TeamSwitcher } from "@/components/team-switcher"
import {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarHeader,
  SidebarRail,
} from "@/components/ui/sidebar"

type Board = {
  id: string
  title: string
}

type Project = {
  id: string
  title: string
  icon?: string
  boards?: Board[]
  teamId?: string | null
}

type Team = {
  id: string
  name: string
}

type AppSidebarProps = {
  projects?: Project[]
  teams?: Team[]
} & React.ComponentProps<typeof Sidebar>

const ICON_MAP = {
  FolderKanban,
  SquareKanban,
  SquareDashedKanban,
  Briefcase,
  BriefcaseBusiness,
  BriefcaseMedical,
  Folder,
  FolderOpen,
  ClipboardList,
  ClipboardCheck,
  Target,
  Rocket,
  Layers,
  Cat,
} as const

const TEAM_ICONS = [GalleryVerticalEnd, AudioWaveform, Command]

function AppSidebarInner({
  projects = [],
  teams = [],
  ...props
}: AppSidebarProps) {
  const searchParams = useSearchParams()
  const teamFromUrl = searchParams.get("team") || undefined

  const defaultTeamId = teams[0]?.id
  const currentTeamId = teamFromUrl ?? defaultTeamId

  const uiTeams = teams.map((team, index) => ({
    id: team.id,
    name: team.name,
    plan: "Workspace",
    logo: TEAM_ICONS[index % TEAM_ICONS.length],
  }))

  const filteredProjects =
    currentTeamId != null
      ? projects.filter((p) => p.teamId === currentTeamId)
      : projects

  const navItems = filteredProjects.map((project) => {
    const boards = project.boards ?? []
    const Icon =
      (project.icon &&
        ICON_MAP[project.icon as keyof typeof ICON_MAP]) ||
      Frame

    const teamQuery = project.teamId
      ? `?team=${project.teamId}`
      : currentTeamId
        ? `?team=${currentTeamId}`
        : ""

    return {
      title: project.title,
      url: `/projects/${project.id}${teamQuery}`,
      icon: Icon,
      isActive: false,
      items: [
        ...boards.map((board) => ({
          title: board.title,
          url: `/projects/${project.id}/boards/${board.id}${teamQuery}`,
        })),
        {
          title: "Create board",
          url: `/projects/${project.id}/boards/new${teamQuery}`,
        },
      ],
    }
  })

  return (
    <Sidebar collapsible="icon" {...props}>
      <SidebarHeader>
        <TeamSwitcher teams={uiTeams} />
      </SidebarHeader>
      <SidebarContent>
        <NavMain items={navItems} currentTeamId={currentTeamId} />
      </SidebarContent>
      <SidebarFooter>
        <NavUser />
      </SidebarFooter>
      <SidebarRail />
    </Sidebar>
  )
}

export function AppSidebar(props: AppSidebarProps) {
  return (
    <Suspense fallback={null}>
      <AppSidebarInner {...props} />
    </Suspense>
  )
}
</file>

<file path="components/nav-main.tsx">
"use client"

import * as React from "react"
import Link from "next/link"
import { ChevronRight, MoreHorizontal, Plus, type LucideIcon } from "lucide-react"
import { useRouter } from "next/navigation"

import {
  Collapsible,
  CollapsibleContent,
  CollapsibleTrigger,
} from "@/components/ui/collapsible"
import {
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupLabel,
  SidebarMenu,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
} from "@/components/ui/sidebar"
import {
  Dialog,
  DialogClose,
  DialogContent,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog"
import { Input } from "@/components/ui/input"
import { Button } from "@/components/ui/button"

import { updateProject, deleteProject } from "~/features/projects/actions"
import { updateBoard, deleteBoard } from "~/features/boards/actions"

const STORAGE_KEY = "easyble.sidebar.projects.open"

type NavItem = {
  title: string
  url: string
  icon?: LucideIcon
  isActive?: boolean
  items?: {
    title: string
    url: string
  }[]
}

// —É–±–∏—Ä–∞–µ–º query (?team=...) –∏–∑ —Å–µ–≥–º–µ–Ω—Ç–∞
function stripQuery(segment: string | undefined | null): string | null {
  if (!segment) return null
  return segment.split("?")[0] || null
}

function getProjectIdFromUrl(url: string): string | null {
  const parts = url.split("/").filter(Boolean)
  const idx = parts.indexOf("projects")
  if (idx === -1 || idx + 1 >= parts.length) return null
  return stripQuery(parts[idx + 1])
}

function getBoardIdsFromUrl(url: string): { projectId: string | null; boardId: string | null } {
  const parts = url.split("/").filter(Boolean)
  const pIdx = parts.indexOf("projects")
  const bIdx = parts.indexOf("boards")
  const projectId =
    pIdx !== -1 && pIdx + 1 < parts.length ? stripQuery(parts[pIdx + 1]) : null
  const boardId =
    bIdx !== -1 && bIdx + 1 < parts.length ? stripQuery(parts[bIdx + 1]) : null
  return { projectId, boardId }
}

export function NavMain({
  items,
  currentTeamId,
}: {
  items: NavItem[]
  currentTeamId?: string
}) {
  const router = useRouter()
  const [openMap, setOpenMap] = React.useState<Record<string, boolean>>({})

  const [projectDialog, setProjectDialog] = React.useState<{
    id: string
    title: string
  } | null>(null)

  const [boardDialog, setBoardDialog] = React.useState<{
    id: string
    projectId: string
    title: string
  } | null>(null)

  React.useEffect(() => {
    if (typeof window === "undefined") return
    try {
      const raw = window.localStorage.getItem(STORAGE_KEY)
      if (!raw) return
      const parsed = JSON.parse(raw)
      if (parsed && typeof parsed === "object") {
        setOpenMap(parsed)
      }
    } catch {
      // ignore
    }
  }, [])

  React.useEffect(() => {
    if (typeof window === "undefined") return
    try {
      window.localStorage.setItem(STORAGE_KEY, JSON.stringify(openMap))
    } catch {
      // ignore
    }
  }, [openMap])

  const handleOpenChange = (url: string, open: boolean) => {
    setOpenMap((prev) => ({ ...prev, [url]: open }))
  }

  const newProjectUrl = currentTeamId
    ? `/projects/new?team=${currentTeamId}`
    : "/projects/new"

  return (
    <>
      <SidebarGroup>
        <SidebarGroupLabel>Projects</SidebarGroupLabel>
        <SidebarGroupAction
          title="New project"
          onClick={() => router.push(newProjectUrl)}
        >
          <Plus className="h-4 w-4" />
          <span className="sr-only">New project</span>
        </SidebarGroupAction>
        <SidebarMenu>
          {items.map((item) => {
            const isOpen = openMap[item.url] ?? true
            const projectId = getProjectIdFromUrl(item.url)

            // –µ—Å—Ç—å –ª–∏ —É –ø—Ä–æ–µ–∫—Ç–∞ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –±–æ—Ä–¥
            const hasBoards =
              item.items?.some((subItem) => !subItem.url.includes("/boards/new")) ??
              false

            return (
              <Collapsible
                key={item.url}
                asChild
                open={isOpen}
                onOpenChange={(open) => handleOpenChange(item.url, open)}
                className="group/collapsible"
              >
                <SidebarMenuItem>
                  <CollapsibleTrigger asChild>
                    <SidebarMenuButton
                      tooltip={item.title}
                      className="group flex items-center gap-2"
                    >
                      {item.icon && <item.icon />}
                      <span className="flex-1 truncate">{item.title}</span>
                      {projectId && (
                        <span
                          role="button"
                          tabIndex={0}
                          onClick={(e) => {
                            e.preventDefault()
                            e.stopPropagation()
                            setProjectDialog({
                              id: projectId,
                              title: item.title,
                            })
                          }}
                          onKeyDown={(e) => {
                            if (e.key === "Enter" || e.key === " ") {
                              e.preventDefault()
                              e.stopPropagation()
                              setProjectDialog({
                                id: projectId,
                                title: item.title,
                              })
                            }
                          }}
                          className="inline-flex h-4 w-4 items-center justify-center rounded opacity-0 group-hover:opacity-100 hover:bg-muted text-muted-foreground hover:text-foreground transition-opacity"
                          aria-label="Edit project"
                        >
                          <MoreHorizontal className="h-3 w-3" />
                        </span>
                      )}
                      <ChevronRight className="ml-1 transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90" />
                    </SidebarMenuButton>
                  </CollapsibleTrigger>
                  <CollapsibleContent>
                    <SidebarMenuSub>
                      {item.items?.map((subItem) => {
                        const isCreateBoard = subItem.url.includes("/boards/new")
                        const { projectId: pId, boardId } =
                          getBoardIdsFromUrl(subItem.url)

                        return (
                          <SidebarMenuSubItem key={subItem.url}>
                            <SidebarMenuSubButton asChild>
                              {isCreateBoard ? (
                                <Link
                                  href={subItem.url}
                                  className="flex items-center gap-2 text-xs font-semibold text-muted-foreground hover:text-foreground"
                                >
                                  <span className="flex h-5 w-5 items-center justify-center rounded border border-dashed border-muted-foreground/60">
                                    <Plus className="h-3 w-3" />
                                  </span>
                                  {/* –µ—Å–ª–∏ –±–æ—Ä–¥–æ–≤ –µ—â—ë –Ω–µ—Ç ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç Create board, –∏–Ω–∞—á–µ —Ç–æ–ª—å–∫–æ –ø–ª—é—Å */}
                                  {!hasBoards && (
                                    <span>{subItem.title}</span>
                                  )}
                                </Link>
                              ) : (
                                <div className="flex w-full items-center gap-1 group/board-row">
                                  <Link
                                    href={subItem.url}
                                    className="flex min-w-0 flex-1 items-center text-xs text-foreground"
                                  >
                                    <span className="truncate">
                                      {subItem.title}
                                    </span>
                                  </Link>
                                  {pId && boardId && (
                                    <span
                                      role="button"
                                      tabIndex={0}
                                      onClick={(e) => {
                                        e.preventDefault()
                                        e.stopPropagation()
                                        setBoardDialog({
                                          id: boardId,
                                          projectId: pId,
                                          title: subItem.title,
                                        })
                                      }}
                                      onKeyDown={(e) => {
                                        if (e.key === "Enter" || e.key === " ") {
                                          e.preventDefault()
                                          e.stopPropagation()
                                          setBoardDialog({
                                            id: boardId,
                                            projectId: pId,
                                            title: subItem.title,
                                          })
                                        }
                                      }}
                                      className="inline-flex h-4 w-4 flex-shrink-0 items-center justify-center rounded opacity-0 group-hover/board-row:opacity-100 hover:bg-muted text-muted-foreground hover:text-foreground transition-opacity"
                                      aria-label="Edit board"
                                    >
                                      <MoreHorizontal className="h-3 w-3" />
                                    </span>
                                  )}
                                </div>
                              )}
                            </SidebarMenuSubButton>
                          </SidebarMenuSubItem>
                        )
                      })}
                    </SidebarMenuSub>
                  </CollapsibleContent>
                </SidebarMenuItem>
              </Collapsible>
            )
          })}
        </SidebarMenu>
      </SidebarGroup>

      {/* –î–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ */}
      <Dialog
        open={projectDialog !== null}
        onOpenChange={(open) => {
          if (!open) setProjectDialog(null)
        }}
      >
        {projectDialog && (
          <DialogContent>
            <DialogHeader>
              <DialogTitle>Edit project</DialogTitle>
            </DialogHeader>
            <div className="space-y-4">
              <form action={updateProject} className="space-y-3">
                <input
                  type="hidden"
                  name="projectId"
                  value={projectDialog.id}
                />
                <div className="space-y-1">
                  <label
                    htmlFor="project-title"
                    className="text-xs font-medium text-muted-foreground"
                  >
                    Project name
                  </label>
                  <Input
                    id="project-title"
                    name="title"
                    defaultValue={projectDialog.title}
                    required
                    className="h-8 text-sm"
                  />
                </div>
                <DialogFooter className="mt-3 flex justify-end gap-2">
                  <DialogClose asChild>
                    <Button
                      type="button"
                      variant="outline"
                      size="sm"
                    >
                      Cancel
                    </Button>
                  </DialogClose>
                  <Button type="submit" size="sm">
                    Save
                  </Button>
                </DialogFooter>
              </form>

              <form action={deleteProject}>
                <input
                  type="hidden"
                  name="projectId"
                  value={projectDialog.id}
                />
                <Button
                  type="submit"
                  variant="destructive"
                  size="sm"
                  className="w-full justify-center"
                >
                  Delete project
                </Button>
              </form>
            </div>
          </DialogContent>
        )}
      </Dialog>

      {/* –î–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å–∫–∏ */}
      <Dialog
        open={boardDialog !== null}
        onOpenChange={(open) => {
          if (!open) setBoardDialog(null)
        }}
      >
        {boardDialog && (
          <DialogContent>
            <DialogHeader>
              <DialogTitle>Edit board</DialogTitle>
            </DialogHeader>
            <div className="space-y-4">
              <form action={updateBoard} className="space-y-3">
                <input
                  type="hidden"
                  name="boardId"
                  value={boardDialog.id}
                />
                <input
                  type="hidden"
                  name="projectId"
                  value={boardDialog.projectId}
                />
                <div className="space-y-1">
                  <label
                    htmlFor="board-title"
                    className="text-xs font-medium text-muted-foreground"
                  >
                    Board name
                  </label>
                  <Input
                    id="board-title"
                    name="title"
                    defaultValue={boardDialog.title}
                    required
                    className="h-8 text-sm"
                  />
                </div>
                <DialogFooter className="mt-3 flex justify-end gap-2">
                  <DialogClose asChild>
                    <Button
                      type="button"
                      variant="outline"
                      size="sm"
                    >
                      Cancel
                    </Button>
                  </DialogClose>
                  <Button type="submit" size="sm">
                    Save
                  </Button>
                </DialogFooter>
              </form>

              <form action={deleteBoard}>
                <input
                  type="hidden"
                  name="boardId"
                  value={boardDialog.id}
                />
                <input
                  type="hidden"
                  name="projectId"
                  value={boardDialog.projectId}
                />
                <Button
                  type="submit"
                  variant="destructive"
                  size="sm"
                  className="w-full justify-center"
                >
                  Delete board
                </Button>
              </form>
            </div>
          </DialogContent>
        )}
      </Dialog>
    </>
  )
}
</file>

<file path="components/workspace-tabs.tsx">
"use client"

import { X,
  GalleryVerticalEnd,
  AudioWaveform,
  Command,
  FolderKanban,
  SquareKanban,
  SquareDashedKanban,
  Briefcase,
  BriefcaseBusiness,
  BriefcaseMedical,
  Folder,
  FolderOpen,
  ClipboardList,
  ClipboardCheck,
  Target,
  Rocket,
  Layers,
  Cat,
  Frame,
} from "lucide-react"
import { usePathname, useRouter, useSearchParams } from "next/navigation"
import * as React from "react"

import { Tabs, TabsList, TabsTrigger } from "~/components/ui/tabs"
import { cn } from "@/lib/utils"

type Board = {
  id: string
  title: string
}

type Project = {
  id: string
  title: string
  icon?: string
  boards?: Board[]
  teamId?: string | null
}

type Team = {
  id: string
  name: string
}

type Tab = {
  href: string
  title: string
}

type WorkspaceTabsProps = {
  projects?: Project[]
  teams?: Team[]
}

const ICON_MAP = {
  FolderKanban,
  SquareKanban,
  SquareDashedKanban,
  Briefcase,
  BriefcaseBusiness,
  BriefcaseMedical,
  Folder,
  FolderOpen,
  ClipboardList,
  ClipboardCheck,
  Target,
  Rocket,
  Layers,
  Cat,
} as const

const TEAM_ICONS = [GalleryVerticalEnd, AudioWaveform, Command]

function baseTitle(pathname: string): string {
  if (pathname === "/projects/new") return "New project"
  if (pathname === "/projects") return "Projects"
  if (pathname.startsWith("/projects/") && pathname.endsWith("/settings")) {
    return "Project settings"
  }
  if (pathname.startsWith("/projects/") && pathname.includes("/boards/")) {
    return "Board"
  }
  if (pathname.startsWith("/projects/")) return "Project"
  if (pathname.startsWith("/boards/")) return "Board"
  return pathname
}

function getProjectForHref(href: string, projects: Project[]): Project | undefined {
  const match = href.match(/^\/projects\/([^/]+)/)
  if (!match) return undefined
  const projectId = match[1]
  return projects.find((p) => p.id === projectId)
}

export function WorkspaceTabs({ projects = [], teams = [] }: WorkspaceTabsProps) {
  const router = useRouter()
  const pathname = usePathname()
  const searchParams = useSearchParams()
  const [tabs, setTabs] = React.useState<Tab[]>([])

  const pendingNavigationRef = React.useRef<string | null>(null)

  const teamFromUrl = searchParams.get("team") || undefined
  const defaultTeamId = teams[0]?.id
  const currentTeamId = teamFromUrl ?? defaultTeamId

  const totalBoardsInTeam = React.useMemo(() => {
    if (!currentTeamId) return 0
    return projects
      .filter((p) => p.teamId === currentTeamId)
      .reduce(
        (sum, p) => sum + (p.boards?.length ?? 0),
        0,
      )
  }, [projects, currentTeamId])

  const onlyBoardPath = React.useMemo(() => {
    if (!currentTeamId || totalBoardsInTeam !== 1) return null

    const projectWithBoard = projects.find(
      (p) => p.teamId === currentTeamId && (p.boards?.length ?? 0) > 0,
    )
    const board = projectWithBoard?.boards?.[0]

    if (!projectWithBoard || !board) return null

    return `/projects/${projectWithBoard.id}/boards/${board.id}`
  }, [projects, currentTeamId, totalBoardsInTeam])

  React.useEffect(() => {
    if (!pendingNavigationRef.current) return
    const target = pendingNavigationRef.current
    pendingNavigationRef.current = null

    if (target && target !== pathname) {
      router.push(target)
    }
  }, [pathname, router])

  React.useEffect(() => {
    if (!pathname) return

    if (pathname === "/projects") {
      setTabs([])
      return
    }

    let title = baseTitle(pathname)

    if (
      pathname.startsWith("/projects/") &&
      pathname.includes("/boards/")
    ) {
      if (typeof document !== "undefined") {
        const docTitle = document.title.trim()
        if (docTitle) {
          const full = docTitle
          title = full.length > 20 ? full.slice(0, 20) + "‚Ä¶" : full
        }
      }
    }

    setTabs((prev) => {
      const existing = prev.find((t) => t.href === pathname)

      const fromNew = prev.find((t) => t.href === "/projects/new")
      const isProject =
        pathname.startsWith("/projects/") && pathname !== "/projects/new"

      if (!existing && fromNew && isProject) {
        return prev.map((t) =>
          t.href === "/projects/new" ? { href: pathname, title } : t,
        )
      }

      if (existing) {
        if (existing.title === title) return prev
        return prev.map((t) =>
          t.href === pathname ? { ...t, title } : t,
        )
      }

      return [...prev, { href: pathname, title }]
    })
  }, [pathname])

  const closeTab = (href: string) => {
    if (onlyBoardPath && href === onlyBoardPath) {
      return
    }

    setTabs((prev) => {
      const next = prev.filter((t) => t.href !== href)

      if (href === pathname) {
        const teamFromUrlInner = searchParams.get("team") || undefined
        const defaultTeamIdInner = teams[0]?.id
        const currentTeamIdInner = teamFromUrlInner ?? defaultTeamIdInner

        let fallback: string | undefined

        if (next.length > 0) {
          fallback = next[next.length - 1]?.href
        } else {
          const teamQuery = currentTeamIdInner ? `?team=${currentTeamIdInner}` : ""
          fallback = `/projects${teamQuery}`
        }

        if (fallback && fallback !== pathname) {
          pendingNavigationRef.current = fallback
        }
      }

      return next
    })
  }

  if (!pathname || tabs.length === 0) return null

  return (
    <Tabs
      value={pathname}
      onValueChange={(value) => router.push(value)}
      className="w-full"
    >
      <TabsList className="h-8 gap-1 bg-transparent p-0">
        {tabs.map((tab) => {
          const isSingleBoardLocked =
            onlyBoardPath && tab.href === onlyBoardPath

          const projectForTab =
            tab.href.startsWith("/projects/") && tab.href.includes("/boards/")
              ? getProjectForHref(tab.href, projects)
              : undefined

          const Icon =
            projectForTab?.icon &&
            ICON_MAP[projectForTab.icon as keyof typeof ICON_MAP]
              ? ICON_MAP[projectForTab.icon as keyof typeof ICON_MAP]
              : projectForTab
                ? Frame
                : undefined

          return (
            <TabsTrigger
              key={tab.href}
              value={tab.href}
              className={cn(
                "group inline-flex items-center gap-2 rounded-md px-3 py-1 text-xs",
                "data-[state=active]:bg-background data-[state=active]:shadow-sm",
              )}
            >
              {Icon && (
                <Icon className="h-3 w-3" />
              )}
              <span className="truncate max-w-[140px]">{tab.title}</span>
              {!isSingleBoardLocked && (
                <span
                  role="button"
                  aria-label="Close tab"
                  tabIndex={-1}
                  onClick={(e) => {
                    e.stopPropagation()
                    closeTab(tab.href)
                  }}
                  className="inline-flex h-4 w-4 items-center justify-center rounded hover:bg-muted"
                >
                  <X className="h-3 w-3" />
                </span>
              )}
            </TabsTrigger>
          )
        })}
      </TabsList>
    </Tabs>
  )
}
</file>

<file path="app/features/kanban/actions.ts">
'use server';

import { revalidatePath } from 'next/cache';
import prisma from '~/lib/prisma';

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –∏–∑ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –¥–µ–ª–∞–µ–º title (<=100 —Å–∏–º–≤–æ–ª–æ–≤) –∏ description (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ >100)
function splitTaskContent(raw: string): { title: string; description: string | null } {
  const full = (raw ?? '').trim();
  if (!full) {
    return { title: '', description: null };
  }
  const title = full.slice(0, 100);
  const description = full.length > 100 ? full : null;
  return { title, description };
}

// --- Columns ---

export async function addColumn(boardId: string, projectId: string, title: string) {
  const count = await prisma.column.count({ where: { boardId } });
  await prisma.column.create({
    data: {
      boardId,
      title,
      color: 'primary',
      order: count,
    },
  });
  revalidatePath(`/projects/${projectId}/boards/${boardId}`);
}

export async function updateColumnTitle(columnId: string, title: string) {
  await prisma.column.update({
    where: { id: columnId },
    data: { title },
  });
  revalidatePath('/projects/[projectId]');
}

export async function deleteColumn(columnId: string) {
  await prisma.task.deleteMany({ where: { columnId } });
  await prisma.column.delete({ where: { id: columnId } });
  revalidatePath('/projects/[projectId]');
}

// --- Tasks ---

export async function addTask(columnId: string, content: string) {
  const { title, description } = splitTaskContent(content);

  if (!title) {
    return;
  }

  const columnWithBoard = await prisma.column.findUnique({
    where: { id: columnId },
    include: {
      board: true,
    },
  });

  if (!columnWithBoard) {
    return;
  }

  const projectId = columnWithBoard.board.projectId;

  const { _max } = await prisma.task.aggregate({
    where: {
      column: {
        board: {
          projectId,
        },
      },
    },
    _max: {
      projectTaskNumber: true,
    },
  });

  const nextProjectTaskNumber = (_max.projectTaskNumber ?? 0) + 1;

  // –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –≤–≤–µ—Ä—Ö—É –∫–æ–ª–æ–Ω–∫–∏:
  // 1) —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º order —É –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–¥–∞—á
  // 2) —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Å order = 0
  await prisma.$transaction(async (tx) => {
    await tx.task.updateMany({
      where: { columnId },
      data: { order: { increment: 1 } },
    });

    await tx.task.create({
      data: {
        columnId,
        title,
        description,
        order: 0,
        status: 'TODO',
        projectTaskNumber: nextProjectTaskNumber,
      },
    });
  });

  revalidatePath('/projects/[projectId]');
}

// –û–±–Ω–æ–≤–ª—è–µ–º –¢–û–õ–¨–ö–û –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏, –Ω–µ —Ç—Ä–æ–≥–∞—è description
export async function updateTaskTitle(taskId: string, title: string) {
  const trimmed = (title ?? '').trim();
  if (!trimmed) {
    return;
  }

  await prisma.task.update({
    where: { id: taskId },
    data: { title: trimmed },
  });

  revalidatePath('/projects/[projectId]');
}

export async function updateTaskDetails(
  taskId: string,
  payload: {
    content: string;
    assignee?: string;
    dueDate?: string | null;
    startAt?: string | null;
    endAt?: string | null;
  },
) {
  const { title, description } = splitTaskContent(payload.content);
  if (!title) {
    return;
  }

  const parseDateTime = (value?: string | null) => {
    if (!value || !value.trim()) return null;
    return new Date(value);
  };

  await prisma.task.update({
    where: { id: taskId },
    data: {
      title,
      description,
      assignee: payload.assignee?.trim() || null,
      dueDate: parseDateTime(payload.dueDate),
      startAt: parseDateTime(payload.startAt),
      endAt: parseDateTime(payload.endAt),
    },
  });

  revalidatePath('/projects/[projectId]');
}

export async function deleteTask(taskId: string) {
  await prisma.task.delete({ where: { id: taskId } });
  revalidatePath('/projects/[projectId]');
}

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏: —Å—Ç–∞—Ç—É—Å DONE + –ø–µ—Ä–µ–Ω–æ—Å –≤ Done-–∫–æ–ª–æ–Ω–∫—É –∏–ª–∏ –∞—Ä—Ö–∏–≤
export async function completeTask(taskId: string) {
  const task = await prisma.task.findUnique({
    where: { id: taskId },
    include: {
      column: {
        include: {
          board: {
            include: { columns: true },
          },
        },
      },
    },
  });

  if (!task) return;

  const projectId = task.column.board.projectId;
  const boardColumns = task.column.board.columns;

  const doneColumn = boardColumns.find((c) => {
    const t = c.title.toLowerCase();
    return (
      t === 'done' ||
      t === '–≥–æ—Ç–æ–≤–æ' ||
      t === '–≤—ã–ø–æ–ª–Ω–µ–Ω–æ' ||
      t === '–∑–∞–≤–µ—Ä—à–µ–Ω–æ'
    );
  });

  // –ï—Å–ª–∏ –∫–æ–ª–æ–Ω–∫–∏ Done –Ω–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –∞—Ä—Ö–∏–≤–∏—Ä—É–µ–º –∑–∞–¥–∞—á—É
  if (!doneColumn) {
    await prisma.task.update({
      where: { id: taskId },
      data: {
        status: 'DONE',
        archived: true,
        endAt: new Date(),
      },
    });
    revalidatePath(`/projects/${projectId}`);
    return;
  }

  // –ï—Å–ª–∏ –∫–æ–ª–æ–Ω–∫–∞ Done –µ—Å—Ç—å ‚Äî –¥–≤–∏–≥–∞–µ–º –∑–∞–¥–∞—á—É –≤ –Ω–µ—ë –Ω–∞–≤–µ—Ä—Ö
  await prisma.$transaction(async (tx) => {
    const current = await tx.task.findUnique({ where: { id: taskId } });
    if (!current) return;

    const oldColumnId = current.columnId;
    const oldOrder = current.order;

    // –°–¥–≤–∏–≥–∞–µ–º –∑–∞–¥–∞—á–∏ –≤ —Å—Ç–∞—Ä–æ–π –∫–æ–ª–æ–Ω–∫–µ
    await tx.task.updateMany({
      where: { columnId: oldColumnId, order: { gt: oldOrder } },
      data: { order: { decrement: 1 } },
    });

    // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –º–µ—Å—Ç–æ —Å–≤–µ—Ä—Ö—É –≤ Done-–∫–æ–ª–æ–Ω–∫–µ
    await tx.task.updateMany({
      where: { columnId: doneColumn.id },
      data: { order: { increment: 1 } },
    });

    // –ü–µ—Ä–µ–Ω–æ—Å–∏–º –∑–∞–¥–∞—á—É –≤ Done c order = 0
    await tx.task.update({
      where: { id: taskId },
      data: {
        columnId: doneColumn.id,
        order: 0,
        status: 'DONE',
        archived: false,
        endAt: new Date(),
      },
    });
  });

  revalidatePath(`/projects/${projectId}`);
}

export async function moveTask(
  taskId: string, 
  newColumnId: string, 
  newOrder: number, 
  projectId: string
) {
  const task = await prisma.task.findUnique({ where: { id: taskId } });
  if (!task) return;

  const oldColumnId = task.columnId;
  const oldOrder = task.order;

  if (oldColumnId === newColumnId && oldOrder === newOrder) return;

  await prisma.$transaction(async (tx) => {
    if (oldColumnId === newColumnId) {
      if (newOrder > oldOrder) {
        await tx.task.updateMany({
          where: { columnId: oldColumnId, order: { gt: oldOrder, lte: newOrder } },
          data: { order: { decrement: 1 } },
        });
      } else {
        await tx.task.updateMany({
          where: { columnId: oldColumnId, order: { gte: newOrder, lt: oldOrder } },
          data: { order: { increment: 1 } },
        });
      }
    } else {
      await tx.task.updateMany({
        where: { columnId: oldColumnId, order: { gt: oldOrder } },
        data: { order: { decrement: 1 } },
      });

      await tx.task.updateMany({
        where: { columnId: newColumnId, order: { gte: newOrder } },
        data: { order: { increment: 1 } },
      });
    }

    await tx.task.update({
      where: { id: taskId },
      data: { columnId: newColumnId, order: newOrder },
    });
  });

  revalidatePath(`/projects/${projectId}`);
}
</file>

<file path="app/projects/layout.tsx">
import type { ReactNode } from "react"
import { Suspense } from "react"
import { redirect } from "next/navigation"
import prisma from "~/lib/prisma"

import { AppSidebar } from "@/components/app-sidebar"
import { WorkspaceTabs } from "@/components/workspace-tabs"
import {
  SidebarInset,
  SidebarProvider,
  SidebarTrigger,
} from "@/components/ui/sidebar"
import { Separator } from "@/components/ui/separator"

export default async function ProjectsLayout({
  children,
}: {
  children: ReactNode
}) {
  const teamCount = await prisma.team.count()
  if (teamCount === 0) {
    redirect("/onboarding/team")
  }

  const user = await prisma.user.findFirst({
    include: {
      teams: {
        orderBy: { createdAt: "asc" },
      },
      projects: {
        include: {
          boards: {
            select: { id: true, title: true },
            orderBy: { createdAt: "asc" },
          },
        },
        orderBy: { createdAt: "asc" },
      },
    },
  })

  const projects = user?.projects ?? []
  const teams = user?.teams ?? []

  return (
    <SidebarProvider>
      <AppSidebar projects={projects} teams={teams} />
      <SidebarInset>
        <header className="flex h-[40px] shrink-0 items-center gap-2 border-b px-2">
          <div className="flex items-center gap-2">
            <SidebarTrigger className="-ml-1" />
            <Separator
              orientation="vertical"
              className="mr-2 data-[orientation=vertical]:h-4"
            />
          </div>
          <div className="flex-1 overflow-hidden">
            <Suspense fallback={null}>
              <WorkspaceTabs projects={projects} teams={teams} />
            </Suspense>
          </div>
        </header>
        <main className="flex min-h-0 flex-1 flex-col overflow-hidden">
          {children}
        </main>
      </SidebarInset>
    </SidebarProvider>
  )
}
</file>

<file path="app/projects/[projectId]/boards/[boardId]/page.tsx">
import type { Metadata } from "next"
import { notFound } from "next/navigation"
import prisma from "~/lib/prisma"
import KanbanBoardWrapper from "~/features/kanban/board"
import { Avatar, AvatarFallback } from "@/components/ui/avatar"
import { AvatarGroup } from "@/components/animate-ui/components/animate/avatar-group"

interface BoardPageProps {
  params: Promise<{
    projectId: string
    boardId: string
  }>
}

interface BoardPageRouteParams {
  params: Promise<{
    projectId: string
    boardId: string
  }>
}

export async function generateMetadata(
  { params }: BoardPageRouteParams
): Promise<Metadata> {
  const { boardId } = await params

  const board = await prisma.board.findUnique({
    where: { id: boardId },
    select: { title: true },
  })

  if (!board || !board.title) {
    return {
      title: "Project",
    }
  }

  const fullTitle = board.title
  const truncatedTitle =
    fullTitle.length > 20 ? fullTitle.slice(0, 20) + "‚Ä¶" : fullTitle

  return {
    title: truncatedTitle,
  }
}

export default async function BoardPage({ params }: BoardPageProps) {
  const { boardId } = await params

  const board = await prisma.board.findUnique({
    where: { id: boardId },
    include: {
      project: {
        include: { owner: true },
      },
      columns: {
        include: {
          tasks: {
            where: { archived: false },
            orderBy: { order: "asc" },
          },
        },
        orderBy: { order: "asc" },
      },
    },
  })

  if (!board) {
    notFound()
  }

  const project = board.project
  const owner = project.owner

  const ownerInitials =
    owner && (owner.name || owner.email)
      ? (owner.name || owner.email)!
          .split(" ")
          .map((part) => part[0])
          .join("")
          .slice(0, 2)
          .toUpperCase()
      : "?"

  const avatars = owner
    ? [
        <Avatar key={owner.id} className="h-8 w-8 border">
          <AvatarFallback>{ownerInitials}</AvatarFallback>
        </Avatar>,
      ]
    : []

  return (
    <div className="flex h-full flex-col">
      <div className="flex h-[50px] items-center border-b px-4">
        <div className="flex items-center gap-4 text-sm text-muted-foreground">
          <span>Kanban View</span>
          <AvatarGroup>
            {avatars}
          </AvatarGroup>
        </div>
      </div>

      <div className="flex flex-1 min-h-0 flex-col">
        <div
          className="flex-1 min-h-0 w-full overflow-x-auto overflow-y-hidden pl-4 pt-4 pb-0"
          style={{ height: "calc(100vh - 50px)" }}
        >
          <KanbanBoardWrapper
            project={project}
            boardId={board.id}
            columns={board.columns}
          />
        </div>
      </div>
    </div>
  )
}
</file>

<file path="app/features/kanban/components/column.tsx">
'use client';

import { MoreHorizontalIcon, PlusIcon } from 'lucide-react';
import { useState } from 'react';
import type { KanbanBoardDropDirection } from '@/new-york/ui/kanban';
import {
  KanbanBoardColumn,
  KanbanBoardColumnHeader,
  KanbanBoardColumnIconButton,
  KanbanBoardColumnList,
  KanbanBoardColumnListItem,
  KanbanBoardColumnTitle,
  KanbanColorCircle,
} from '@/new-york/ui/kanban';
import { Button } from '~/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '~/components/ui/dropdown-menu';
import { Input } from '~/components/ui/input';
import { KanbanCard } from './card';
import { NewCardForm } from './new-card';
import SimpleBar from 'simplebar-react';

type KanbanColor =
  | 'blue'
  | 'yellow'
  | 'green'
  | 'primary'
  | 'cyan'
  | 'gray'
  | 'indigo'
  | 'pink'
  | 'purple'
  | 'red'
  | 'violet';

type Card = {
  id: string;
  title: string;
  order: number;
  displayId: string;
};

type Column = {
  id: string;
  title: string;
  color: KanbanColor;
  items: Card[];
  order: number;
};

type ColumnProps = {
  column: Column;
  onAddCard: (columnId: string, content: string) => void;
  onDeleteCard: (cardId: string) => void;
  onDeleteColumn: (columnId: string) => void;
  onMoveCardToColumn: (columnId: string, index: number, card: Card) => void;
  onUpdateCardTitle: (cardId: string, title: string) => void;
  onUpdateColumnTitle: (columnId: string, title: string) => void;
  onCompleteCard: (cardId: string) => void;
  onDragCancel: (cardId: string) => void;
  onDragEnd: (cardId: string, overId: string) => void;
};

export function KanbanColumn({
  column,
  onAddCard,
  onDeleteCard,
  onDeleteColumn,
  onMoveCardToColumn,
  onUpdateCardTitle,
  onUpdateColumnTitle,
  onCompleteCard,
  onDragCancel,
  onDragEnd,
}: ColumnProps) {
  const [isEditingTitle, setIsEditingTitle] = useState(false);
  const [isAddingCard, setIsAddingCard] = useState(false);

  function handleDropOverColumn(dataTransferData: string) {
    const card = JSON.parse(dataTransferData) as Card;
    onMoveCardToColumn(column.id, 0, card);
  }

  function handleDropOverListItem(cardId: string) {
    return (dataTransferData: string, dropDirection: KanbanBoardDropDirection) => {
      const card = JSON.parse(dataTransferData) as Card;
      const currentCardIndex = column.items.findIndex((item) => item.id === card.id);
      const targetCardIndex = column.items.findIndex((item) => item.id === cardId);

      const baseIndex = dropDirection === 'top' ? targetCardIndex : targetCardIndex + 1;
      let finalIndex = baseIndex;
      if (currentCardIndex !== -1 && currentCardIndex < baseIndex) {
        finalIndex = baseIndex - 1;
      }

      const safeIndex = Math.max(0, Math.min(finalIndex, column.items.length));
      const overCard = column.items[safeIndex];

      if (card.id === overCard?.id) {
        onDragCancel(card.id);
      } else {
        onMoveCardToColumn(column.id, safeIndex, card);
        onDragEnd(card.id, overCard?.id || column.id);
      }
    };
  }

  return (
    <KanbanBoardColumn
      columnId={column.id}
      onDropOverColumn={handleDropOverColumn}
      className="w-[290px]"
    >
      <KanbanBoardColumnHeader>
        {isEditingTitle ? (
          <form
            className="w-full"
            onSubmit={(e) => {
              e.preventDefault();
              const fd = new FormData(e.currentTarget);
              onUpdateColumnTitle(column.id, fd.get('title') as string);
              setIsEditingTitle(false);
            }}
          >
            <Input
              name="title"
              defaultValue={column.title}
              autoFocus
              onBlur={() => setIsEditingTitle(false)}
            />
          </form>
        ) : (
          <>
            <KanbanBoardColumnTitle columnId={column.id}>
              <KanbanColorCircle color={column.color} />
              {column.title}
            </KanbanBoardColumnTitle>
            <div className="flex items-center gap-1">
              <DropdownMenu>
                <DropdownMenuTrigger asChild>
                  <KanbanBoardColumnIconButton>
                    <MoreHorizontalIcon />
                  </KanbanBoardColumnIconButton>
                </DropdownMenuTrigger>
                <DropdownMenuContent>
                  <DropdownMenuItem onClick={() => setIsEditingTitle(true)}>
                    Edit
                  </DropdownMenuItem>
                  <DropdownMenuItem onClick={() => onDeleteColumn(column.id)}>
                    Delete
                  </DropdownMenuItem>
                </DropdownMenuContent>
              </DropdownMenu>
              <KanbanBoardColumnIconButton onClick={() => setIsAddingCard(true)}>
                <PlusIcon />
              </KanbanBoardColumnIconButton>
            </div>
          </>
        )}
      </KanbanBoardColumnHeader>

      {isAddingCard && (
        <NewCardForm
          columnId={column.id}
          onAddCard={onAddCard}
          onCancel={() => setIsAddingCard(false)}
        />
      )}

      <div className="flex-1 min-h-0 -mb-2 overflow-hidden">
        <SimpleBar
          style={{ maxHeight: 'calc(100vh - 120px)' }}
          autoHide
        >
          <KanbanBoardColumnList className="space-y-2">
            {column.items.map((card) => (
              <KanbanBoardColumnListItem
                key={card.id}
                cardId={card.id}
                onDropOverListItem={handleDropOverListItem(card.id)}
              >
                <KanbanCard
                  card={card}
                  onDeleteCard={onDeleteCard}
                  onUpdateCardTitle={onUpdateCardTitle}
                  onCompleteCard={onCompleteCard}
                />
              </KanbanBoardColumnListItem>
            ))}
          </KanbanBoardColumnList>
        </SimpleBar>
      </div>
    </KanbanBoardColumn>
  );
}
</file>

<file path="prisma/schema.prisma">
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(cuid())
  email         String    @unique
  name          String?
  projects      Project[]
  teams         Team[]
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  emailVerified Boolean   @default(false)
  image         String?

  sessions      Session[]
  accounts      Account[]
}

model Team {
  id        String    @id @default(cuid())
  name      String
  owner     User      @relation(fields: [ownerId], references: [id])
  ownerId   String
  projects  Project[]
  createdAt DateTime  @default(now())

  @@index([ownerId])
}

model Project {
  id        String   @id @default(cuid())
  number    Int      @default(autoincrement())
  title     String
  icon      String   @default("FolderKanban")
  owner     User     @relation(fields: [ownerId], references: [id])
  ownerId   String
  team      Team?    @relation(fields: [teamId], references: [id])
  teamId    String?
  boards    Board[]
  createdAt DateTime @default(now())

  @@unique([number])
  @@index([ownerId])
  @@index([teamId])
}

model Board {
  id        String   @id @default(cuid())
  title     String
  project   Project  @relation(fields: [projectId], references: [id])
  projectId String
  columns   Column[]
  createdAt DateTime @default(now())

  @@index([projectId])
}

model Column {
  id        String   @id @default(cuid())
  title     String
  color     String
  order     Int
  board     Board    @relation(fields: [boardId], references: [id])
  boardId   String
  tasks     Task[]
  createdAt DateTime @default(now())

  @@index([boardId])
}

model Task {
  id                 String     @id @default(cuid())
  title              String
  description        String?
  status             TaskStatus @default(TODO)
  kind               TaskKind   @default(TASK)
  order              Int
  projectTaskNumber  Int        @default(0)
  assignee           String?
  dueDate            DateTime?
  startAt            DateTime?
  endAt              DateTime?
  archived           Boolean    @default(false)
  column             Column     @relation(fields: [columnId], references: [id])
  columnId           String
  createdAt          DateTime   @default(now())
  updatedAt          DateTime   @updatedAt

  @@index([columnId])
}

enum TaskStatus {
  TODO
  IN_PROGRESS
  DONE
}

enum TaskKind {
  TASK      // –æ–±—ã—á–Ω–∞—è –∑–∞–¥–∞—á–∞
  MEETING   // –≤—Å—Ç—Ä–µ—á–∞
  CALL      // —Å–æ–∑–≤–æ–Ω
}

// ===== Better Auth models =====

model Session {
  id        String   @id @default(cuid())
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  ipAddress String?
  userAgent String?

  userId String
  user   User @relation(fields: [userId], references: [id])

  @@map("session")
}

model Account {
  id                    String   @id @default(cuid())
  accountId             String   @map("providerAccountId")
  providerId            String   @map("provider")
  userId                String
  user                  User     @relation(fields: [userId], references: [id])

  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime? @map("expiresAt")
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  sessionState          String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  @@unique([providerId, accountId])
  @@map("account")
}

model Verification {
  id         String   @id @default(cuid())
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("verification")
}
</file>

<file path="package.json">
{
  "name": "easyble",
  "version": "0.1.0",
  "private": true,
  "engines": {
    "node": "22.21.1",
    "npm": "10.9.4"
  },
  "scripts": {
    "dev": "next dev -p 3100",
    "build": "next build",
    "start": "next start -p 3100",
    "lint": "eslint"
  },
  "dependencies": {
    "@floating-ui/react": "^0.27.16",
    "@paralleldrive/cuid2": "^2.3.1",
    "@prisma/client": "^6.19.0",
    "@radix-ui/react-accordion": "^1.2.11",
    "@radix-ui/react-avatar": "^1.1.11",
    "@radix-ui/react-collapsible": "^1.1.12",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-dropdown-menu": "^2.1.16",
    "@radix-ui/react-label": "^2.1.8",
    "@radix-ui/react-popover": "^1.1.15",
    "@radix-ui/react-separator": "^1.1.8",
    "@radix-ui/react-slot": "^1.2.4",
    "@radix-ui/react-tabs": "^1.1.12",
    "@radix-ui/react-tooltip": "^1.2.8",
    "better-auth": "^1.4.2",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^4.1.0",
    "lucide-react": "^0.511.0",
    "motion": "^12.23.24",
    "next": "^15.5.6",
    "next-themes": "^0.4.6",
    "react": "^18.3.1",
    "react-day-picker": "^9.11.2",
    "react-dom": "^18.3.1",
    "react-icons": "^5.5.0",
    "simplebar": "^6.3.3",
    "simplebar-react": "^3.3.2",
    "tailwind-merge": "^3.4.0",
    "zod": "^3.25.76"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "^15.5.6",
    "prisma": "^6.19.0",
    "tailwindcss": "^4",
    "tw-animate-css": "^1.4.0",
    "typescript": "^5"
  }
}
</file>

<file path="app/features/kanban/components/card.tsx">
'use client';

import { CheckIcon, MoreVerticalIcon, Trash2Icon } from 'lucide-react';
import { useEffect, useMemo, useState } from 'react';
import {
  KanbanBoardCard,
  KanbanBoardCardButton,
  KanbanBoardCardDescription,
} from '@/new-york/ui/kanban';
import { Button } from '~/components/ui/button';
import { Input } from '~/components/ui/input';
import { Textarea } from '~/components/ui/textarea';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '~/components/ui/dropdown-menu';
import { Sheet, SheetContent } from '../../../../components/ui/sheet';
import { Calendar } from '../../../../components/ui/calendar';
import { Popover, PopoverContent, PopoverTrigger } from '../../../../components/ui/popover';

const MAX_TITLE_LENGTH = 250;

type Card = {
  id: string;
  title: string;
  order: number;
  displayId: string;
};

type CardProps = {
  card: Card;
  onDeleteCard: (cardId: string) => void;
  onUpdateCardTitle: (cardId: string, title: string) => void;
  onCompleteCard: (cardId: string) => void;
};

type TaskType = 'task' | 'meeting' | 'call';

const TASK_TYPE_LABELS: Record<TaskType, string> = {
  task: '–ó–∞–¥–∞—á–∞',
  meeting: '–í—Å—Ç—Ä–µ—á–∞',
  call: '–°–æ–∑–≤–æ–Ω',
};

function formatDateLabel(date?: Date) {
  if (!date) return '–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É';
  return date.toLocaleDateString('ru-RU', {
    day: '2-digit',
    month: '2-digit',
    year: 'numeric',
  });
}

function formatTimeValue(date: Date) {
  const h = date.getHours().toString().padStart(2, '0');
  const m = date.getMinutes().toString().padStart(2, '0');
  return `${h}:${m}`;
}

export function KanbanCard({ card, onDeleteCard, onUpdateCardTitle, onCompleteCard }: CardProps) {
  const [isSheetOpen, setIsSheetOpen] = useState(false);
  const [draftTitle, setDraftTitle] = useState(card.title);
  const [isCompleted, setIsCompleted] = useState(false);
  const [description, setDescription] = useState('');
  const [comment, setComment] = useState('');

  const [taskType, setTaskType] = useState<TaskType>('task');

  const [startDate, setStartDate] = useState<Date | undefined>(undefined);
  const [startTime, setStartTime] = useState<string>('');
  const [deadlineDate, setDeadlineDate] = useState<Date | undefined>(undefined);
  const [deadlineTime, setDeadlineTime] = useState<string>('');

  const [isEditingTitle, setIsEditingTitle] = useState(false);

  useEffect(() => {
    setDraftTitle(card.title);
    setIsEditingTitle(false);
  }, [card.title]);

  const initials = useMemo(() => {
    const src = card.title || card.displayId;
    return (
      src
        .trim()
        .split(/\s+/)
        .slice(0, 2)
        .map((p) => p[0] || '')
        .join('')
        .toUpperCase()
        .slice(0, 2) || '?'
    );
  }, [card.title, card.displayId]);

  const remainingTitle = useMemo(
    () => Math.max(0, MAX_TITLE_LENGTH - draftTitle.length),
    [draftTitle],
  );

  function ensureDefaultStart() {
    if (!startDate) {
      const now = new Date();
      setStartDate(now);
      setStartTime(formatTimeValue(now));
    }
  }

  function handleSave() {
    const next = draftTitle.trim();
    if (next && next !== card.title) {
      onUpdateCardTitle(card.id, next);
    }
    setIsEditingTitle(false);
  }

  function handleTitleChange(value: string) {
    if (value.length > MAX_TITLE_LENGTH) {
      setDraftTitle(value.slice(0, MAX_TITLE_LENGTH));
    } else {
      setDraftTitle(value);
    }
  }

  function handleSendComment() {
    const trimmed = comment.trim();
    if (!trimmed) return;
    // TODO: –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
    setComment('');
  }

  function handleCompleteClick() {
    onCompleteCard(card.id);
    setIsSheetOpen(false);
  }

  return (
    <>
      <Sheet open={isSheetOpen} onOpenChange={setIsSheetOpen}>
        <SheetContent
          side="right"
          className="flex h-screen max-h-screen w-[50vw] min-w-[320px] sm:max-w-none flex-col border-l bg-background p-0"
        >
          {/* –•–µ–¥–µ—Ä */}
          <div className="border-b px-6 py-3">
            <div className="text-xs font-medium text-muted-foreground">#{card.displayId}</div>
          </div>

          {/* –¢–µ–ª–æ: –¥–≤–µ —Ä–∞–≤–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ + –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */}
          <div className="relative flex flex-1 overflow-hidden">
            <div className="pointer-events-none absolute inset-y-0 left-1/2 w-px bg-border" />

            {/* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ */}
            <div className="flex-1">
              <div className="h-full px-6 py-4 overflow-y-auto">
                <div className="space-y-5">
                  {/* –ö–Ω–æ–ø–∫–∏ –í—ã–ø–æ–ª–Ω–∏—Ç—å / –°—Ç–∞—Ä—Ç */}
                  <div className="flex items-center gap-3">
                    <Button
                      variant="outline"
                      size="sm"
                      className="h-8 px-4"
                      type="button"
                      onClick={handleCompleteClick}
                    >
                      –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </Button>
                    <Button size="sm" className="h-8 px-4" type="button">
                      –°—Ç–∞—Ä—Ç
                    </Button>
                  </div>

                  {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
                  <div className="space-y-1">
                    {isEditingTitle ? (
                      <>
                        <Textarea
                          value={draftTitle}
                          autoFocus
                          rows={3}
                          onChange={(e) => handleTitleChange(e.target.value)}
                          onBlur={handleSave}
                          onKeyDown={(e) => {
                            if (e.key === 'Enter' && !e.shiftKey) {
                              e.preventDefault();
                              handleSave();
                            }
                          }}
                          className="min-h-[72px] break-all text-base font-semibold leading-snug"
                          placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"
                        />
                        <div className="flex justify-end">
                          <span className="text-[10px] text-muted-foreground">
                            {remainingTitle}
                          </span>
                        </div>
                      </>
                    ) : (
                      <button
                        type="button"
                        onClick={() => setIsEditingTitle(true)}
                        className="flex w-full items-start rounded-md px-1 py-1 text-left hover:bg-muted/60"
                      >
                        <span className="break-all text-base font-semibold leading-snug">
                          {draftTitle || '–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏'}
                        </span>
                      </button>
                    )}
                  </div>

                  {/* –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ + —Ç–∏–ø + –î–µ–¥–ª–∞–π–Ω */}
                  <div className="space-y-4 text-xs">
                    <div className="space-y-1">
                      <div className="text-muted-foreground">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</div>
                      <Button variant="outline" size="sm" className="h-7 justify-start text-xs">
                        –ù–∞–∑–Ω–∞—á–∏—Ç—å‚Ä¶
                      </Button>
                    </div>
                    <div className="space-y-1">
                      <div className="text-muted-foreground">–¢–∏–ø</div>
                      <DropdownMenu>
                        <DropdownMenuTrigger asChild>
                          <Button
                            type="button"
                            size="sm"
                            variant="outline"
                            className="h-7 w-40 justify-between px-3 text-xs"
                          >
                            {TASK_TYPE_LABELS[taskType]}
                          </Button>
                        </DropdownMenuTrigger>
                        <DropdownMenuContent align="start">
                          <DropdownMenuItem onClick={() => setTaskType('task')}>
                            –ó–∞–¥–∞—á–∞
                          </DropdownMenuItem>
                          <DropdownMenuItem onClick={() => setTaskType('meeting')}>
                            –í—Å—Ç—Ä–µ—á–∞
                          </DropdownMenuItem>
                          <DropdownMenuItem onClick={() => setTaskType('call')}>
                            –°–æ–∑–≤–æ–Ω
                          </DropdownMenuItem>
                        </DropdownMenuContent>
                      </DropdownMenu>
                    </div>

                    {/* –î–µ–¥–ª–∞–π–Ω */}
                    <div className="space-y-1">
                      <div className="text-muted-foreground">–î–µ–¥–ª–∞–π–Ω</div>
                      <Popover>
                        <PopoverTrigger asChild>
                          <Button
                            type="button"
                            variant="outline"
                            size="sm"
                            className="w-full justify-start text-left font-normal"
                          >
                            {formatDateLabel(deadlineDate)}
                            {deadlineTime && ` ‚Ä¢ ${deadlineTime}`}
                          </Button>
                        </PopoverTrigger>
                        <PopoverContent className="w-auto p-0" align="start">
                          <div className="flex flex-col gap-2 p-3">
                            <Calendar
                              mode="single"
                              selected={deadlineDate}
                              onSelect={(date) => setDeadlineDate(date ?? deadlineDate)}
                            />
                            <Input
                              type="time"
                              value={deadlineTime}
                              onChange={(e) => setDeadlineTime(e.target.value)}
                              className="h-8 text-xs"
                            />
                          </div>
                        </PopoverContent>
                      </Popover>
                    </div>
                  </div>

                  {/* –û–ø–∏—Å–∞–Ω–∏–µ */}
                  <div className="space-y-2">
                    <div className="text-xs font-medium text-muted-foreground">–û–ø–∏—Å–∞–Ω–∏–µ</div>
                    <Textarea
                      value={description}
                      onChange={(e) => setDescription(e.target.value)}
                      placeholder="–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ‚Ä¶"
                      className="min-h-[140px] break-all text-sm leading-snug"
                    />
                  </div>

                  {/* –ù–∞—á–∞–ª–æ / –ü—Ä–æ–µ–∫—Ç / –°–æ–∑–¥–∞—Ç–µ–ª—å */}
                  <div className="space-y-4 text-xs">
                    <div className="space-y-1">
                      <div className="text-muted-foreground">–ù–∞—á–∞–ª–æ</div>
                      <Popover>
                        <PopoverTrigger asChild>
                          <Button
                            type="button"
                            variant="outline"
                            size="sm"
                            className="w-full justify-start text-left font-normal"
                            onClick={ensureDefaultStart}
                          >
                            {formatDateLabel(startDate)}
                            {startTime && ` ‚Ä¢ ${startTime}`}
                          </Button>
                        </PopoverTrigger>
                        <PopoverContent className="w-auto p-0" align="start">
                          <div className="flex flex-col gap-2 p-3">
                            <Calendar
                              mode="single"
                              selected={startDate}
                              onSelect={(date) => setStartDate(date ?? startDate)}
                            />
                            <Input
                              type="time"
                              value={startTime}
                              onChange={(e) => setStartTime(e.target.value)}
                              className="h-8 text-xs"
                            />
                          </div>
                        </PopoverContent>
                      </Popover>
                    </div>

                    <div className="space-y-1">
                      <div className="text-muted-foreground">–ü—Ä–æ–µ–∫—Ç</div>
                      <Button variant="outline" size="sm" className="h-7 justify-start text-xs">
                        –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç‚Ä¶
                      </Button>
                    </div>

                    <div className="space-y-1">
                      <div className="text-muted-foreground">–°–æ–∑–¥–∞—Ç–µ–ª—å</div>
                      <Button
                        variant="outline"
                        size="sm"
                        className="h-7 justify-start text-xs cursor-default"
                        disabled
                      >
                        –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
                      </Button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            {/* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ */}
            <div className="flex flex-1 flex-col">
              <div className="flex-1 px-6 py-4">
                <div className="mb-3 text-xs font-medium text-muted-foreground">
                  –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                </div>
                <div className="h-full overflow-y-auto">
                  <div className="flex h-full items-center justify-center text-xs text-muted-foreground">
                    –ë–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
                  </div>
                </div>
              </div>

              <div className="border-t">
                <div className="px-6 py-3">
                  <Textarea
                    value={comment}
                    onChange={(e) => setComment(e.target.value)}
                    placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π‚Ä¶"
                    className="min-h-[80px] break-all text-sm leading-snug"
                    onKeyDown={(e) => {
                      if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        handleSendComment();
                      }
                    }}
                  />
                  <div className="mt-2 flex justify-end">
                    <Button size="sm" onClick={handleSendComment}>
                      –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                    </Button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </SheetContent>
      </Sheet>

      {/* –ö–∞—Ä—Ç–æ—á–∫–∞ –≤ –∫–æ–ª–æ–Ω–∫–µ */}
      <KanbanBoardCard
        data={card}
        onClick={() => {
          setDraftTitle(card.title);
          ensureDefaultStart();
          setIsEditingTitle(false);
          setIsSheetOpen(true);
        }}
        className="space-y-2"
      >
        <KanbanBoardCardDescription
          className={`break-all text-xs leading-snug ${
            isCompleted ? 'text-muted-foreground line-through' : ''
          }`}
        >
          {card.title}
        </KanbanBoardCardDescription>

        <div className="mt-1 flex items-center justify-between">
          <div className="flex items-center gap-2">
            <div
              role="button"
              tabIndex={0}
              onClick={(e) => {
                e.stopPropagation();
                setIsCompleted((prev) => !prev);
              }}
              onKeyDown={(e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                  e.preventDefault();
                  e.stopPropagation();
                  setIsCompleted((prev) => !prev);
                }
              }}
              className={`flex h-5 w-5 items-center justify-center rounded-full border text-[10px] transition-colors ${
                isCompleted
                  ? 'border-primary bg-primary text-primary-foreground'
                  : 'border-muted-foreground/40 bg-background text-muted-foreground'
              }`}
            >
              <CheckIcon
                size={10}
                className={isCompleted ? '' : 'text-muted-foreground/60'}
              />
            </div>
            <span className="text-[11px] font-medium text-muted-foreground">
              #{card.displayId}
            </span>
          </div>

          <div className="flex items-center gap-2">
            <div className="flex h-5 w-5 items-center justify-center rounded-full bg-primary text-[9px] font-medium text-primary-foreground">
              {initials}
            </div>
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <KanbanBoardCardButton className="h-5 w-5 p-0 text-muted-foreground hover:text-foreground">
                  <MoreVerticalIcon size={14} />
                </KanbanBoardCardButton>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end">
                <DropdownMenuItem
                  onClick={(e) => {
                    e.stopPropagation();
                    ensureDefaultStart();
                    setDraftTitle(card.title);
                    setIsEditingTitle(false);
                    setIsSheetOpen(true);
                  }}
                >
                  –ò–∑–º–µ–Ω–∏—Ç—å
                </DropdownMenuItem>
                <DropdownMenuItem
                  className="text-destructive"
                  onClick={(e) => {
                    e.stopPropagation();
                    onDeleteCard(card.id);
                  }}
                >
                  <Trash2Icon className="mr-2 h-4 w-4" />
                  –£–¥–∞–ª–∏—Ç—å
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          </div>
        </div>
      </KanbanBoardCard>
    </>
  );
}
</file>

<file path="app/features/kanban/board.tsx">
'use client';

import { useEffect, useRef, useState, useTransition } from 'react';
import { useJsLoaded } from '@/new-york/hooks/use-js-loaded';
import { 
  KanbanBoard, 
  KanbanBoardColumnSkeleton, 
  KanbanBoardExtraMargin, 
  KanbanBoardProvider 
} from '@/new-york/ui/kanban';
import { Skeleton } from '~/components/ui/skeleton';
import { MyNewKanbanBoardColumn } from './components/new-column';
import { KanbanColumn } from './components/column';
import { 
  addColumn, 
  updateColumnTitle, 
  deleteColumn, 
  addTask, 
  updateTaskTitle, 
  deleteTask, 
  moveTask,
  completeTask,
} from './actions';

type KanbanColor =
  | 'blue'
  | 'yellow'
  | 'green'
  | 'primary'
  | 'cyan'
  | 'gray'
  | 'indigo'
  | 'pink'
  | 'purple'
  | 'red'
  | 'violet';

type Card = {
  id: string;
  title: string;
  order: number;
  displayId: string;
};

type Column = {
  id: string;
  title: string;
  color: KanbanColor;
  items: Card[];
  order: number;
};

type BoardProps = {
  projectId: string;
  boardId: string;
  initialColumns: Column[];
};

export default function KanbanBoardWrapper({
  project,
  boardId,
  columns,
}: {
  project: any;
  boardId: string;
  columns: any[];
}) {
  const uiColumns: Column[] = columns.map((c: any) => ({
    id: c.id,
    title: c.title,
    color: (c.color ?? 'primary') as KanbanColor,
    order: c.order,
    items: c.tasks.map((t: any) => ({
      id: t.id,
      title: t.title,
      order: t.order,
      displayId: `${project.number}-${t.projectTaskNumber}`,
    })),
  }));

  return (
    <KanbanBoardProvider>
      <ProjectKanbanBoard
        projectId={project.id}
        boardId={boardId}
        initialColumns={uiColumns}
      />
    </KanbanBoardProvider>
  );
}

function ProjectKanbanBoard({ projectId, boardId, initialColumns }: BoardProps) {
  const [columns, setColumns] = useState<Column[]>(initialColumns);
  const [isPending, startTransition] = useTransition();
  const scrollContainerReference = useRef<HTMLDivElement | null>(null);

  useEffect(() => {
    setColumns(initialColumns);
  }, [initialColumns]);

  function scrollRight() {
    if (scrollContainerReference.current) {
      scrollContainerReference.current.scrollLeft =
        scrollContainerReference.current.scrollWidth;
    }
  }

  const handleAddColumn = (title?: string) => {
    if (title) {
      startTransition(async () => {
        await addColumn(boardId, projectId, title);
        scrollRight();
      });
    }
  };

  const handleDeleteColumn = (columnId: string) => {
    startTransition(async () => {
      await deleteColumn(columnId);
    });
  };

  const handleUpdateColumnTitle = (columnId: string, title: string) => {
    startTransition(async () => {
      await updateColumnTitle(columnId, title);
    });
  };

  const handleAddCard = (columnId: string, cardContent: string) => {
    startTransition(async () => {
      await addTask(columnId, cardContent);
    });
  };

  const handleDeleteCard = (cardId: string) => {
    startTransition(async () => {
      await deleteTask(cardId);
    });
  };

  const handleUpdateCardTitle = (cardId: string, cardTitle: string) => {
    setColumns((previousColumns) =>
      previousColumns.map((column) => ({
        ...column,
        items: column.items.map((item) =>
          item.id === cardId ? { ...item, title: cardTitle } : item,
        ),
      })),
    );

    startTransition(async () => {
      await updateTaskTitle(cardId, cardTitle);
    });
  };

  const handleMoveCardToColumn = (columnId: string, index: number, card: Card) => {
    setColumns((previousColumns) =>
      previousColumns.map((column: Column) => {
        if (column.id === columnId) {
          const otherItems = column.items.filter(({ id }) => id !== card.id);
          return {
            ...column,
            items: [...otherItems.slice(0, index), card, ...otherItems.slice(index)],
          };
        } else {
          return {
            ...column,
            items: column.items.filter(({ id }) => id !== card.id),
          };
        }
      }),
    );

    startTransition(async () => {
      await moveTask(card.id, columnId, index, projectId);
    });
  };

  const handleCompleteCard = (cardId: string) => {
    setColumns((previousColumns) =>
      previousColumns.map((column) => ({
        ...column,
        items: column.items.filter((item) => item.id !== cardId),
      })),
    );

    startTransition(async () => {
      await completeTask(cardId);
    });
  };

  const handleDragCancel = (cardId: string) => {};

  const handleDragEnd = (cardId: string, overId: string) => {};

  const jsLoaded = useJsLoaded();

  return (
    <KanbanBoard ref={scrollContainerReference} className="h-full">
      {columns.map((column: Column) =>
        jsLoaded ? (
          <KanbanColumn
            key={column.id}
            column={column}
            onAddCard={handleAddCard}
            onDeleteCard={handleDeleteCard}
            onDeleteColumn={handleDeleteColumn}
            onMoveCardToColumn={handleMoveCardToColumn}
            onUpdateCardTitle={handleUpdateCardTitle}
            onUpdateColumnTitle={handleUpdateColumnTitle}
            onCompleteCard={handleCompleteCard}
            onDragCancel={handleDragCancel}
            onDragEnd={handleDragEnd}
          />
        ) : (
          <KanbanBoardColumnSkeleton key={column.id} />
        ),
      )}
      {jsLoaded ? (
        <MyNewKanbanBoardColumn onAddColumn={handleAddColumn} />
      ) : (
        <Skeleton className="h-9 w-10.5 flex-shrink-0" />
      )}
      <KanbanBoardExtraMargin />
    </KanbanBoard>
  );
}
</file>

</files>
